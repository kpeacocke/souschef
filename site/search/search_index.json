{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SousChef Documentation","text":"<p>An AI-powered MCP (Model Context Protocol) server that provides comprehensive Chef-to-Ansible migration capabilities for enterprise infrastructure transformation.</p> <p> </p>"},{"location":"#overview","title":"Overview","text":"<p>SousChef is a complete enterprise-grade migration platform with 38 MCP tools organized across 9 major capability areas to facilitate Chef-to-Ansible AWX/AAP migrations. From cookbook analysis to deployment pattern conversion, including Chef Habitat to containerized deployments, SousChef provides everything needed for a successful infrastructure automation migration.</p>"},{"location":"#model-agnostic-works-with-any-ai-model","title":"Model Agnostic - Works with Any AI Model","text":"<p>SousChef works with ANY AI model through the Model Context Protocol (MCP). The MCP architecture separates tools from models:</p> <ul> <li>:material-robot: Red Hat AI (Llama, IBM models)</li> <li>:material-chat: Claude (Anthropic)</li> <li>:material-openai: GPT-4/GPT-3.5 (OpenAI)</li> <li>:material-github: GitHub Copilot (Microsoft/OpenAI)</li> <li>:material-server: Local Models (Ollama, llama.cpp, etc.)</li> <li>:material-domain: Custom Enterprise Models</li> </ul> <p>How it works</p> <p>You choose your AI model provider in your MCP client. SousChef provides the Chef/Ansible expertise through 38 specialized tools. The model calls these tools to help with your migration.</p>"},{"location":"#core-capabilities","title":"Core Capabilities","text":""},{"location":"#material-file-code-chef-cookbook-analysis-parsing","title":":material-file-code: Chef Cookbook Analysis &amp; Parsing","text":"<p>Complete cookbook introspection and analysis tools for understanding your Chef infrastructure.</p> <p>Learn more about parsing \u2192</p>"},{"location":"#material-swap-horizontal-chef-to-ansible-conversion-engine","title":":material-swap-horizontal: Chef-to-Ansible Conversion Engine","text":"<p>Advanced resource-to-task conversion with intelligent module selection and guard handling.</p> <p>Learn more about conversion \u2192</p>"},{"location":"#material-cloud-awxansible-automation-platform-integration","title":":material-cloud: AWX/Ansible Automation Platform Integration","text":"<p>Enterprise AWX/AAP configuration generation with job templates and workflows.</p> <p>Learn more about AWX integration \u2192</p>"},{"location":"#material-docker-chef-habitat-to-container-conversion","title":":material-docker: Chef Habitat to Container Conversion","text":"<p>Modernize Habitat applications to containerized deployments with Docker and Compose.</p> <p>Learn more about Habitat conversion \u2192</p>"},{"location":"#material-check-circle-validation-testing","title":":material-check-circle: Validation &amp; Testing","text":"<p>Comprehensive validation framework and InSpec integration for ensuring migration accuracy.</p> <p>Learn more about validation \u2192</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get started with SousChef in minutes:</p> <pre><code># Install from PyPI\npip install mcp-souschef\n\n# Configure your MCP client\ncp config/claude-desktop.json ~/Library/Application\\ Support/Claude/claude_desktop_config.json\n\n# Start using with your AI assistant\n# Ask: \"What Chef migration tools are available?\"\n</code></pre> <p>Get started \u2192</p>"},{"location":"#enterprise-features","title":"Enterprise Features","text":"<ul> <li>:material-chart-line: Migration Assessment &amp; Reporting - Automated complexity analysis and executive reports</li> <li>:material-rocket: Modern Deployment Patterns - Blue/green, canary releases, and cloud-native strategies</li> <li>:material-key: Secrets Management - Secure data bag to Ansible Vault conversion</li> <li>:material-speedometer: Performance Profiling - Identify bottlenecks and optimize large-scale migrations</li> </ul>"},{"location":"#whats-next","title":"What's Next?","text":"<ul> <li> <p>:material-download:{ .lg .middle } Installation</p> <p>Install SousChef and configure your MCP client</p> <p>:octicons-arrow-right-24: Get started</p> </li> <li> <p>:material-lightning-bolt:{ .lg .middle } Quick Start</p> <p>Start migrating Chef cookbooks in minutes</p> <p>:octicons-arrow-right-24: Quick start</p> </li> <li> <p>:material-book-open-variant:{ .lg .middle } User Guide</p> <p>Explore MCP tools and CLI usage</p> <p>:octicons-arrow-right-24: User guide</p> </li> <li> <p>:material-map:{ .lg .middle } Migration Guide</p> <p>Plan and execute your Chef-to-Ansible migration</p> <p>:octicons-arrow-right-24: Migration guide</p> </li> </ul>"},{"location":"#community-support","title":"Community &amp; Support","text":"<ul> <li>:material-github: GitHub: kpeacocke/souschef</li> <li>:material-bug: Issues: Report a bug</li> <li>:material-forum: Discussions: GitHub Discussions</li> <li>:material-book: Wiki: Documentation</li> </ul> <p>SousChef - Transforming infrastructure automation, one recipe at a time. \u2728</p>"},{"location":"contributing/","title":"Contributing to SousChef","text":"<p>Thank you for your interest in contributing to SousChef! We welcome contributions of all kinds.</p> <p>For complete contributing guidelines, please see CONTRIBUTING.md in the repository.</p>"},{"location":"contributing/#quick-links","title":"Quick Links","text":"<ul> <li>Development Setup</li> <li>Code Standards</li> <li>Testing Requirements</li> <li>Submitting Changes</li> </ul>"},{"location":"api-reference/cli/","title":"CLI API","text":"<p>Command-line interface implementation for SousChef.</p>"},{"location":"api-reference/cli/#overview","title":"Overview","text":"<p>The <code>souschef.cli</code> module provides a command-line interface for Chef-to-Ansible conversion using the Click framework. All commands are accessible via the <code>souschef-cli</code> entry point.</p>"},{"location":"api-reference/cli/#cli-commands","title":"CLI Commands","text":"<p>See the CLI Usage Guide for complete documentation of all available commands with examples.</p>"},{"location":"api-reference/cli/#usage-examples","title":"Usage Examples","text":""},{"location":"api-reference/cli/#basic-command-usage","title":"Basic Command Usage","text":"<pre><code># Parse a recipe\nsouschef-cli recipe recipes/default.rb\n\n# Convert with JSON output\nsouschef-cli recipe recipes/default.rb --format json\n\n# Convert to playbook\nsouschef-cli convert-recipe recipes/default.rb &gt; playbook.yml\n</code></pre>"},{"location":"api-reference/cli/#piping-commands","title":"Piping Commands","text":"<pre><code># Parse and filter\nsouschef-cli recipe recipes/default.rb | grep \"package\"\n\n# Convert and validate\nsouschef-cli convert-recipe recipes/default.rb | ansible-playbook --syntax-check\n\n# Batch processing\nfind cookbooks/ -name \"*.rb\" | xargs -I {} souschef-cli recipe {}\n</code></pre>"},{"location":"api-reference/cli/#output-formats","title":"Output Formats","text":"<pre><code># Text output (default)\nsouschef-cli recipe recipes/default.rb --format text\n\n# JSON for programmatic use\nsouschef-cli recipe recipes/default.rb --format json | jq '.resources'\n\n# YAML output\nsouschef-cli recipe recipes/default.rb --format yaml\n</code></pre>"},{"location":"api-reference/cli/#click-integration","title":"Click Integration","text":"<p>SousChef uses Click for CLI implementation:</p> <pre><code>import click\nfrom souschef.parsers.recipe import RecipeParser\n\n@click.command()\n@click.argument('recipe_path', type=click.Path(exists=True))\n@click.option('--format', type=click.Choice(['text', 'json', 'yaml']), default='text')\ndef recipe(recipe_path: str, format: str) -&gt; None:\n    \"\"\"Parse a Chef recipe.\"\"\"\n    parser = RecipeParser(recipe_path)\n    result = parser.parse()\n    click.echo(format_output(result, format))\n</code></pre> <p>Benefits: - Automatic help generation - Type validation - Shell completion support - Click context management</p>"},{"location":"api-reference/cli/#error-handling","title":"Error Handling","text":"<p>CLI commands handle errors consistently:</p> <pre><code>try:\n    result = parse_recipe(recipe_path)\n    click.echo(result)\nexcept FileNotFoundError:\n    click.echo(f\"Error: File not found: {recipe_path}\", err=True)\n    sys.exit(1)\nexcept Exception as e:\n    click.echo(f\"Error: {e}\", err=True)\n    sys.exit(1)\n</code></pre>"},{"location":"api-reference/cli/#shell-completion","title":"Shell Completion","text":"<p>Enable shell completion for faster CLI usage:</p> <pre><code># Bash\neval \"$(_SOUSCHEF_CLI_COMPLETE=bash_source souschef-cli)\"\n\n# Zsh\neval \"$(_SOUSCHEF_CLI_COMPLETE=zsh_source souschef-cli)\"\n\n# Fish\neval (env _SOUSCHEF_CLI_COMPLETE=fish_source souschef-cli)\n</code></pre> <p>Add to shell rc file for persistence:</p> <pre><code>echo 'eval \"$(_SOUSCHEF_CLI_COMPLETE=bash_source souschef-cli)\"' &gt;&gt; ~/.bashrc\n</code></pre>"},{"location":"api-reference/cli/#see-also","title":"See Also","text":"<ul> <li>Server API - MCP server implementation</li> <li>Parsers API - Parsing modules</li> <li>CLI Usage Guide - User documentation</li> <li>Click Documentation - CLI framework</li> </ul>"},{"location":"api-reference/converters/","title":"Converters API","text":"<p>Chef-to-Ansible conversion modules for playbooks, resources, and templates.</p>"},{"location":"api-reference/converters/#overview","title":"Overview","text":"<p>The <code>souschef.converters</code> package transforms parsed Chef artifacts into Ansible equivalents. Converters maintain logic and intent while adapting to Ansible idioms.</p>"},{"location":"api-reference/converters/#converter-modules","title":"Converter Modules","text":"<p>The following converters are available:</p> <ul> <li>Playbook Converter (<code>souschef.converters.playbook</code>) - Convert recipes to playbooks</li> <li>Resource Converter (<code>souschef.converters.resource</code>) - Convert Chef resources to Ansible tasks</li> <li>Habitat Converter (<code>souschef.converters.habitat</code>) - Convert Habitat plans to Docker</li> </ul> <p>For detailed conversion patterns and examples, see the Conversion Guide.</p>"},{"location":"api-reference/converters/#conversion-patterns","title":"Conversion Patterns","text":""},{"location":"api-reference/converters/#resource-to-task-mapping","title":"Resource-to-Task Mapping","text":"<pre><code>def convert_resource_to_task(resource: dict) -&gt; dict:\n    \"\"\"Convert Chef resource to Ansible task.\n\n    Args:\n        resource: Parsed Chef resource\n\n    Returns:\n        Ansible task dictionary\n    \"\"\"\n    task = {\n        'name': f\"Manage {resource['name']}\",\n        'ansible.builtin.package': {\n            'name': resource['name'],\n            'state': 'present' if resource['action'] == 'install' else 'absent'\n        }\n    }\n\n    # Add guards as when conditions\n    if resource.get('guards'):\n        task['when'] = convert_guards(resource['guards'])\n\n    return task\n</code></pre>"},{"location":"api-reference/converters/#template-transformation","title":"Template Transformation","text":"<pre><code>def convert_erb_to_jinja2(erb_content: str) -&gt; str:\n    \"\"\"Convert ERB template to Jinja2.\n\n    Args:\n        erb_content: ERB template content\n\n    Returns:\n        Jinja2 template content\n    \"\"\"\n    # Variable interpolation: &lt;%= @var %&gt; \u2192 {{ var }}\n    jinja2 = erb_content\n    jinja2 = re.sub(r'&lt;%=\\s*@(\\w+)\\s*%&gt;', r'{{ \\1 }}', jinja2)\n\n    # Conditionals: &lt;% if @var %&gt; \u2192 {% if var %}\n    jinja2 = re.sub(r'&lt;%\\s*if\\s+@(\\w+)\\s*%&gt;', r'{% if \\1 %}', jinja2)\n    jinja2 = re.sub(r'&lt;%\\s*end\\s*%&gt;', r'{% endif %}', jinja2)\n\n    # Loops: &lt;% @items.each do |item| %&gt; \u2192 {% for item in items %}\n    jinja2 = re.sub(\n        r'&lt;%\\s*@(\\w+)\\.each\\s+do\\s+\\|(\\w+)\\|\\s*%&gt;',\n        r'{% for \\2 in \\1 %}',\n        jinja2\n    )\n\n    return jinja2\n</code></pre>"},{"location":"api-reference/converters/#guard-conversion","title":"Guard Conversion","text":"<pre><code>def convert_guards(guards: list) -&gt; str:\n    \"\"\"Convert Chef guards to Ansible when clause.\n\n    Args:\n        guards: List of Chef guard conditions\n\n    Returns:\n        Ansible when condition\n    \"\"\"\n    conditions = []\n\n    for guard in guards:\n        if guard['type'] == 'only_if':\n            conditions.append(convert_condition(guard['condition']))\n        elif guard['type'] == 'not_if':\n            conditions.append(f\"not ({convert_condition(guard['condition'])})\")\n\n    return ' and '.join(conditions)\n\ndef convert_condition(condition: str) -&gt; str:\n    \"\"\"Convert Ruby condition to Ansible.\"\"\"\n    # File existence: File.exist?('/path') \u2192 stat_result.stat.exists\n    if 'File.exist?' in condition:\n        path = re.search(r\"File\\.exist\\?\\(['\\\"](.*?)['\\\"]\\)\", condition).group(1)\n        return f\"stat_{path.replace('/', '_')}.stat.exists\"\n\n    # Command success: system('command') \u2192 command_result.rc == 0\n    if 'system(' in condition:\n        return \"command_result.rc == 0\"\n\n    return condition\n</code></pre>"},{"location":"api-reference/converters/#usage-examples","title":"Usage Examples","text":""},{"location":"api-reference/converters/#basic-recipe-conversion","title":"Basic Recipe Conversion","text":"<pre><code>from souschef.parsers.recipe import parse_recipe_file\nfrom souschef.converters.playbook import convert_to_playbook\n\n# Parse recipe\nparsed = parse_recipe_file('recipes/webserver.rb')\n\n# Convert to playbook\nplaybook = convert_to_playbook(parsed)\n\n# Write output\nwith open('webserver.yml', 'w') as f:\n    f.write(playbook)\n</code></pre>"},{"location":"api-reference/converters/#custom-resource-to-role","title":"Custom Resource to Role","text":"<pre><code>from souschef.parsers.resource import parse_custom_resource\nfrom souschef.converters.resource import convert_to_role\n\n# Parse custom resource\nresource = parse_custom_resource('resources/app_config.rb')\n\n# Convert to Ansible role\nrole = convert_to_role(resource)\n\n# Generate role structure\ncreate_role_structure('roles/app_config', role)\n</code></pre>"},{"location":"api-reference/converters/#habitat-to-docker","title":"Habitat to Docker","text":"<pre><code>from souschef.parsers.habitat import parse_habitat_plan\nfrom souschef.converters.habitat import convert_to_dockerfile\n\n# Parse Habitat plan\nplan = parse_habitat_plan('habitat/plan.sh')\n\n# Convert to Dockerfile\ndockerfile = convert_to_dockerfile(plan)\n\n# Write Dockerfile\nwith open('Dockerfile', 'w') as f:\n    f.write(dockerfile)\n</code></pre>"},{"location":"api-reference/converters/#conversion-strategies","title":"Conversion Strategies","text":""},{"location":"api-reference/converters/#direct-mapping","title":"Direct Mapping","text":"<p>For simple, one-to-one conversions:</p> <pre><code>RESOURCE_MAP = {\n    'package': 'ansible.builtin.package',\n    'service': 'ansible.builtin.service',\n    'file': 'ansible.builtin.file',\n    'directory': 'ansible.builtin.file',\n    'template': 'ansible.builtin.template',\n}\n\ndef map_resource(resource_type: str) -&gt; str:\n    \"\"\"Map Chef resource to Ansible module.\"\"\"\n    return RESOURCE_MAP.get(resource_type, 'ansible.builtin.command')\n</code></pre>"},{"location":"api-reference/converters/#complex-logic-preservation","title":"Complex Logic Preservation","text":"<p>For complex conversions requiring multiple tasks:</p> <pre><code>def convert_complex_resource(resource: dict) -&gt; list[dict]:\n    \"\"\"Convert complex resource to multiple tasks.\"\"\"\n    tasks = []\n\n    # Pre-conditions\n    if resource.get('guards'):\n        tasks.extend(convert_guard_checks(resource['guards']))\n\n    # Main action\n    tasks.append(convert_main_action(resource))\n\n    # Notifications\n    if resource.get('notifies'):\n        tasks.extend(convert_notifications(resource['notifies']))\n\n    return tasks\n</code></pre>"},{"location":"api-reference/converters/#validation","title":"Validation","text":""},{"location":"api-reference/converters/#syntax-validation","title":"Syntax Validation","text":"<pre><code>import yaml\n\ndef validate_playbook_syntax(playbook_yaml: str) -&gt; bool:\n    \"\"\"Validate generated playbook syntax.\"\"\"\n    try:\n        yaml.safe_load(playbook_yaml)\n        return True\n    except yaml.YAMLError as e:\n        print(f\"YAML syntax error: {e}\")\n        return False\n</code></pre>"},{"location":"api-reference/converters/#semantic-validation","title":"Semantic Validation","text":"<pre><code>def validate_conversion_logic(chef_resource: dict, ansible_task: dict) -&gt; bool:\n    \"\"\"Validate that logic is preserved.\"\"\"\n    # Check action mapping\n    if chef_resource['action'] == 'install':\n        assert ansible_task['package']['state'] == 'present'\n    elif chef_resource['action'] == 'remove':\n        assert ansible_task['package']['state'] == 'absent'\n\n    # Check guards converted to when clauses\n    if chef_resource.get('guards'):\n        assert 'when' in ansible_task\n\n    return True\n</code></pre>"},{"location":"api-reference/converters/#testing-converters","title":"Testing Converters","text":"<p>See test suite for converter testing:</p> <ul> <li>Unit tests: tests/test_server.py</li> <li>Integration tests: tests/test_integration.py</li> <li>Accuracy tests: tests/test_integration_accuracy.py</li> </ul>"},{"location":"api-reference/converters/#see-also","title":"See Also","text":"<ul> <li>Server API - MCP server using converters</li> <li>Parsers API - Parse Chef artifacts first</li> <li>Conversion Guide - Conversion techniques</li> <li>Examples - Real-world conversions</li> </ul>"},{"location":"api-reference/core/","title":"Core Utilities","text":"<p>Documentation coming soon.</p>"},{"location":"api-reference/parsers/","title":"Parsers API","text":"<p>Chef artifact parsing modules for recipes, templates, resources, attributes, and more.</p>"},{"location":"api-reference/parsers/#overview","title":"Overview","text":"<p>The <code>souschef.parsers</code> package contains specialized parsers for different Chef artifact types. Each parser extracts structured data from Ruby-based Chef code.</p>"},{"location":"api-reference/parsers/#parser-modules","title":"Parser Modules","text":"<p>The following parsers are available:</p> <ul> <li>Recipe Parser (<code>souschef.parsers.recipe</code>) - Parse Chef recipes</li> <li>Template Parser (<code>souschef.parsers.template</code>) - Extract ERB template variables</li> <li>Resource Parser (<code>souschef.parsers.resource</code>) - Parse custom resources</li> <li>Attributes Parser (<code>souschef.parsers.attributes</code>) - Parse attribute files</li> <li>Metadata Parser (<code>souschef.parsers.metadata</code>) - Parse cookbook metadata</li> <li>InSpec Parser (<code>souschef.parsers.inspec</code>) - Parse InSpec profiles</li> <li>Habitat Parser (<code>souschef.parsers.habitat</code>) - Parse Habitat plans</li> </ul> <p>For usage examples and patterns, see the Examples Guide.</p>"},{"location":"api-reference/parsers/#common-parsing-patterns","title":"Common Parsing Patterns","text":""},{"location":"api-reference/parsers/#ruby-ast-parsing","title":"Ruby AST Parsing","text":"<p>All parsers use regular expressions and Ruby syntax analysis:</p> <pre><code>import re\nfrom pathlib import Path\n\nclass RecipeParser:\n    \"\"\"Parse Chef recipes.\"\"\"\n\n    RESOURCE_PATTERN = re.compile(\n        r'^\\s*(\\w+)\\s+([\\'\\\"]([^'\\\"]+)[\\'\\\"]|[\\w-]+)\\s+do',\n        re.MULTILINE\n    )\n\n    def parse(self, content: str) -&gt; dict:\n        \"\"\"Extract resources from recipe.\"\"\"\n        resources = []\n        for match in self.RESOURCE_PATTERN.finditer(content):\n            resource_type = match.group(1)\n            resource_name = match.group(3) or match.group(2)\n            resources.append({\n                'type': resource_type,\n                'name': resource_name\n            })\n        return {'resources': resources}\n</code></pre>"},{"location":"api-reference/parsers/#error-handling","title":"Error Handling","text":"<pre><code>def parse_file(filepath: str) -&gt; dict:\n    \"\"\"Parse file with error handling.\"\"\"\n    try:\n        with open(filepath, 'r') as f:\n            content = f.read()\n        return parse(content)\n    except FileNotFoundError:\n        raise ValueError(f\"File not found: {filepath}\")\n    except UnicodeDecodeError:\n        raise ValueError(f\"Invalid encoding in file: {filepath}\")\n    except Exception as e:\n        raise ValueError(f\"Parse error: {e}\")\n</code></pre>"},{"location":"api-reference/parsers/#usage-examples","title":"Usage Examples","text":""},{"location":"api-reference/parsers/#recipe-parsing","title":"Recipe Parsing","text":"<pre><code>from souschef.parsers.recipe import parse_recipe_file\n\n# Parse a recipe\nresult = parse_recipe_file('recipes/default.rb')\n\n# Access parsed data\nfor resource in result['resources']:\n    print(f\"{resource['type']}: {resource['name']}\")\n</code></pre>"},{"location":"api-reference/parsers/#template-variable-extraction","title":"Template Variable Extraction","text":"<pre><code>from souschef.parsers.template import parse_template_file\n\n# Parse ERB template\nresult = parse_template_file('templates/config.erb')\n\n# List all variables\nfor var in result['variables']:\n    print(f\"Variable: {var}\")\n</code></pre>"},{"location":"api-reference/parsers/#attribute-parsing","title":"Attribute Parsing","text":"<pre><code>from souschef.parsers.attributes import parse_attributes_file\n\n# Parse attributes\nresult = parse_attributes_file('attributes/default.rb')\n\n# Access attributes\nfor attr in result['attributes']:\n    print(f\"{attr['precedence']}['{attr['key']}']\n = {attr['value']}\")\n</code></pre>"},{"location":"api-reference/parsers/#parser-performance","title":"Parser Performance","text":""},{"location":"api-reference/parsers/#optimization-tips","title":"Optimization Tips","text":"<ol> <li>Compile Patterns Once: Compile regex patterns at module level</li> <li>Stream Large Files: Use iterators for large files</li> <li>Cache Results: Cache parsed results when processing multiple times</li> <li>Parallel Processing: Use multiprocessing for batch operations</li> </ol> <pre><code>from concurrent.futures import ProcessPoolExecutor\nfrom pathlib import Path\n\ndef parse_cookbook_parallel(cookbook_path: str) -&gt; dict:\n    \"\"\"Parse all recipes in parallel.\"\"\"\n    recipes = list(Path(cookbook_path).glob('recipes/*.rb'))\n\n    with ProcessPoolExecutor() as executor:\n        results = executor.map(parse_recipe_file, recipes)\n\n    return {'recipes': list(results)}\n</code></pre>"},{"location":"api-reference/parsers/#testing-parsers","title":"Testing Parsers","text":"<p>See test suite for parser testing examples:</p> <ul> <li>Unit tests: tests/test_server.py</li> <li>Integration tests: tests/test_integration.py</li> <li>Property-based tests: tests/test_property_based.py</li> </ul>"},{"location":"api-reference/parsers/#see-also","title":"See Also","text":"<ul> <li>Server API - MCP server using parsers</li> <li>Converters API - Convert parsed data</li> <li>Core Utilities - Shared utilities</li> <li>Examples - Real-world parsing examples</li> </ul>"},{"location":"api-reference/server/","title":"Server API","text":"<p>MCP server implementation and internal functions for the SousChef tool.</p>"},{"location":"api-reference/server/#overview","title":"Overview","text":"<p>The <code>souschef.server</code> module provides the MCP (Model Context Protocol) server implementation that exposes Chef-to-Ansible conversion tools to AI assistants like Claude Desktop and GitHub Copilot.</p> <p>MCP Framework</p> <p>SousChef uses FastMCP to implement the Model Context Protocol server. Tools are registered using the <code>@mcp.tool()</code> decorator.</p>"},{"location":"api-reference/server/#mcp-tools","title":"MCP Tools","text":"<p>See the MCP Tools Reference for complete documentation of all 38 available MCP tools with usage examples.</p>"},{"location":"api-reference/server/#usage-examples","title":"Usage Examples","text":""},{"location":"api-reference/server/#basic-server-startup","title":"Basic Server Startup","text":"<pre><code>from souschef.server import mcp\n\n# MCP server starts automatically when module is imported\n# or can be run directly:\nif __name__ == \"__main__\":\n    mcp.run()\n</code></pre>"},{"location":"api-reference/server/#tool-registration-pattern","title":"Tool Registration Pattern","text":"<pre><code>from mcp import FastMCP\n\nmcp = FastMCP(\"SousChef\")\n\n@mcp.tool()\ndef my_chef_tool(cookbook_path: str) -&gt; str:\n    \"\"\"Parse a Chef cookbook.\n\n    Args:\n        cookbook_path: Path to the cookbook directory\n\n    Returns:\n        Analysis results as formatted text\n    \"\"\"\n    # Implementation\n    return results\n</code></pre>"},{"location":"api-reference/server/#calling-tools-from-python","title":"Calling Tools from Python","text":"<pre><code>from souschef.server import parse_recipe, convert_recipe_to_playbook\n\n# Parse a recipe\nanalysis = parse_recipe(\"/path/to/recipe.rb\")\nprint(analysis)\n\n# Convert to playbook\nplaybook = convert_recipe_to_playbook(\"/path/to/recipe.rb\")\nprint(playbook)\n</code></pre>"},{"location":"api-reference/server/#error-handling","title":"Error Handling","text":"<p>All MCP tools follow consistent error handling:</p> <pre><code>try:\n    result = parse_recipe(recipe_path)\n    return result\nexcept FileNotFoundError:\n    return f\"Error: Recipe file not found: {recipe_path}\"\nexcept Exception as e:\n    return f\"An error occurred: {e}\"\n</code></pre> <p>Error Messages</p> <p>MCP tools return error messages as strings rather than raising exceptions. This ensures AI assistants receive actionable feedback.</p>"},{"location":"api-reference/server/#type-safety","title":"Type Safety","text":"<p>All tools use Python type hints for parameters and return values:</p> <pre><code>def parse_recipe(recipe_path: str, format: str = \"text\") -&gt; str:\n    \"\"\"Type-safe function signature.\"\"\"\n    pass\n</code></pre> <p>Benefits: - IDE autocomplete and IntelliSense - Static type checking with mypy - Better documentation - Reduced runtime errors</p>"},{"location":"api-reference/server/#testing","title":"Testing","text":"<p>See the test suite for examples of testing MCP tools:</p> <ul> <li>Unit tests: tests/test_server.py</li> <li>Integration tests: tests/test_integration.py</li> <li>MCP protocol tests: tests/test_mcp.py</li> </ul>"},{"location":"api-reference/server/#see-also","title":"See Also","text":"<ul> <li>CLI API - Command-line interface implementation</li> <li>Parsers API - Chef artifact parsers</li> <li>Converters API - Chef-to-Ansible converters</li> <li>MCP Tools Reference - User-facing tool documentation</li> <li>FastMCP Documentation - MCP framework</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Learn how to configure SousChef for your environment and customize its behavior.</p>"},{"location":"getting-started/configuration/#configuration-files","title":"Configuration Files","text":"<p>SousChef provides pre-configured setup files for different environments and MCP clients in the <code>config/</code> directory:</p> File Purpose <code>claude-desktop.json</code> Production setup for Claude Desktop <code>claude-desktop-dev.json</code> Development setup pointing to local repository <code>vscode-copilot.json</code> VS Code with GitHub Copilot MCP extension <code>vscode-copilot-dev.json</code> VS Code development setup"},{"location":"getting-started/configuration/#mcp-server-configuration","title":"MCP Server Configuration","text":"<p>The basic MCP server configuration structure:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"args\": [],\n      \"env\": {}\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#configuration-options","title":"Configuration Options","text":""},{"location":"getting-started/configuration/#command","title":"Command","text":"<p>The <code>command</code> field specifies how to launch the MCP server:</p> PyPI InstallationPoetry DevelopmentPython Module <pre><code>{\n  \"command\": \"souschef\"\n}\n</code></pre> <pre><code>{\n  \"command\": \"poetry\",\n  \"args\": [\"run\", \"souschef\"]\n}\n</code></pre> <pre><code>{\n  \"command\": \"python3\",\n  \"args\": [\"-m\", \"souschef.server\"]\n}\n</code></pre>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>Configure behavior through environment variables:</p> <pre><code>{\n  \"env\": {\n    \"LOG_LEVEL\": \"INFO\",\n    \"SOUSCHEF_CONFIG_PATH\": \"/path/to/config\"\n  }\n}\n</code></pre> <p>Available environment variables:</p> Variable Default Description <code>LOG_LEVEL</code> <code>INFO</code> Logging verbosity: <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code> <code>SOUSCHEF_CONFIG_PATH</code> - Custom configuration file path <code>CHEF_REPO_PATH</code> - Default Chef repository path"},{"location":"getting-started/configuration/#model-provider-configuration","title":"Model Provider Configuration","text":"<p>SousChef works with any MCP-compatible model provider. Configure your MCP client to use your preferred model.</p>"},{"location":"getting-started/configuration/#claude-anthropic","title":"Claude (Anthropic)","text":"<p>Claude Desktop configuration is built-in. Simply add the souschef server configuration to <code>claude_desktop_config.json</code>.</p>"},{"location":"getting-started/configuration/#openai-gpt-4-gpt-35","title":"OpenAI (GPT-4, GPT-3.5)","text":"<p>Use an MCP client that supports OpenAI models:</p> <pre><code>{\n  \"modelProvider\": {\n    \"type\": \"openai\",\n    \"apiKey\": \"${OPENAI_API_KEY}\",\n    \"model\": \"gpt-4\"\n  },\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#local-models-ollama","title":"Local Models (Ollama)","text":"<p>For local model inference:</p> <pre><code>{\n  \"modelProvider\": {\n    \"type\": \"ollama\",\n    \"endpoint\": \"http://localhost:11434\",\n    \"model\": \"llama2\"\n  },\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#red-hat-ai","title":"Red Hat AI","text":"<p>Configure for Red Hat AI models:</p> <pre><code>{\n  \"modelProvider\": {\n    \"type\": \"redhat-ai\",\n    \"endpoint\": \"https://ai.redhat.com/api\",\n    \"apiKey\": \"${REDHAT_AI_API_KEY}\"\n  },\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#platform-specific-configuration","title":"Platform-Specific Configuration","text":""},{"location":"getting-started/configuration/#macos","title":"macOS","text":"<p>Configuration file location: <pre><code>~/Library/Application Support/Claude/claude_desktop_config.json\n</code></pre></p> <p>Example setup: <pre><code># Install SousChef\npip3 install mcp-souschef\n\n# Copy configuration\ncp config/claude-desktop.json ~/Library/Application\\ Support/Claude/claude_desktop_config.json\n\n# Restart Claude Desktop\n</code></pre></p>"},{"location":"getting-started/configuration/#linux","title":"Linux","text":"<p>Configuration file location (varies by desktop environment): <pre><code>~/.config/Claude/claude_desktop_config.json\n</code></pre></p> <p>Example setup: <pre><code># Install SousChef\npip3 install --user mcp-souschef\n\n# Ensure pip bin is in PATH\nexport PATH=\"$PATH:$(python3 -m site --user-base)/bin\"\n\n# Copy configuration\nmkdir -p ~/.config/Claude\ncp config/claude-desktop.json ~/.config/Claude/claude_desktop_config.json\n</code></pre></p>"},{"location":"getting-started/configuration/#windows","title":"Windows","text":"<p>Configuration file location: <pre><code>%APPDATA%\\Claude\\claude_desktop_config.json\n</code></pre></p> <p>Example setup (PowerShell): <pre><code># Install SousChef\npip install mcp-souschef\n\n# Copy configuration\nNew-Item -Path \"$env:APPDATA\\Claude\" -ItemType Directory -Force\nCopy-Item config\\claude-desktop.json \"$env:APPDATA\\Claude\\claude_desktop_config.json\"\n</code></pre></p>"},{"location":"getting-started/configuration/#development-configuration","title":"Development Configuration","text":"<p>For development and testing:</p>"},{"location":"getting-started/configuration/#local-repository-setup","title":"Local Repository Setup","text":"<p>Point to your local development repository:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"poetry\",\n      \"args\": [\"run\", \"souschef\"],\n      \"cwd\": \"/path/to/souschef/repository\",\n      \"env\": {\n        \"LOG_LEVEL\": \"DEBUG\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#testing-configuration","title":"Testing Configuration","text":"<p>For automated testing:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"python3\",\n      \"args\": [\"-m\", \"souschef.server\"],\n      \"env\": {\n        \"LOG_LEVEL\": \"DEBUG\",\n        \"TESTING\": \"true\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"getting-started/configuration/#custom-tool-filtering","title":"Custom Tool Filtering","text":"<p>Limit which tools are available:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"env\": {\n        \"SOUSCHEF_TOOLS_INCLUDE\": \"parse_recipe,generate_playbook_from_recipe\",\n        \"SOUSCHEF_TOOLS_EXCLUDE\": \"assess_chef_migration_complexity\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#performance-tuning","title":"Performance Tuning","text":"<p>Configure for large-scale migrations:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"env\": {\n        \"SOUSCHEF_MAX_FILE_SIZE\": \"10485760\",\n        \"SOUSCHEF_CACHE_ENABLED\": \"true\",\n        \"SOUSCHEF_PARALLEL_PROCESSING\": \"true\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#troubleshooting-configuration","title":"Troubleshooting Configuration","text":""},{"location":"getting-started/configuration/#verify-configuration","title":"Verify Configuration","text":"<p>Check that your configuration is valid:</p> <pre><code># Test MCP server launch\nsouschef --version\n\n# Check if tools are accessible\nsouschef list-tools\n</code></pre>"},{"location":"getting-started/configuration/#common-issues","title":"Common Issues","text":""},{"location":"getting-started/configuration/#command-not-found","title":"Command Not Found","text":"<pre><code># Check if souschef is in PATH\nwhich souschef\n\n# If not, add pip's bin directory to PATH\nexport PATH=\"$PATH:$(python3 -m site --user-base)/bin\"\n</code></pre>"},{"location":"getting-started/configuration/#permission-errors","title":"Permission Errors","text":"<pre><code># Ensure executable permissions\nchmod +x $(which souschef)\n\n# Or install with --user flag\npip3 install --user mcp-souschef\n</code></pre>"},{"location":"getting-started/configuration/#configuration-not-loading","title":"Configuration Not Loading","text":"<ol> <li>Verify configuration file location is correct for your platform</li> <li>Check JSON syntax is valid</li> <li>Ensure the MCP client has read permissions</li> <li>Restart the MCP client completely</li> </ol>"},{"location":"getting-started/configuration/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging to troubleshoot issues:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"env\": {\n        \"LOG_LEVEL\": \"DEBUG\"\n      }\n    }\n  }\n}\n</code></pre> <p>Check logs:</p> macOSLinuxWindows <pre><code>tail -f ~/Library/Logs/Claude/mcp*.log\n</code></pre> <pre><code>tail -f ~/.local/share/Claude/logs/mcp*.log\n</code></pre> <pre><code>Get-Content \"$env:APPDATA\\Claude\\logs\\mcp*.log\" -Wait\n</code></pre>"},{"location":"getting-started/configuration/#configuration-examples","title":"Configuration Examples","text":""},{"location":"getting-started/configuration/#complete-claude-desktop-config","title":"Complete Claude Desktop Config","text":"<pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"args\": [],\n      \"env\": {\n        \"LOG_LEVEL\": \"INFO\",\n        \"CHEF_REPO_PATH\": \"/opt/chef/cookbooks\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#vs-code-with-github-copilot","title":"VS Code with GitHub Copilot","text":"<pre><code>{\n  \"mcp.servers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"args\": [],\n      \"env\": {}\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#multi-server-setup","title":"Multi-Server Setup","text":"<p>Run multiple MCP servers together:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"env\": {\n        \"LOG_LEVEL\": \"INFO\"\n      }\n    },\n    \"other-mcp-server\": {\n      \"command\": \"other-server\",\n      \"env\": {}\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Start using SousChef with your configuration</li> <li>Explore MCP tools available</li> <li>Review CLI usage for automation</li> </ul> <p>For detailed configuration reference and troubleshooting, see <code>config/CONFIGURATION.md</code> in the repository.</p>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide will help you install SousChef and configure it with your preferred MCP client.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before installing SousChef, ensure you have:</p> <ul> <li>Python 3.14+ installed on your system</li> <li>pip or Poetry for package management</li> <li>An MCP-compatible client such as:<ul> <li>Claude Desktop</li> <li>VS Code with MCP extension</li> <li>Custom MCP client</li> </ul> </li> </ul>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#method-1-pypi-installation-recommended","title":"Method 1: PyPI Installation (Recommended)","text":"<p>The simplest way to install SousChef:</p> <pre><code>pip install mcp-souschef\n</code></pre> <p>This installs: - The <code>mcp-souschef</code> package - <code>souschef</code> MCP server command - <code>souschef-cli</code> command-line interface</p>"},{"location":"getting-started/installation/#method-2-development-installation","title":"Method 2: Development Installation","text":"<p>For contributors or those who want the latest development version:</p> <pre><code># Clone the repository\ngit clone https://github.com/kpeacocke/souschef.git\ncd souschef\n\n# Install with Poetry\npoetry install\n\n# Verify installation\npoetry run souschef --version\npoetry run souschef-cli --help\n</code></pre>"},{"location":"getting-started/installation/#mcp-client-configuration","title":"MCP Client Configuration","text":"<p>SousChef provides pre-configured setup files for common MCP clients in the <code>config/</code> directory.</p>"},{"location":"getting-started/installation/#claude-desktop","title":"Claude Desktop","text":"macOSLinuxWindows <pre><code># Copy the configuration file\ncp config/claude-desktop.json ~/Library/Application\\ Support/Claude/claude_desktop_config.json\n\n# Restart Claude Desktop\n</code></pre> <pre><code># Copy the configuration file\ncp config/claude-desktop.json ~/.config/Claude/claude_desktop_config.json\n\n# Restart Claude Desktop\n</code></pre> <pre><code># Copy the configuration file\ncopy config\\claude-desktop.json %APPDATA%\\Claude\\claude_desktop_config.json\n\n# Restart Claude Desktop\n</code></pre>"},{"location":"getting-started/installation/#vs-code-with-github-copilot","title":"VS Code with GitHub Copilot","text":"<ol> <li> <p>Copy the configuration:    <pre><code>cp config/vscode-copilot.json .vscode/mcp_config.json\n</code></pre></p> </li> <li> <p>Install the MCP extension from the VS Code marketplace</p> </li> <li> <p>Reload VS Code</p> </li> </ol>"},{"location":"getting-started/installation/#custom-mcp-configuration","title":"Custom MCP Configuration","text":"<p>For other MCP clients or custom setups, use this template:</p> <pre><code>{\n  \"mcpServers\": {\n    \"souschef\": {\n      \"command\": \"souschef\",\n      \"args\": [],\n      \"env\": {}\n    }\n  }\n}\n</code></pre> <p>Development Configuration</p> <p>For development or testing, use <code>config/claude-desktop-dev.json</code> which points to the local repository instead of the installed package.</p>"},{"location":"getting-started/installation/#verifying-installation","title":"Verifying Installation","text":"<p>After installation, verify that SousChef is working correctly:</p>"},{"location":"getting-started/installation/#1-check-mcp-server","title":"1. Check MCP Server","text":"<pre><code># Test the MCP server\nsouschef --version\n</code></pre>"},{"location":"getting-started/installation/#2-check-cli","title":"2. Check CLI","text":"<pre><code># Test the command-line interface\nsouschef-cli --help\n</code></pre>"},{"location":"getting-started/installation/#3-test-with-mcp-client","title":"3. Test with MCP Client","text":"<p>Restart your MCP client and ask: <pre><code>What Chef migration tools are available?\n</code></pre></p> <p>The AI should respond with a list of SousChef's 38 MCP tools.</p>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#command-not-found","title":"Command Not Found","text":"<p>If you get \"command not found\" errors:</p> <pre><code># Ensure pip's bin directory is in your PATH\nexport PATH=\"$PATH:$(python3 -m site --user-base)/bin\"\n\n# Or use Poetry's virtual environment\npoetry shell\n</code></pre>"},{"location":"getting-started/installation/#mcp-client-not-detecting-souschef","title":"MCP Client Not Detecting SousChef","text":"<ol> <li>Check that the configuration file is in the correct location</li> <li>Verify the <code>souschef</code> command is accessible from your terminal</li> <li>Restart your MCP client completely</li> <li>Check the client's logs for error messages</li> </ol>"},{"location":"getting-started/installation/#python-version-issues","title":"Python Version Issues","text":"<p>SousChef requires Python 3.14+. Check your version:</p> <pre><code>python3 --version\n</code></pre> <p>If you need to install or upgrade Python, visit python.org/downloads.</p>"},{"location":"getting-started/installation/#platform-specific-notes","title":"Platform-Specific Notes","text":""},{"location":"getting-started/installation/#macos","title":"macOS","text":"<ul> <li>Python 3.14+ can be installed via Homebrew: <code>brew install python@3.14</code></li> <li>Claude Desktop config location: <code>~/Library/Application Support/Claude/</code></li> </ul>"},{"location":"getting-started/installation/#linux","title":"Linux","text":"<ul> <li>Python 3.14+ may need to be compiled from source or installed via third-party repositories</li> <li>Config locations vary by distribution and desktop environment</li> </ul>"},{"location":"getting-started/installation/#windows","title":"Windows","text":"<ul> <li>Use PowerShell or Windows Terminal for installation</li> <li>Path separators use backslashes (<code>\\</code>) instead of forward slashes (<code>/</code>)</li> <li>Config location: <code>%APPDATA%\\Claude\\</code></li> </ul>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Now that SousChef is installed, you're ready to:</p> <ul> <li>Configure SousChef for your environment</li> <li>Follow the Quick Start guide to begin migrating</li> <li>Explore the MCP tools available</li> </ul> <p>For detailed configuration options and model provider setup, see the Configuration Reference.</p>"},{"location":"getting-started/quick-start/","title":"Quick Start Guide","text":"<p>Get up and running with SousChef in minutes. This guide walks you through your first Chef-to-Ansible migration.</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, make sure you have:</p> <ul> <li> SousChef installed (Installation guide)</li> <li> MCP client configured (Claude Desktop, VS Code, etc.)</li> <li> A Chef cookbook to migrate</li> </ul>"},{"location":"getting-started/quick-start/#your-first-migration","title":"Your First Migration","text":""},{"location":"getting-started/quick-start/#step-1-analyze-a-cookbook","title":"Step 1: Analyze a Cookbook","text":"<p>Start by analyzing a Chef cookbook to understand its structure:</p> Using MCP (AI Assistant)Using CLI <p>Ask your AI assistant: <pre><code>Can you analyze the cookbook at /path/to/cookbook?\n</code></pre></p> <pre><code>souschef-cli cookbook /path/to/cookbook\n</code></pre> <p>The analysis will show: - Cookbook structure and files - Recipe resources and actions - Attributes and their precedence - Template variables - Dependencies</p>"},{"location":"getting-started/quick-start/#step-2-convert-a-recipe-to-a-playbook","title":"Step 2: Convert a Recipe to a Playbook","text":"<p>Convert your first Chef recipe to an Ansible playbook:</p> Using MCP (AI Assistant)Using CLI <pre><code>Convert the recipe /path/to/cookbook/recipes/default.rb to an Ansible playbook\n</code></pre> <pre><code>souschef-cli recipe /path/to/cookbook/recipes/default.rb &gt; playbook.yml\n</code></pre> <p>Example conversion:</p> <p>Chef Recipe (<code>recipes/webserver.rb</code>): <pre><code>package 'nginx' do\n  action :install\nend\n\nservice 'nginx' do\n  action [:enable, :start]\nend\n\ntemplate '/etc/nginx/nginx.conf' do\n  source 'nginx.conf.erb'\n  variables({\n    worker_processes: node['nginx']['workers']\n  })\n  notifies :reload, 'service[nginx]'\nend\n</code></pre></p> <p>Generated Ansible Playbook: <pre><code>---\n- name: Webserver cookbook playbook\n  hosts: all\n  become: yes\n\n  tasks:\n    - name: Install nginx\n      ansible.builtin.package:\n        name: nginx\n        state: present\n\n    - name: Enable and start nginx\n      ansible.builtin.service:\n        name: nginx\n        enabled: yes\n        state: started\n\n    - name: Configure nginx\n      ansible.builtin.template:\n        src: nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n      vars:\n        worker_processes: \"{{ nginx_workers }}\"\n      notify: Reload nginx\n\n  handlers:\n    - name: Reload nginx\n      ansible.builtin.service:\n        name: nginx\n        state: reloaded\n</code></pre></p>"},{"location":"getting-started/quick-start/#step-3-validate-the-conversion","title":"Step 3: Validate the Conversion","text":"<p>Validate that the conversion is correct and follows best practices:</p> Using MCP (AI Assistant)Using CLI <pre><code>Validate the playbook conversion for accuracy and best practices\n</code></pre> <pre><code>souschef-cli validate playbook.yml\n</code></pre> <p>The validation checks: - \u2705 Syntax correctness - \u2705 Semantic equivalence - \u2705 Best practices compliance - \u2705 Security considerations - \u2705 Performance optimizations</p>"},{"location":"getting-started/quick-start/#step-4-test-the-playbook","title":"Step 4: Test the Playbook","text":"<p>Before deploying, test your converted playbook:</p> <pre><code># Syntax check\nansible-playbook playbook.yml --syntax-check\n\n# Dry run\nansible-playbook playbook.yml --check\n\n# Run on test environment\nansible-playbook playbook.yml -i test_inventory\n</code></pre>"},{"location":"getting-started/quick-start/#common-migration-patterns","title":"Common Migration Patterns","text":""},{"location":"getting-started/quick-start/#converting-data-bags-to-variables","title":"Converting Data Bags to Variables","text":"<p>Convert Chef data bags to Ansible variables:</p> <pre><code>Convert the data bag /path/to/data_bags/users.json to Ansible variables\n</code></pre>"},{"location":"getting-started/quick-start/#generating-awx-job-templates","title":"Generating AWX Job Templates","text":"<p>Create AWX/AAP job templates from cookbooks:</p> <pre><code>Generate an AWX job template from the cookbook at /path/to/cookbook\n</code></pre>"},{"location":"getting-started/quick-start/#converting-inspec-tests","title":"Converting InSpec Tests","text":"<p>Convert InSpec tests to Ansible validation:</p> <pre><code>Convert the InSpec profile /path/to/inspec to Ansible tests\n</code></pre>"},{"location":"getting-started/quick-start/#example-workflows","title":"Example Workflows","text":""},{"location":"getting-started/quick-start/#complete-cookbook-migration","title":"Complete Cookbook Migration","text":"<ol> <li> <p>Assess complexity:    <pre><code>Assess the migration complexity for /path/to/cookbook\n</code></pre></p> </li> <li> <p>Generate migration plan:    <pre><code>Generate a migration plan for this cookbook\n</code></pre></p> </li> <li> <p>Convert recipes:    <pre><code>Convert all recipes in this cookbook to playbooks\n</code></pre></p> </li> <li> <p>Convert data bags:    <pre><code>Convert data bags to Ansible Vault\n</code></pre></p> </li> <li> <p>Create AWX integration:    <pre><code>Generate AWX job templates for this cookbook\n</code></pre></p> </li> </ol>"},{"location":"getting-started/quick-start/#habitat-to-container-migration","title":"Habitat to Container Migration","text":"<ol> <li> <p>Parse Habitat plan:    <pre><code>Parse the Habitat plan at /habitat/plan.sh\n</code></pre></p> </li> <li> <p>Convert to Dockerfile:    <pre><code>Convert this Habitat plan to a Dockerfile using ubuntu:22.04\n</code></pre></p> </li> <li> <p>Generate Compose:    <pre><code>Generate docker-compose.yml for these Habitat plans\n</code></pre></p> </li> </ol>"},{"location":"getting-started/quick-start/#tips-for-success","title":"Tips for Success","text":"<p>Start Small</p> <p>Begin with a simple cookbook that has few dependencies. This helps you understand the conversion process before tackling complex cookbooks.</p> <p>Review Conversions</p> <p>Always review generated playbooks for:</p> <ul> <li>Correct module selection</li> <li>Proper variable substitution</li> <li>Guard condition conversion</li> <li>Notification handling</li> </ul> <p>Use Validation</p> <p>Run the validation tool on every conversion to catch potential issues early.</p> <p>Test Incrementally</p> <p>Test converted playbooks in a development environment before production deployment.</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<p>Now that you've completed your first migration, explore:</p> <ul> <li>MCP Tools Reference - All 38 available tools</li> <li>CLI Usage Guide - Advanced CLI features</li> <li>Migration Guide - Complete migration methodology</li> <li>Examples - Real-world migration examples</li> </ul>"},{"location":"getting-started/quick-start/#getting-help","title":"Getting Help","text":"<p>If you encounter issues:</p> <ol> <li>Check the Troubleshooting section</li> <li>Review the API Reference</li> <li>Ask your AI assistant for help</li> <li>Open an issue on GitHub</li> </ol>"},{"location":"getting-started/quick-start/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/quick-start/#conversion-doesnt-match-expected-output","title":"Conversion Doesn't Match Expected Output","text":"<ul> <li>Review the Chef recipe for complex guards or custom resources</li> <li>Check attribute precedence in the source cookbook</li> <li>Validate that template variables are correctly extracted</li> </ul>"},{"location":"getting-started/quick-start/#playbook-fails-ansible-lint","title":"Playbook Fails Ansible Lint","text":"<ul> <li>Run the validation tool to identify issues</li> <li>Review Ansible best practices in the User Guide</li> <li>Check for deprecated module usage</li> </ul>"},{"location":"getting-started/quick-start/#performance-issues-with-large-cookbooks","title":"Performance Issues with Large Cookbooks","text":"<ul> <li>Use the profiling tools to identify bottlenecks:   <pre><code>souschef-cli profile /path/to/large_cookbook\n</code></pre></li> <li>Consider breaking large recipes into smaller, focused playbooks</li> <li>Review the Performance Optimization guide</li> </ul>"},{"location":"migration-guide/assessment/","title":"Migration Assessment","text":"<p>Comprehensive guidance on assessing Chef cookbook complexity, analyzing dependencies, and creating data-driven migration plans.</p>"},{"location":"migration-guide/assessment/#assessment-overview","title":"Assessment Overview","text":"<p>Assessment is the foundation of successful migration. SousChef provides automated tools to evaluate complexity, identify risks, and generate actionable migration plans.</p> <p>Measure Twice, Migrate Once</p> <p>Thorough assessment prevents surprises, reduces rework, and ensures realistic timelines. Invest time upfront to save effort later.</p>"},{"location":"migration-guide/assessment/#assessment-process","title":"Assessment Process","text":"<pre><code>graph TD\n    A[Inventory Cookbooks] --&gt; B[Analyze Structure]\n    B --&gt; C[Assess Complexity]\n    C --&gt; D[Map Dependencies]\n    D --&gt; E[Identify Risks]\n    E --&gt; F[Generate Plan]\n    F --&gt; G[Review &amp; Approve]\n\n    style A fill:#e3f2fd\n    style C fill:#fff3e0\n    style D fill:#f3e5f5\n    style F fill:#e8f5e9</code></pre>"},{"location":"migration-guide/assessment/#step-1-inventory-cookbooks","title":"Step 1: Inventory Cookbooks","text":""},{"location":"migration-guide/assessment/#catalog-all-cookbooks","title":"Catalog All Cookbooks","text":"<p>First, identify all cookbooks in your Chef infrastructure.</p> <p>Using SousChef CLI:</p> <pre><code># List all cookbooks in directory\nfind /path/to/cookbooks -name \"metadata.rb\" -exec dirname {} \\;\n\n# For each cookbook, extract basic info\nfor cookbook in cookbooks/*; do\n  echo \"=== $(basename $cookbook) ===\"\n  souschef-cli metadata \"$cookbook/metadata.rb\"\n  echo \"\"\ndone &gt; cookbook_inventory.txt\n</code></pre> <p>Using MCP (AI Assistant):</p> <pre><code>List all cookbooks in /path/to/cookbooks and show me their\nmetadata including versions, dependencies, and supported platforms\n</code></pre>"},{"location":"migration-guide/assessment/#inventory-checklist","title":"Inventory Checklist","text":"<p>Create a spreadsheet or document with:</p> <ul> <li> Cookbook name and version</li> <li> Maintainer/owner</li> <li> Dependencies (direct and transitive)</li> <li> Number of recipes</li> <li> Number of custom resources</li> <li> Number of templates</li> <li> Supported platforms</li> <li> Data bag usage</li> <li> Chef search usage</li> <li> InSpec profiles (if any)</li> <li> Habitat plans (if any)</li> </ul>"},{"location":"migration-guide/assessment/#step-2-analyze-cookbook-structure","title":"Step 2: Analyze Cookbook Structure","text":""},{"location":"migration-guide/assessment/#automated-structure-analysis","title":"Automated Structure Analysis","text":"<p>Use SousChef to analyze each cookbook's structure:</p> MCP (AI Assistant)CLI <pre><code>Analyze the structure of cookbook at /path/to/cookbook\nand show me the file counts and organization\n</code></pre> <pre><code>souschef-cli structure /path/to/cookbook\n\n# Or for all cookbooks\nfor cookbook in cookbooks/*; do\n  echo \"=== $(basename $cookbook) ===\"\n  souschef-cli structure \"$cookbook\"\ndone &gt; cookbook_structures.txt\n</code></pre> <p>Example Output:</p> <pre><code>database/\n\u251c\u2500\u2500 metadata.rb\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 attributes/\n\u2502   \u251c\u2500\u2500 default.rb\n\u2502   \u2514\u2500\u2500 production.rb\n\u251c\u2500\u2500 recipes/\n\u2502   \u251c\u2500\u2500 default.rb\n\u2502   \u251c\u2500\u2500 install.rb\n\u2502   \u251c\u2500\u2500 configure.rb\n\u2502   \u2514\u2500\u2500 backup.rb\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 default/\n\u2502       \u251c\u2500\u2500 postgresql.conf.erb\n\u2502       \u2514\u2500\u2500 pg_hba.conf.erb\n\u251c\u2500\u2500 resources/\n\u2502   \u251c\u2500\u2500 database.rb\n\u2502   \u2514\u2500\u2500 user.rb\n\u251c\u2500\u2500 libraries/\n\u2502   \u2514\u2500\u2500 helpers.rb\n\u2514\u2500\u2500 test/\n    \u2514\u2500\u2500 integration/\n        \u2514\u2500\u2500 default/\n            \u2514\u2500\u2500 default_test.rb\n\nSummary:\n  Recipes: 4\n  Attributes: 2\n  Templates: 2\n  Custom Resources: 2\n  Libraries: 1\n  Tests: 1\n</code></pre>"},{"location":"migration-guide/assessment/#structure-complexity-indicators","title":"Structure Complexity Indicators","text":"Indicator Low Medium High Recipes 1-3 4-10 11+ Custom Resources 0-1 2-4 5+ Templates 0-3 4-8 9+ Attributes Files 1 2-3 4+ Libraries 0 1-2 3+ Lines of Code &lt;300 300-1000 1000+"},{"location":"migration-guide/assessment/#step-3-assess-complexity","title":"Step 3: Assess Complexity","text":""},{"location":"migration-guide/assessment/#automated-complexity-assessment","title":"Automated Complexity Assessment","text":"<p>SousChef's complexity assessment tool analyzes multiple dimensions:</p> MCP (AI Assistant)CLI <pre><code>Assess the migration complexity for cookbook at /path/to/cookbook\nincluding dependency analysis\n</code></pre> <pre><code># Single cookbook\nsouschef-cli assess /path/to/cookbook --include-dependencies\n\n# All cookbooks\nsouschef-cli assess /path/to/cookbooks --recursive --output assessment_report.json\n</code></pre> <p>Assessment Output:</p> <pre><code>{\n  \"cookbook\": \"database\",\n  \"version\": \"2.1.0\",\n  \"complexity_score\": 6.5,\n  \"complexity_level\": \"Medium\",\n  \"estimated_effort_hours\": 40,\n  \"risk_level\": \"Medium\",\n\n  \"metrics\": {\n    \"recipes\": {\n      \"count\": 4,\n      \"total_resources\": 23,\n      \"avg_resources_per_recipe\": 5.75,\n      \"complexity\": \"Medium\"\n    },\n    \"custom_resources\": {\n      \"count\": 2,\n      \"total_properties\": 8,\n      \"total_actions\": 5,\n      \"complexity\": \"Low\"\n    },\n    \"templates\": {\n      \"count\": 2,\n      \"total_variables\": 12,\n      \"erb_complexity\": \"Low\"\n    },\n    \"attributes\": {\n      \"count\": 15,\n      \"precedence_levels_used\": 2,\n      \"complexity\": \"Low\"\n    },\n    \"dependencies\": {\n      \"direct\": 3,\n      \"transitive\": 7,\n      \"complexity\": \"Medium\"\n    },\n    \"data_bags\": {\n      \"referenced\": 1,\n      \"complexity\": \"Low\"\n    },\n    \"search_queries\": {\n      \"count\": 0,\n      \"complexity\": \"None\"\n    }\n  },\n\n  \"risk_factors\": [\n    {\n      \"type\": \"dependency_chain\",\n      \"severity\": \"Medium\",\n      \"description\": \"7 transitive dependencies require migration first\",\n      \"mitigation\": \"Migrate dependency cookbooks in order\"\n    },\n    {\n      \"type\": \"custom_resource_complexity\",\n      \"severity\": \"Low\",\n      \"description\": \"Custom resources have moderate property count\",\n      \"mitigation\": \"Convert to Ansible roles with similar interface\"\n    }\n  ],\n\n  \"recommendations\": [\n    \"Start with install.rb (simplest recipe, 3 resources)\",\n    \"Migrate custom resources to roles early in process\",\n    \"Test template conversions in isolation before integration\",\n    \"Plan 5-7 days for complete migration including testing\"\n  ]\n}\n</code></pre>"},{"location":"migration-guide/assessment/#complexity-scoring","title":"Complexity Scoring","text":"<p>Score Range: 1-10</p> <ul> <li>1-3 (Low): Simple cookbook, direct conversion possible</li> <li>4-6 (Medium): Standard complexity, requires planning</li> <li>7-9 (High): Complex patterns, custom solutions needed</li> <li>10 (Very High): Enterprise cookbook, significant effort</li> </ul> <p>Scoring Factors:</p> Factor Weight Points Recipe count 15% 1 point per 3 recipes Custom resources 20% 1 point per resource Dependencies 20% 0.5 points per dependency Data bag usage 10% 1 point per bag Search queries 15% 1 point per query Template complexity 10% 0.5 points per template Guard complexity 10% 1 point for complex guards"},{"location":"migration-guide/assessment/#step-4-dependency-analysis","title":"Step 4: Dependency Analysis","text":""},{"location":"migration-guide/assessment/#generating-dependency-graphs","title":"Generating Dependency Graphs","text":"<p>Understand cookbook relationships before migration:</p> MCP (AI Assistant)CLI <pre><code>Analyze dependencies for cookbook at /path/to/cookbook\nand generate a dependency graph\n</code></pre> <pre><code>souschef-cli analyze-dependencies /path/to/cookbook --graph\n</code></pre> <p>Dependency Graph (Mermaid):</p> <pre><code>graph TD\n    A[database] --&gt; B[postgresql]\n    A --&gt; C[apt]\n    A --&gt; D[yum]\n    B --&gt; E[build-essential]\n    C --&gt; F[compat_resource]\n\n    style A fill:#ffeb3b\n    style B fill:#4caf50\n    style C fill:#4caf50\n    style D fill:#4caf50\n    style E fill:#9e9e9e\n    style F fill:#9e9e9e</code></pre>"},{"location":"migration-guide/assessment/#dependency-matrix","title":"Dependency Matrix","text":"<p>Create a migration order matrix:</p> Level Cookbooks Dependencies Can Migrate? 0 compat_resource, build-essential None \u2705 Yes (leaf nodes) 1 apt, yum, postgresql Level 0 \u2705 After Level 0 2 database Level 1 \u2705 After Level 1"},{"location":"migration-guide/assessment/#circular-dependencies","title":"Circular Dependencies","text":"<p>Detection:</p> <pre><code>souschef-cli analyze-dependencies /path/to/cookbooks --check-circular\n</code></pre> <p>Example Output:</p> <pre><code>\u26a0\ufe0f  Circular dependency detected:\n  cookbook-a \u2192 cookbook-b \u2192 cookbook-c \u2192 cookbook-a\n\nResolution Strategy:\n  1. Review actual usage - may be metadata-only\n  2. Extract shared code to new common cookbook\n  3. Refactor to remove circular reference\n</code></pre> <p>Resolution Options:</p> <ol> <li>Break the cycle: Refactor to remove circular dependency</li> <li>Merge cookbooks: Combine into single cookbook</li> <li>Extract common code: Create new shared cookbook</li> <li>Metadata-only: If not runtime dependency, update metadata.rb</li> </ol>"},{"location":"migration-guide/assessment/#step-5-identify-risk-factors","title":"Step 5: Identify Risk Factors","text":""},{"location":"migration-guide/assessment/#risk-assessment-matrix","title":"Risk Assessment Matrix","text":"Risk Type Indicators Impact Mitigation Technical Complexity &gt;5 custom resources, complex guards High Allocate expert resources Dependency Chain &gt;5 dependencies Medium Migrate in order Data Bag Usage Multiple encrypted bags Medium Plan vault migration Search Patterns Complex search queries Medium Design dynamic inventory Platform-Specific OS-specific logic Low Use Ansible facts Legacy Patterns Chef 11/12 syntax Low Modernize during migration Testing Gap No InSpec/tests High Generate tests"},{"location":"migration-guide/assessment/#risk-scoring","title":"Risk Scoring","text":"<p>Each cookbook receives a risk score (1-10):</p> <pre><code>risk_score = (\n    technical_complexity * 0.35 +\n    dependency_complexity * 0.25 +\n    data_integration * 0.20 +\n    testing_coverage * 0.20\n)\n</code></pre> <p>Risk Categories:</p> <ul> <li>1-3 (Low Risk): Standard conversion, minimal blockers</li> <li>4-6 (Medium Risk): Requires planning, some custom work</li> <li>7-8 (High Risk): Significant effort, expert needed</li> <li>9-10 (Very High Risk): Major undertaking, consider alternatives</li> </ul>"},{"location":"migration-guide/assessment/#step-6-generate-migration-plan","title":"Step 6: Generate Migration Plan","text":""},{"location":"migration-guide/assessment/#automated-plan-generation","title":"Automated Plan Generation","text":"MCP (AI Assistant)CLI <pre><code>Generate a migration plan for cookbooks:\n- /path/to/cookbook1\n- /path/to/cookbook2\n- /path/to/cookbook3\n\nInclude timeline and resource allocation\n</code></pre> <pre><code>souschef-cli generate-migration-plan \\\n  --cookbooks /path/to/cookbook1,/path/to/cookbook2,/path/to/cookbook3 \\\n  --include-timeline \\\n  --include-resources \\\n  --output migration_plan.md\n</code></pre> <p>Generated Plan Structure:</p> <pre><code># Migration Plan: Database Infrastructure\n\n## Executive Summary\n- **Cookbooks to Migrate**: 3\n- **Total Complexity Score**: 18.5 (Medium)\n- **Estimated Duration**: 3-4 weeks\n- **Risk Level**: Medium\n- **Team Size Required**: 2-3 engineers\n\n## Phase Breakdown\n\n### Phase 1: Dependencies (Week 1)\n**Cookbooks**: postgresql, apt\n**Effort**: 40 hours\n**Resources**: 2 engineers\n\nTasks:\n- [ ] Migrate postgresql cookbook (20h)\n- [ ] Migrate apt cookbook (12h)\n- [ ] Test in dev environment (8h)\n\n### Phase 2: Core Application (Week 2-3)\n**Cookbooks**: database\n**Effort**: 60 hours\n**Resources**: 2 engineers + 1 tester\n\nTasks:\n- [ ] Convert recipes to playbooks (24h)\n- [ ] Migrate custom resources to roles (16h)\n- [ ] Convert data bags to vault (8h)\n- [ ] Testing and validation (12h)\n\n### Phase 3: Deployment (Week 4)\n**Effort**: 20 hours\n**Resources**: Full team\n\nTasks:\n- [ ] Deploy to staging (4h)\n- [ ] Parallel Chef/Ansible runs (4h)\n- [ ] Production deployment (8h)\n- [ ] Documentation and knowledge transfer (4h)\n\n## Migration Order\n\n```mermaid\ngraph LR\n    A[postgresql] --&gt; C[database]\n    B[apt] --&gt; C\n    C --&gt; D[Production Deploy]\n</code></pre>"},{"location":"migration-guide/assessment/#resource-allocation","title":"Resource Allocation","text":"Week Engineer 1 Engineer 2 Tester 1 postgresql apt Review 2 database recipes custom resources - 3 templates data bags Testing 4 Staging deploy Prod deploy Validation"},{"location":"migration-guide/assessment/#risk-mitigation","title":"Risk Mitigation","text":"<ol> <li>Dependency Complexity</li> <li>Risk: 7 transitive dependencies</li> <li>Mitigation: Migrate in order, test each level</li> <li> <p>Owner: Lead Engineer</p> </li> <li> <p>Custom Resource Complexity</p> </li> <li>Risk: Complex property validation</li> <li>Mitigation: Build Ansible modules if needed</li> <li> <p>Owner: Engineer 1</p> </li> <li> <p>Testing Gap</p> </li> <li>Risk: Limited existing tests</li> <li>Mitigation: Generate InSpec from recipes</li> <li>Owner: Tester <pre><code>---\n\n## Assessment Report Template\n\n### Executive Summary Report\n\nUse this template for stakeholder communication:\n\n```markdown\n# Chef to Ansible Migration Assessment\n**Date**: YYYY-MM-DD\n**Prepared by**: [Your Name]\n\n## Overview\nAssessment of [N] Chef cookbooks for migration to Ansible.\n\n## Key Findings\n- **Total Cookbooks**: [N]\n- **Complexity Distribution**:\n  - Low: [N] cookbooks\n  - Medium: [N] cookbooks\n  - High: [N] cookbooks\n- **Estimated Duration**: [X] weeks\n- **Estimated Effort**: [Y] hours\n- **Team Size**: [Z] engineers\n\n## Complexity Breakdown\n\n| Cookbook | Version | Complexity | Effort (hrs) | Risk |\n|----------|---------|------------|--------------|------|\n| app | 2.1.0 | Medium | 40 | Medium |\n| database | 1.5.0 | High | 60 | High |\n| web | 3.0.0 | Low | 20 | Low |\n\n## Risk Summary\n\n### High Risks\n1. **[Risk Name]**: [Description] \u2192 [Mitigation]\n2. **[Risk Name]**: [Description] \u2192 [Mitigation]\n\n### Medium Risks\n1. **[Risk Name]**: [Description] \u2192 [Mitigation]\n\n## Recommendations\n\n1. **Migration Order**: [Recommended sequence]\n2. **Resource Allocation**: [Team structure]\n3. **Timeline**: [Proposed schedule]\n4. **Success Criteria**: [Metrics to track]\n\n## Next Steps\n1. [ ] Review and approve plan\n2. [ ] Allocate resources\n3. [ ] Set up dev/staging environments\n4. [ ] Begin Phase 1 migration\n</code></pre></li> </ol>"},{"location":"migration-guide/assessment/#assessment-metrics","title":"Assessment Metrics","text":""},{"location":"migration-guide/assessment/#track-these-metrics","title":"Track These Metrics","text":"<p>During Assessment: - Time to assess each cookbook - Complexity score distribution - Dependency depth - Risk factor identification rate</p> <p>For Reporting: - Total cookbooks assessed - Average complexity score - Total estimated effort - Resource requirements - Timeline projections</p>"},{"location":"migration-guide/assessment/#assessment-tools-comparison","title":"Assessment Tools Comparison","text":"Tool Use Case Output Best For <code>assess_chef_migration_complexity</code> Single cookbook Detailed JSON Deep analysis <code>analyze_cookbook_dependencies</code> Dependency mapping Graph + order Planning sequence <code>generate_migration_plan</code> Full project Markdown plan Stakeholder docs <code>generate_migration_report</code> Executive summary PDF/HTML Management"},{"location":"migration-guide/assessment/#common-assessment-challenges","title":"Common Assessment Challenges","text":""},{"location":"migration-guide/assessment/#challenge-1-incomplete-inventory","title":"Challenge 1: Incomplete Inventory","text":"<p>Problem: Not all cookbooks cataloged</p> <p>Solution: <pre><code># Find all cookbooks recursively\nfind /chef-repo -name \"metadata.rb\" -type f | \\\n  while read metadata; do\n    cookbook_dir=$(dirname \"$metadata\")\n    echo \"Found: $cookbook_dir\"\n    souschef-cli metadata \"$metadata\" | tee -a inventory.txt\n  done\n</code></pre></p>"},{"location":"migration-guide/assessment/#challenge-2-unknown-dependencies","title":"Challenge 2: Unknown Dependencies","text":"<p>Problem: Undocumented dependencies (include_recipe without metadata)</p> <p>Solution: <pre><code># Search for include_recipe calls\ngrep -r \"include_recipe\" /path/to/cookbooks --include=\"*.rb\" | \\\n  awk '{print $2}' | sort -u &gt; runtime_dependencies.txt\n</code></pre></p>"},{"location":"migration-guide/assessment/#challenge-3-estimating-custom-resource-effort","title":"Challenge 3: Estimating Custom Resource Effort","text":"<p>Problem: Difficult to estimate custom resource conversion time</p> <p>Solution: 1. Parse each custom resource 2. Count properties and actions 3. Use formula: <code>base_hours + (properties * 0.5) + (actions * 1)</code> 4. Add 50% buffer for complex validation logic</p>"},{"location":"migration-guide/assessment/#best-practices","title":"Best Practices","text":""},{"location":"migration-guide/assessment/#dos","title":"Do's \u2705","text":"<ol> <li>Assess All Cookbooks: Don't skip \"simple\" ones</li> <li>Include Dependencies: Assess entire dependency chain</li> <li>Document Assumptions: Record why estimates were made</li> <li>Review with Team: Get input from operations team</li> <li>Update Regularly: Re-assess if cookbooks change</li> <li>Consider Alternatives: Some cookbooks may not need migration</li> <li>Plan for Unknowns: Add 20-30% buffer to estimates</li> </ol>"},{"location":"migration-guide/assessment/#donts","title":"Don'ts \u274c","text":"<ol> <li>Don't Rush Assessment: Thorough assessment prevents problems</li> <li>Don't Ignore Dependencies: Will cause migration failures</li> <li>Don't Assume Linearity: Complexity doesn't scale linearly</li> <li>Don't Forget Testing: Include test development in estimates</li> <li>Don't Overlook Documentation: Plan time for documentation</li> <li>Don't Ignore Stakeholders: Include them early</li> <li>Don't Skip Risk Analysis: Identify blockers upfront</li> </ol>"},{"location":"migration-guide/assessment/#assessment-checklist","title":"Assessment Checklist","text":"<p>Use this checklist to ensure complete assessment:</p>"},{"location":"migration-guide/assessment/#pre-assessment","title":"Pre-Assessment","text":"<ul> <li> Identify all Chef cookbooks in scope</li> <li> Access to Chef server and repositories</li> <li> Access to data bags and environments</li> <li> Identify InSpec profiles</li> <li> Document current deployment process</li> </ul>"},{"location":"migration-guide/assessment/#assessment-phase","title":"Assessment Phase","text":"<ul> <li> Run structure analysis for each cookbook</li> <li> Assess complexity for each cookbook</li> <li> Analyze dependency chains</li> <li> Identify circular dependencies</li> <li> Document data bag usage</li> <li> Document Chef search patterns</li> <li> Review custom resources</li> <li> Check for Habitat plans</li> </ul>"},{"location":"migration-guide/assessment/#risk-analysis","title":"Risk Analysis","text":"<ul> <li> Identify technical risks</li> <li> Identify organizational risks</li> <li> Document mitigation strategies</li> <li> Assign risk owners</li> <li> Create contingency plans</li> </ul>"},{"location":"migration-guide/assessment/#planning","title":"Planning","text":"<ul> <li> Generate migration order</li> <li> Create timeline with milestones</li> <li> Allocate resources</li> <li> Define success criteria</li> <li> Document rollback procedures</li> </ul>"},{"location":"migration-guide/assessment/#reporting","title":"Reporting","text":"<ul> <li> Create executive summary</li> <li> Create technical report</li> <li> Present to stakeholders</li> <li> Obtain approval to proceed</li> <li> Document lessons learned template</li> </ul>"},{"location":"migration-guide/assessment/#next-steps","title":"Next Steps","text":"<p>After completing assessment:</p> <ol> <li>Review Overview - Understand full migration methodology</li> <li>Start Conversion - Begin converting cookbooks</li> <li>Plan Deployment - Prepare deployment strategy</li> </ol> <p>Or explore related topics:</p> <ul> <li>MCP Tools Reference - Assessment tool details</li> <li>CLI Usage - Command-line assessment</li> <li>Examples - Assessment examples</li> </ul>"},{"location":"migration-guide/assessment/#additional-resources","title":"Additional Resources","text":"<ul> <li>Complexity Analysis: Deep dive into scoring algorithms</li> <li>Dependency Management: Advanced dependency resolution</li> <li>Risk Assessment: Comprehensive risk frameworks</li> <li>Reporting Templates: Download editable templates</li> </ul> <p>Ready to Assess?</p> <p>Use SousChef's automated assessment tools to generate data-driven migration plans. Start with <code>assess_chef_migration_complexity</code> and build from there.</p>"},{"location":"migration-guide/conversion/","title":"Conversion Techniques","text":"<p>Detailed guidance on converting Chef cookbooks to Ansible playbooks, including recipes, resources, templates, and complex patterns.</p>"},{"location":"migration-guide/conversion/#conversion-overview","title":"Conversion Overview","text":"<p>Conversion is where Chef infrastructure code transforms into Ansible playbooks. SousChef automates the heavy lifting while preserving logic and intent.</p> <p>Iterative Conversion</p> <p>Convert incrementally: one recipe at a time, validate each conversion, then move to the next. This approach catches issues early and builds confidence.</p>"},{"location":"migration-guide/conversion/#conversion-strategy","title":"Conversion Strategy","text":"<pre><code>graph TD\n    A[Parse Chef Code] --&gt; B[Map Resources]\n    B --&gt; C[Convert to Tasks]\n    C --&gt; D[Transform Templates]\n    D --&gt; E[Migrate Variables]\n    E --&gt; F[Generate Handlers]\n    F --&gt; G[Validate Output]\n    G --&gt; H{Tests Pass?}\n    H --&gt;|Yes| I[Commit &amp; Next]\n    H --&gt;|No| J[Fix Issues]\n    J --&gt; G\n\n    style A fill:#e3f2fd\n    style C fill:#fff3e0\n    style G fill:#e8f5e9\n    style H fill:#f3e5f5</code></pre>"},{"location":"migration-guide/conversion/#recipe-to-playbook-conversion","title":"Recipe to Playbook Conversion","text":""},{"location":"migration-guide/conversion/#basic-recipe-conversion","title":"Basic Recipe Conversion","text":"<p>Chef Recipe: <pre><code># recipes/webserver.rb\npackage 'nginx' do\n  action :install\nend\n\nservice 'nginx' do\n  action [:enable, :start]\nend\n\ntemplate '/etc/nginx/nginx.conf' do\n  source 'nginx.conf.erb'\n  owner 'root'\n  group 'root'\n  mode '0644'\n  notifies :reload, 'service[nginx]', :delayed\nend\n</code></pre></p> <p>Conversion Command:</p> MCP (AI Assistant)CLI <pre><code>Generate an Ansible playbook from recipes/webserver.rb\n</code></pre> <pre><code>souschef-cli recipe recipes/webserver.rb &gt; analysis.txt\n# Review analysis, then convert\nsouschef-cli convert-recipe recipes/webserver.rb &gt; playbooks/webserver.yml\n</code></pre> <p>Generated Ansible Playbook:</p> <pre><code>---\n- name: Configure web server\n  hosts: webservers\n  become: true\n\n  tasks:\n    - name: Install nginx\n      ansible.builtin.package:\n        name: nginx\n        state: present\n\n    - name: Enable and start nginx\n      ansible.builtin.service:\n        name: nginx\n        enabled: true\n        state: started\n\n    - name: Deploy nginx configuration\n      ansible.builtin.template:\n        src: nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n        owner: root\n        group: root\n        mode: '0644'\n      notify: Reload nginx\n\n  handlers:\n    - name: Reload nginx\n      ansible.builtin.service:\n        name: nginx\n        state: reloaded\n</code></pre>"},{"location":"migration-guide/conversion/#multi-recipe-conversion","title":"Multi-Recipe Conversion","text":"<p>For cookbooks with multiple recipes:</p> <pre><code># Convert all recipes in cookbook\nfor recipe in cookbooks/myapp/recipes/*.rb; do\n  recipe_name=$(basename \"$recipe\" .rb)\n  echo \"Converting: $recipe_name\"\n  souschef-cli convert-recipe \"$recipe\" &gt; \"playbooks/myapp_${recipe_name}.yml\"\ndone\n</code></pre> <p>Organize as Role:</p> <pre><code>roles/myapp/\n\u251c\u2500\u2500 defaults/\n\u2502   \u2514\u2500\u2500 main.yml          # Default variables\n\u251c\u2500\u2500 tasks/\n\u2502   \u251c\u2500\u2500 main.yml          # Main entry point\n\u2502   \u251c\u2500\u2500 install.yml       # From install.rb\n\u2502   \u251c\u2500\u2500 configure.yml     # From configure.rb\n\u2502   \u2514\u2500\u2500 deploy.yml        # From deploy.rb\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 config.j2\n\u2514\u2500\u2500 handlers/\n    \u2514\u2500\u2500 main.yml\n</code></pre>"},{"location":"migration-guide/conversion/#resource-mapping","title":"Resource Mapping","text":""},{"location":"migration-guide/conversion/#core-resource-types","title":"Core Resource Types","text":"Chef Resource Ansible Module Notes <code>package</code> <code>ansible.builtin.package</code> Cross-platform <code>service</code> <code>ansible.builtin.service</code> Systemd support <code>template</code> <code>ansible.builtin.template</code> ERB \u2192 Jinja2 <code>file</code> <code>ansible.builtin.file</code> Ownership, permissions <code>directory</code> <code>ansible.builtin.file</code> state: directory <code>user</code> <code>ansible.builtin.user</code> User management <code>group</code> <code>ansible.builtin.group</code> Group management <code>execute</code> <code>ansible.builtin.command</code> One-off commands <code>bash</code> <code>ansible.builtin.shell</code> Shell scripts <code>git</code> <code>ansible.builtin.git</code> Git repos <code>cron</code> <code>ansible.builtin.cron</code> Cron jobs"},{"location":"migration-guide/conversion/#platform-specific-resources","title":"Platform-Specific Resources","text":"<p>Chef Platform-Specific Packages: <pre><code># Chef\ncase node['platform_family']\nwhen 'debian'\n  apt_package 'apache2'\nwhen 'rhel'\n  yum_package 'httpd'\nend\n</code></pre></p> <p>Ansible with Facts: <pre><code>- name: Install web server (Debian)\n  ansible.builtin.apt:\n    name: apache2\n    state: present\n  when: ansible_os_family == 'Debian'\n\n- name: Install web server (RedHat)\n  ansible.builtin.yum:\n    name: httpd\n    state: present\n  when: ansible_os_family == 'RedHat'\n</code></pre></p> <p>Or use package module (cross-platform): <pre><code>- name: Install web server\n  ansible.builtin.package:\n    name: \"{{ 'apache2' if ansible_os_family == 'Debian' else 'httpd' }}\"\n    state: present\n</code></pre></p>"},{"location":"migration-guide/conversion/#template-conversion","title":"Template Conversion","text":""},{"location":"migration-guide/conversion/#erb-to-jinja2-syntax","title":"ERB to Jinja2 Syntax","text":"Chef ERB Ansible Jinja2 Example <code>&lt;%= @var %&gt;</code> <code>{{ var }}</code> Variable interpolation <code>&lt;% if @condition %&gt;</code> <code>{% if condition %}</code> Conditionals <code>&lt;% @items.each do \\|item\\| %&gt;</code> <code>{% for item in items %}</code> Loops <code>&lt;%# comment %&gt;</code> <code>{# comment #}</code> Comments <code>&lt;%= node['attr'] %&gt;</code> <code>{{ ansible_local.attr }}</code> Facts"},{"location":"migration-guide/conversion/#template-conversion-process","title":"Template Conversion Process","text":"<p>Chef Template (nginx.conf.erb): <pre><code>user &lt;%= @user %&gt;;\nworker_processes &lt;%= @workers %&gt;;\n\nevents {\n    worker_connections &lt;%= @connections %&gt;;\n}\n\nhttp {\n    &lt;% if @enable_gzip %&gt;\n    gzip on;\n    gzip_types text/plain text/css application/json;\n    &lt;% end %&gt;\n\n    &lt;% @servers.each do |server| %&gt;\n    upstream &lt;%= server['name'] %&gt; {\n        &lt;% server['backends'].each do |backend| %&gt;\n        server &lt;%= backend %&gt;:8080;\n        &lt;% end %&gt;\n    }\n    &lt;% end %&gt;\n}\n</code></pre></p> <p>Conversion:</p> MCP (AI Assistant)CLI <pre><code>Convert the ERB template at templates/nginx.conf.erb to Jinja2\nand show me the variable list\n</code></pre> <pre><code>souschef-cli template templates/nginx.conf.erb --format json &gt; template_vars.json\njq '.variables' template_vars.json\n</code></pre> <p>Generated Jinja2 (nginx.conf.j2): <pre><code>user {{ nginx_user }};\nworker_processes {{ nginx_workers }};\n\nevents {\n    worker_connections {{ nginx_connections }};\n}\n\nhttp {\n    {% if nginx_enable_gzip %}\n    gzip on;\n    gzip_types text/plain text/css application/json;\n    {% endif %}\n\n    {% for server in nginx_servers %}\n    upstream {{ server.name }} {\n        {% for backend in server.backends %}\n        server {{ backend }}:8080;\n        {% endfor %}\n    }\n    {% endfor %}\n}\n</code></pre></p> <p>Variable File (group_vars/all.yml): <pre><code>nginx_user: nginx\nnginx_workers: 4\nnginx_connections: 1024\nnginx_enable_gzip: true\nnginx_servers:\n  - name: app\n    backends:\n      - 10.0.1.10\n      - 10.0.1.11\n      - 10.0.1.12\n</code></pre></p>"},{"location":"migration-guide/conversion/#guard-conversion","title":"Guard Conversion","text":""},{"location":"migration-guide/conversion/#simple-guards","title":"Simple Guards","text":"<p>Chef: <pre><code>file '/etc/app.conf' do\n  action :create\n  only_if { ::File.exist?('/opt/app') }\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Check if app directory exists\n  ansible.builtin.stat:\n    path: /opt/app\n  register: app_dir\n\n- name: Create app configuration\n  ansible.builtin.file:\n    path: /etc/app.conf\n    state: touch\n  when: app_dir.stat.exists\n</code></pre></p>"},{"location":"migration-guide/conversion/#complex-guards","title":"Complex Guards","text":"<p>Chef Multiple Conditions: <pre><code>execute 'deploy' do\n  command '/opt/deploy.sh'\n  only_if { ::File.exist?('/opt/app.tar.gz') }\n  not_if { ::File.exist?('/opt/.deployed') }\n  not_if { node['maintenance_mode'] }\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Check for deployment archive\n  ansible.builtin.stat:\n    path: /opt/app.tar.gz\n  register: app_archive\n\n- name: Check for deployment marker\n  ansible.builtin.stat:\n    path: /opt/.deployed\n  register: deploy_marker\n\n- name: Run deployment\n  ansible.builtin.command:\n    cmd: /opt/deploy.sh\n  when:\n    - app_archive.stat.exists\n    - not deploy_marker.stat.exists\n    - not maintenance_mode | default(false)\n</code></pre></p>"},{"location":"migration-guide/conversion/#array-based-guards","title":"Array-Based Guards","text":"<p>Chef: <pre><code>package 'nginx' do\n  action :install\n  only_if ['test -f /etc/apt/sources.list', 'dpkg --version']\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Check apt sources\n  ansible.builtin.stat:\n    path: /etc/apt/sources.list\n  register: apt_sources\n\n- name: Check dpkg\n  ansible.builtin.command:\n    cmd: dpkg --version\n  register: dpkg_check\n  failed_when: false\n  changed_when: false\n\n- name: Install nginx\n  ansible.builtin.package:\n    name: nginx\n    state: present\n  when:\n    - apt_sources.stat.exists\n    - dpkg_check.rc == 0\n</code></pre></p>"},{"location":"migration-guide/conversion/#notification-handler-conversion","title":"Notification &amp; Handler Conversion","text":""},{"location":"migration-guide/conversion/#immediate-vs-delayed-notifications","title":"Immediate vs Delayed Notifications","text":"<p>Chef: <pre><code>template '/etc/nginx/nginx.conf' do\n  notifies :reload, 'service[nginx]', :delayed\nend\n\ntemplate '/etc/app/critical.conf' do\n  notifies :restart, 'service[app]', :immediately\nend\n\nservice 'nginx' do\n  action :nothing\nend\n\nservice 'app' do\n  action :nothing\nend\n</code></pre></p> <p>Ansible: <pre><code># Tasks\n- name: Deploy nginx config\n  ansible.builtin.template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n  notify: Reload nginx\n\n- name: Deploy critical config\n  ansible.builtin.template:\n    src: critical.conf.j2\n    dest: /etc/app/critical.conf\n  notify: Restart app\n\n- name: Flush handlers immediately\n  meta: flush_handlers  # For immediate effect\n\n# Handlers (handlers/main.yml)\n- name: Reload nginx\n  ansible.builtin.service:\n    name: nginx\n    state: reloaded\n\n- name: Restart app\n  ansible.builtin.service:\n    name: app\n    state: restarted\n</code></pre></p>"},{"location":"migration-guide/conversion/#chained-notifications","title":"Chained Notifications","text":"<p>Chef: <pre><code>template '/etc/app/config.yml' do\n  notifies :create, 'file[/var/log/app.log]', :immediately\n  notifies :restart, 'service[app]', :delayed\nend\n\nfile '/var/log/app.log' do\n  action :nothing\n  notifies :run, 'execute[set-permissions]', :immediately\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Deploy config\n  ansible.builtin.template:\n    src: config.yml.j2\n    dest: /etc/app/config.yml\n  notify:\n    - Create log file\n    - Restart app\n\n# Handlers execute in order defined\n- name: Create log file\n  ansible.builtin.file:\n    path: /var/log/app.log\n    state: touch\n  notify: Set log permissions\n\n- name: Set log permissions\n  ansible.builtin.command:\n    cmd: chmod 666 /var/log/app.log\n\n- name: Restart app\n  ansible.builtin.service:\n    name: app\n    state: restarted\n</code></pre></p>"},{"location":"migration-guide/conversion/#custom-resource-conversion","title":"Custom Resource Conversion","text":""},{"location":"migration-guide/conversion/#simple-custom-resource","title":"Simple Custom Resource","text":"<p>Chef Custom Resource (resources/app_config.rb): <pre><code>property :config_name, String, name_property: true\nproperty :settings, Hash, required: true\nproperty :owner, String, default: 'app'\n\naction :create do\n  directory \"/etc/#{new_resource.config_name}\" do\n    owner new_resource.owner\n    mode '0755'\n  end\n\n  file \"/etc/#{new_resource.config_name}/config.json\" do\n    content Chef::JSONCompat.to_json_pretty(new_resource.settings)\n    owner new_resource.owner\n    mode '0600'\n  end\nend\n</code></pre></p> <p>Ansible Role Equivalent:</p> <p>roles/app_config/defaults/main.yml: <pre><code>app_config_owner: app\napp_config_mode_dir: '0755'\napp_config_mode_file: '0600'\n</code></pre></p> <p>roles/app_config/tasks/main.yml: <pre><code>- name: Create config directory\n  ansible.builtin.file:\n    path: \"/etc/{{ config_name }}\"\n    state: directory\n    owner: \"{{ app_config_owner }}\"\n    mode: \"{{ app_config_mode_dir }}\"\n\n- name: Deploy configuration file\n  ansible.builtin.copy:\n    content: \"{{ settings | to_nice_json }}\"\n    dest: \"/etc/{{ config_name }}/config.json\"\n    owner: \"{{ app_config_owner }}\"\n    mode: \"{{ app_config_mode_file }}\"\n</code></pre></p> <p>Usage in Playbook: <pre><code>- name: Configure application\n  ansible.builtin.include_role:\n    name: app_config\n  vars:\n    config_name: myapp\n    settings:\n      database_url: postgresql://localhost/myapp\n      log_level: info\n      port: 8080\n</code></pre></p>"},{"location":"migration-guide/conversion/#complex-custom-resource-custom-module","title":"Complex Custom Resource \u2192 Custom Module","text":"<p>For very complex resources, create an Ansible module:</p> <p>module_utils/app_deployment.py: <pre><code>#!/usr/bin/python\nfrom ansible.module_utils.basic import AnsibleModule\n\ndef deploy_app(module, app_name, version, config):\n    \"\"\"Deploy application with complex logic.\"\"\"\n    changed = False\n\n    # Complex deployment logic here\n    # ...\n\n    return changed, \"Deployment successful\"\n\ndef main():\n    module = AnsibleModule(\n        argument_spec=dict(\n            app_name=dict(type='str', required=True),\n            version=dict(type='str', required=True),\n            config=dict(type='dict', required=True),\n            state=dict(type='str', default='present',\n                      choices=['present', 'absent'])\n        )\n    )\n\n    changed, message = deploy_app(\n        module,\n        module.params['app_name'],\n        module.params['version'],\n        module.params['config']\n    )\n\n    module.exit_json(changed=changed, msg=message)\n\nif __name__ == '__main__':\n    main()\n</code></pre></p>"},{"location":"migration-guide/conversion/#attribute-migration","title":"Attribute Migration","text":""},{"location":"migration-guide/conversion/#attribute-precedence-mapping","title":"Attribute Precedence Mapping","text":"<p>Chef Precedence Levels: 1. Automatic (highest) 2. Force Override 3. Override 4. Normal 5. Force Default 6. Default (lowest)</p> <p>Ansible Variable Precedence (simplified): 1. Extra vars (highest) 2. Task vars 3. Block vars 4. Role vars 5. Play vars 6. Host vars 7. Group vars (priority order) 8. Role defaults (lowest)</p> <p>Migration Strategy:</p> Chef Level Ansible Equivalent Location Default Role defaults <code>roles/*/defaults/main.yml</code> Force Default Group vars (all) <code>group_vars/all.yml</code> Normal Host vars <code>host_vars/hostname.yml</code> Override Group vars (specific) <code>group_vars/production.yml</code> Force Override Play vars In playbook Automatic Facts <code>ansible_facts.*</code> <p>Chef Attributes (attributes/default.rb): <pre><code>default['app']['port'] = 8080\ndefault['app']['workers'] = 4\noverride['app']['log_level'] = 'info'\n</code></pre></p> <p>Ansible Variables:</p> <p>roles/app/defaults/main.yml: <pre><code>app_port: 8080\napp_workers: 4\n</code></pre></p> <p>group_vars/all.yml: <pre><code>app_log_level: info\n</code></pre></p> <p>Override in Inventory: <pre><code># group_vars/production.yml\napp_port: 9090\napp_workers: 8\napp_log_level: warn\n</code></pre></p>"},{"location":"migration-guide/conversion/#data-bag-migration","title":"Data Bag Migration","text":""},{"location":"migration-guide/conversion/#unencrypted-data-bags","title":"Unencrypted Data Bags","text":"<p>Chef Data Bag (data_bags/users/john.json): <pre><code>{\n  \"id\": \"john\",\n  \"full_name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"groups\": [\"developers\", \"docker\"]\n}\n</code></pre></p> <p>Ansible Variables (group_vars/all/users.yml): <pre><code>users:\n  john:\n    full_name: John Doe\n    email: john@example.com\n    groups:\n      - developers\n      - docker\n</code></pre></p>"},{"location":"migration-guide/conversion/#encrypted-data-bags-to-ansible-vault","title":"Encrypted Data Bags to Ansible Vault","text":"<p>Chef Encrypted Data Bag: <pre><code># Decrypt Chef data bag\nknife data bag show secrets database --secret-file ~/.chef/encrypted_data_bag_secret -Fj &gt; database_secrets.json\n</code></pre></p> <p>Convert to Ansible Vault:</p> MCP (AI Assistant)CLI <pre><code>Convert the data bag at database_secrets.json to Ansible Vault format\n</code></pre> <pre><code># Create vault file\ncat &gt; group_vars/all/vault.yml &lt;&lt;EOF\nvault_db_password: \"{{ lookup('file', 'database_secrets.json') | from_json | json_query('password') }}\"\nvault_db_host: \"{{ lookup('file', 'database_secrets.json') | from_json | json_query('host') }}\"\nEOF\n\n# Encrypt with Ansible Vault\nansible-vault encrypt group_vars/all/vault.yml\n</code></pre> <p>Reference in Playbook: <pre><code>- name: Configure database\n  ansible.builtin.template:\n    src: database.yml.j2\n    dest: /etc/app/database.yml\n  vars:\n    db_password: \"{{ vault_db_password }}\"\n    db_host: \"{{ vault_db_host }}\"\n  no_log: true\n</code></pre></p>"},{"location":"migration-guide/conversion/#environment-conversion","title":"Environment Conversion","text":"<p>Chef Environment (environments/production.rb): <pre><code>name 'production'\ndescription 'Production environment'\n\noverride_attributes(\n  'app' =&gt; {\n    'port' =&gt; 80,\n    'workers' =&gt; 8,\n    'log_level' =&gt; 'warn'\n  }\n)\n</code></pre></p> <p>Ansible Inventory Structure: <pre><code># inventory/production/hosts.yml\nall:\n  children:\n    production:\n      hosts:\n        app01:\n          ansible_host: 10.0.1.10\n        app02:\n          ansible_host: 10.0.1.11\n\n# inventory/production/group_vars/production.yml\napp_port: 80\napp_workers: 8\napp_log_level: warn\nenvironment: production\n</code></pre></p>"},{"location":"migration-guide/conversion/#validation-during-conversion","title":"Validation During Conversion","text":""},{"location":"migration-guide/conversion/#syntax-validation","title":"Syntax Validation","text":"<p>After each conversion:</p> <pre><code># Validate YAML syntax\nansible-playbook playbooks/myapp.yml --syntax-check\n\n# Validate with ansible-lint\nansible-lint playbooks/myapp.yml\n\n# Check mode (dry run)\nansible-playbook playbooks/myapp.yml --check -i inventory/dev\n</code></pre>"},{"location":"migration-guide/conversion/#semantic-validation-with-souschef","title":"Semantic Validation with SousChef","text":"<pre><code># Validate conversion accuracy\nsouschef-cli validate playbook \\\n  --original recipes/myapp.rb \\\n  --converted playbooks/myapp.yml \\\n  --format text\n</code></pre> <p>Validation Output: <pre><code>\u2713 Syntax: PASSED (YAML valid)\n\u2713 Semantic: PASSED (Logic preserved)\n\u26a0 Best Practice: 2 warnings\n  - Consider using 'package' instead of 'apt'\n  - Add 'become: true' for privilege escalation\n\u2713 Security: PASSED\n\u2713 Performance: PASSED\n\nOverall: PASSED with warnings\n</code></pre></p>"},{"location":"migration-guide/conversion/#conversion-checklist","title":"Conversion Checklist","text":""},{"location":"migration-guide/conversion/#per-recipe-checklist","title":"Per-Recipe Checklist","text":"<ul> <li> Parse recipe with <code>parse_recipe</code></li> <li> Review resource types and actions</li> <li> Identify notification chains</li> <li> Check guard conditions</li> <li> Convert recipe to playbook</li> <li> Transform templates (ERB \u2192 Jinja2)</li> <li> Map variables (attributes \u2192 vars)</li> <li> Create handlers for notifications</li> <li> Validate syntax</li> <li> Test in development</li> <li> Verify idempotency</li> <li> Document any manual changes</li> </ul>"},{"location":"migration-guide/conversion/#per-cookbook-checklist","title":"Per-Cookbook Checklist","text":"<ul> <li> Convert all recipes</li> <li> Migrate custom resources to roles/modules</li> <li> Transform all templates</li> <li> Migrate attribute files</li> <li> Convert data bags to vars/vault</li> <li> Update environment-specific variables</li> <li> Generate InSpec tests</li> <li> Organize as role (if appropriate)</li> <li> Create README with usage examples</li> <li> Tag in version control</li> </ul>"},{"location":"migration-guide/conversion/#best-practices","title":"Best Practices","text":""},{"location":"migration-guide/conversion/#dos","title":"Do's \u2705","text":"<ol> <li>Convert One Recipe at a Time: Test each before moving to next</li> <li>Preserve Intent: Focus on what the code does, not how</li> <li>Use Native Modules: Prefer Ansible modules over shell commands</li> <li>Validate Continuously: Check syntax and semantics after each conversion</li> <li>Test Idempotency: Run playbooks multiple times</li> <li>Document Changes: Note any manual modifications</li> <li>Organize into Roles: Structure for reusability</li> <li>Version Control: Commit after each successful conversion</li> </ol>"},{"location":"migration-guide/conversion/#donts","title":"Don'ts \u274c","text":"<ol> <li>Don't Skip Testing: Always test converted code</li> <li>Don't Ignore Warnings: Validation warnings indicate issues</li> <li>Don't Convert Blindly: Understand the Chef code first</li> <li>Don't Forget Handlers: Notifications must be preserved</li> <li>Don't Mix Concerns: Keep tasks focused and organized</li> <li>Don't Hardcode Values: Use variables for flexibility</li> <li>Don't Skip Documentation: Document complex conversions</li> <li>Don't Rush: Thorough conversion prevents rework</li> </ol>"},{"location":"migration-guide/conversion/#troubleshooting","title":"Troubleshooting","text":""},{"location":"migration-guide/conversion/#issue-resource-not-converting-properly","title":"Issue: Resource Not Converting Properly","text":"<p>Problem: Chef resource doesn't have direct Ansible equivalent</p> <p>Solution: 1. Check Ansible Galaxy for community collections 2. Use <code>ansible.builtin.command</code> as fallback 3. Create custom module for complex logic 4. Document the conversion approach</p>"},{"location":"migration-guide/conversion/#issue-guard-logic-too-complex","title":"Issue: Guard Logic Too Complex","text":"<p>Problem: Complex Ruby guards don't convert cleanly</p> <p>Solution: <pre><code># Break into separate fact-gathering and conditional tasks\n- name: Gather deployment facts\n  ansible.builtin.set_fact:\n    can_deploy: \"{{ (app_archive.stat.exists and\n                     not deploy_marker.stat.exists and\n                     not maintenance_mode) | bool }}\"\n\n- name: Deploy if conditions met\n  ansible.builtin.command:\n    cmd: /opt/deploy.sh\n  when: can_deploy\n</code></pre></p>"},{"location":"migration-guide/conversion/#issue-notification-timing","title":"Issue: Notification Timing","text":"<p>Problem: Chef immediate vs delayed notifications</p> <p>Solution: <pre><code># Use meta: flush_handlers for immediate effect\n- name: Critical config change\n  ansible.builtin.template:\n    src: critical.j2\n    dest: /etc/app/critical.conf\n  notify: Restart app immediately\n\n- name: Force handler execution\n  meta: flush_handlers\n</code></pre></p>"},{"location":"migration-guide/conversion/#next-steps","title":"Next Steps","text":"<p>After completing conversions:</p> <ol> <li>Review Deployment Strategies - Plan production deployment</li> <li>Validation Testing - Comprehensive testing</li> <li>Examples - Real-world conversion patterns</li> </ol> <p>Or explore related topics:</p> <ul> <li>MCP Tools Reference - Conversion tool details</li> <li>CLI Usage - Command-line conversion</li> <li>Assessment Guide - Pre-conversion assessment</li> </ul> <p>Ready to Convert?</p> <p>Use SousChef's conversion tools to transform Chef cookbooks systematically. Start simple, validate continuously, and build confidence with each successful conversion.</p>"},{"location":"migration-guide/deployment/","title":"Deployment Strategies","text":"<p>Comprehensive guide to deploying Ansible playbooks to production, including AWX/Tower integration, deployment patterns, and production cutover.</p>"},{"location":"migration-guide/deployment/#deployment-overview","title":"Deployment Overview","text":"<p>Successful deployment requires careful planning, testing, and execution. This guide covers strategies from simple direct deployment to enterprise-grade automation with AWX.</p> <p>Production Safety</p> <p>Always test in non-production environments first. Use check mode, limit flags, and rollback plans for every production deployment.</p>"},{"location":"migration-guide/deployment/#deployment-maturity-levels","title":"Deployment Maturity Levels","text":"<pre><code>graph LR\n    A[Level 1:&lt;br/&gt;Manual] --&gt; B[Level 2:&lt;br/&gt;Scripted]\n    B --&gt; C[Level 3:&lt;br/&gt;CI/CD]\n    C --&gt; D[Level 4:&lt;br/&gt;Self-Service]\n    D --&gt; E[Level 5:&lt;br/&gt;GitOps]\n\n    style A fill:#ffebee\n    style B fill:#fff3e0\n    style C fill:#e3f2fd\n    style D fill:#e8f5e9\n    style E fill:#f3e5f5</code></pre> Level Approach Tools Best For 1 Manual execution <code>ansible-playbook</code> CLI Development, learning 2 Shell scripts Bash + Ansible Small teams 3 CI/CD pipelines Jenkins, GitLab CI Medium orgs 4 Self-service platform AWX, Tower Enterprise 5 GitOps ArgoCD, Flux Cloud-native"},{"location":"migration-guide/deployment/#deployment-patterns","title":"Deployment Patterns","text":""},{"location":"migration-guide/deployment/#blue-green-deployment","title":"Blue-Green Deployment","text":"<p>Overview: Maintain two identical environments, switch traffic after validation.</p> <pre><code>graph TD\n    A[Current: Blue&lt;br/&gt;Production Traffic] --&gt; B{Deploy to Green}\n    B --&gt; C[Test Green Environment]\n    C --&gt; D{Tests Pass?}\n    D --&gt;|Yes| E[Switch Traffic to Green]\n    D --&gt;|No| F[Fix Issues]\n    F --&gt; B\n    E --&gt; G[Green becomes Production]\n    G --&gt; H[Blue becomes Standby]\n\n    style A fill:#2196f3,color:#fff\n    style E fill:#4caf50,color:#fff\n    style G fill:#4caf50,color:#fff\n    style H fill:#2196f3,color:#fff</code></pre> <p>Implementation:</p> <pre><code>---\n- name: Blue-Green Deployment\n  hosts: localhost\n  gather_facts: false\n  vars:\n    current_env: blue\n    target_env: green\n\n  tasks:\n    - name: Deploy to green environment\n      ansible.builtin.include_role:\n        name: application\n      vars:\n        environment: \"{{ target_env }}\"\n        ansible_limit: \"{{ target_env }}_servers\"\n\n    - name: Run smoke tests on green\n      ansible.builtin.uri:\n        url: \"https://{{ target_env }}.example.com/health\"\n        status_code: 200\n      register: health_check\n      retries: 5\n      delay: 10\n\n    - name: Switch load balancer to green\n      community.general.haproxy:\n        backend: app_backend\n        host: \"{{ target_env }}_servers\"\n        state: enabled\n      when: health_check.status == 200\n\n    - name: Disable blue environment\n      community.general.haproxy:\n        backend: app_backend\n        host: \"{{ current_env }}_servers\"\n        state: disabled\n\n    - name: Update environment marker\n      ansible.builtin.set_fact:\n        cacheable: true\n        current_production: \"{{ target_env }}\"\n</code></pre> <p>Benefits: - Zero downtime - Instant rollback (switch back to blue) - Full testing before cutover</p> <p>Drawbacks: - Requires double infrastructure - Database migrations need special handling</p>"},{"location":"migration-guide/deployment/#canary-deployment","title":"Canary Deployment","text":"<p>Overview: Gradually roll out to subset of servers, monitor, then expand.</p> <pre><code>graph LR\n    A[Deploy to&lt;br/&gt;10% Canary] --&gt; B{Monitor&lt;br/&gt;Metrics}\n    B --&gt;|Good| C[Deploy to&lt;br/&gt;50%]\n    C --&gt; D{Monitor&lt;br/&gt;Metrics}\n    D --&gt;|Good| E[Deploy to&lt;br/&gt;100%]\n    B --&gt;|Issues| F[Rollback]\n    D --&gt;|Issues| F\n\n    style A fill:#fff3e0\n    style C fill:#e3f2fd\n    style E fill:#4caf50,color:#fff\n    style F fill:#f44336,color:#fff</code></pre> <p>Implementation:</p> <pre><code>---\n- name: Canary Deployment\n  hosts: app_servers\n  serial: \"{{ rollout_percentage | default('10%') }}\"\n  max_fail_percentage: 5\n\n  tasks:\n    - name: Deploy new version\n      ansible.builtin.include_role:\n        name: application\n      vars:\n        app_version: \"{{ new_version }}\"\n\n    - name: Wait for service to stabilize\n      ansible.builtin.pause:\n        seconds: 30\n\n    - name: Check service health\n      ansible.builtin.uri:\n        url: \"http://localhost:8080/health\"\n        status_code: 200\n      register: health\n      retries: 3\n      delay: 5\n\n    - name: Monitor error rates\n      ansible.builtin.command:\n        cmd: curl -s http://localhost:9090/metrics | grep error_rate\n      register: metrics\n      failed_when: \"'error_rate &gt; 0.05' in metrics.stdout\"\n\n    - name: Pause for monitoring\n      ansible.builtin.pause:\n        prompt: \"Review metrics before continuing (Enter to proceed)\"\n      when: rollout_percentage == '10%'\n</code></pre> <p>Progressive Rollout:</p> <pre><code># Stage 1: 10% canary\nansible-playbook deploy.yml -e \"rollout_percentage=10%\" -e \"new_version=2.0.0\"\n\n# Monitor for 15 minutes, check metrics\n\n# Stage 2: 50% rollout\nansible-playbook deploy.yml -e \"rollout_percentage=50%\" -e \"new_version=2.0.0\"\n\n# Monitor for 15 minutes\n\n# Stage 3: Full rollout\nansible-playbook deploy.yml -e \"rollout_percentage=100%\" -e \"new_version=2.0.0\"\n</code></pre> <p>Benefits: - Low risk (limited exposure) - Real-world validation - Easy to halt if issues arise</p> <p>Drawbacks: - Longer deployment time - Requires good monitoring - Version mixing during rollout</p>"},{"location":"migration-guide/deployment/#rolling-deployment","title":"Rolling Deployment","text":"<p>Overview: Update servers one at a time or in small batches.</p> <pre><code>---\n- name: Rolling Deployment\n  hosts: app_servers\n  serial: 2  # Update 2 servers at a time\n\n  pre_tasks:\n    - name: Remove server from load balancer\n      community.general.haproxy:\n        backend: app_backend\n        host: \"{{ inventory_hostname }}\"\n        state: disabled\n      delegate_to: localhost\n\n  tasks:\n    - name: Stop application\n      ansible.builtin.service:\n        name: myapp\n        state: stopped\n\n    - name: Deploy new version\n      ansible.builtin.include_role:\n        name: application\n\n    - name: Start application\n      ansible.builtin.service:\n        name: myapp\n        state: started\n\n    - name: Wait for service to be ready\n      ansible.builtin.wait_for:\n        port: 8080\n        delay: 5\n        timeout: 60\n\n  post_tasks:\n    - name: Add server back to load balancer\n      community.general.haproxy:\n        backend: app_backend\n        host: \"{{ inventory_hostname }}\"\n        state: enabled\n      delegate_to: localhost\n\n    - name: Health check\n      ansible.builtin.uri:\n        url: \"http://{{ inventory_hostname }}:8080/health\"\n        status_code: 200\n</code></pre> <p>Benefits: - No extra infrastructure needed - Predictable deployment time - Easy to automate</p> <p>Drawbacks: - Some downtime per server - Requires load balancer - Mixed versions during deployment</p>"},{"location":"migration-guide/deployment/#parallel-run-strategy","title":"Parallel Run Strategy","text":"<p>Overview: Run Chef and Ansible simultaneously during transition.</p> <p>Implementation:</p> <pre><code>---\n- name: Parallel Run Verification\n  hosts: migration_targets\n\n  tasks:\n    - name: Run Chef client\n      ansible.builtin.command:\n        cmd: chef-client\n      register: chef_run\n      changed_when: \"'updated' in chef_run.stdout\"\n\n    - name: Capture Chef state\n      ansible.builtin.command:\n        cmd: knife node show {{ inventory_hostname }} -a\n      register: chef_state\n      delegate_to: localhost\n\n    - name: Run Ansible playbook\n      ansible.builtin.include_role:\n        name: application\n      register: ansible_run\n\n    - name: Capture Ansible state\n      ansible.builtin.setup:\n      register: ansible_state\n\n    - name: Compare states\n      ansible.builtin.assert:\n        that:\n          - chef_state.rc == 0\n          - ansible_run is succeeded\n        msg: \"Chef and Ansible runs must both succeed\"\n\n    - name: Report differences\n      ansible.builtin.debug:\n        msg: \"Differences detected: {{ diff }}\"\n      vars:\n        diff: \"{{ chef_state.stdout | difference(ansible_state.ansible_facts) }}\"\n      when: diff | length &gt; 0\n</code></pre> <p>Benefits: - Low risk (Chef still active) - Validates Ansible accuracy - Gradual confidence building</p> <p>Drawbacks: - Requires Chef infrastructure - May cause conflicts - Extended transition period</p>"},{"location":"migration-guide/deployment/#awxansible-tower-integration","title":"AWX/Ansible Tower Integration","text":""},{"location":"migration-guide/deployment/#awx-setup-for-souschef","title":"AWX Setup for SousChef","text":"<p>Install AWX (via Docker Compose):</p> MCP (AI Assistant)CLI <pre><code>Generate AWX job templates for the converted playbooks in playbooks/ directory\n</code></pre> <pre><code>souschef-cli generate-awx-config \\\n  --playbooks-dir playbooks/ \\\n  --output awx_config.yml\n</code></pre> <p>Generated AWX Configuration:</p> <pre><code>---\nawx_projects:\n  - name: Infrastructure Automation\n    description: Converted Chef cookbooks\n    organization: Engineering\n    scm_type: git\n    scm_url: https://github.com/myorg/ansible-playbooks.git\n    scm_branch: main\n    scm_update_on_launch: true\n\nawx_inventories:\n  - name: Production\n    description: Production servers\n    organization: Engineering\n    variables:\n      environment: production\n      ansible_user: ansible\n\nawx_job_templates:\n  - name: Deploy Web Application\n    job_type: run\n    inventory: Production\n    project: Infrastructure Automation\n    playbook: playbooks/webserver.yml\n    credentials:\n      - SSH Key\n      - Vault Password\n    extra_vars:\n      app_version: \"{{ app_version }}\"\n    survey_enabled: true\n    survey_spec:\n      name: Deployment Survey\n      description: Configure deployment parameters\n      spec:\n        - question_name: Application Version\n          variable: app_version\n          type: text\n          required: true\n        - question_name: Environment\n          variable: target_env\n          type: multiplechoice\n          choices:\n            - dev\n            - staging\n            - production\n          required: true\n\n  - name: Database Migration\n    job_type: run\n    inventory: Production\n    project: Infrastructure Automation\n    playbook: playbooks/database.yml\n    credentials:\n      - SSH Key\n      - Database Credentials\n    ask_variables_on_launch: true\n\nawx_workflows:\n  - name: Full Application Deployment\n    organization: Engineering\n    nodes:\n      - identifier: pre_checks\n        unified_job_template: Pre-Deployment Checks\n        success_nodes:\n          - database_migration\n\n      - identifier: database_migration\n        unified_job_template: Database Migration\n        success_nodes:\n          - app_deployment\n\n      - identifier: app_deployment\n        unified_job_template: Deploy Web Application\n        success_nodes:\n          - smoke_tests\n\n      - identifier: smoke_tests\n        unified_job_template: Smoke Tests\n        success_nodes:\n          - notify_success\n        failure_nodes:\n          - rollback\n\n      - identifier: rollback\n        unified_job_template: Rollback Deployment\n        always_nodes:\n          - notify_failure\n</code></pre>"},{"location":"migration-guide/deployment/#import-to-awx","title":"Import to AWX","text":"<p>Using AWX CLI:</p> <pre><code># Install awxkit\npip install awxkit\n\n# Login\nexport TOWER_HOST=https://awx.example.com\nexport TOWER_USERNAME=admin\nexport TOWER_PASSWORD=secret\nexport TOWER_VERIFY_SSL=false\n\n# Import configuration\nawx-cli receive --conf.host=$TOWER_HOST \\\n  --conf.username=$TOWER_USERNAME \\\n  --conf.password=$TOWER_PASSWORD \\\n  --conf.insecure &lt; awx_config.yml\n</code></pre> <p>Using AWX Collection:</p> <pre><code>---\n- name: Configure AWX\n  hosts: localhost\n  gather_facts: false\n  collections:\n    - awx.awx\n\n  tasks:\n    - name: Create organization\n      awx.awx.organization:\n        name: Engineering\n        description: Engineering team resources\n        state: present\n\n    - name: Create project\n      awx.awx.project:\n        name: Infrastructure Automation\n        organization: Engineering\n        scm_type: git\n        scm_url: https://github.com/myorg/ansible-playbooks.git\n        state: present\n\n    - name: Create inventory\n      awx.awx.inventory:\n        name: Production\n        organization: Engineering\n        state: present\n\n    - name: Create job template\n      awx.awx.job_template:\n        name: Deploy Web Application\n        job_type: run\n        organization: Engineering\n        inventory: Production\n        project: Infrastructure Automation\n        playbook: playbooks/webserver.yml\n        state: present\n</code></pre>"},{"location":"migration-guide/deployment/#dynamic-inventory","title":"Dynamic Inventory","text":"<p>Chef Search Equivalent:</p> <p>Chef: <pre><code># Search for web servers\nsearch(:node, 'role:webserver AND chef_environment:production').each do |node|\n  # Do something\nend\n</code></pre></p> <p>AWX Dynamic Inventory Script:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nAWX dynamic inventory from Chef Server or custom CMDB.\n\"\"\"\nimport json\nimport sys\nimport requests\n\ndef get_chef_nodes():\n    \"\"\"Query Chef Server for nodes.\"\"\"\n    response = requests.get(\n        'https://chef-server.example.com/nodes',\n        headers={'Authorization': f'Bearer {CHEF_TOKEN}'},\n        verify=False\n    )\n    return response.json()\n\ndef build_inventory():\n    \"\"\"Build Ansible inventory from Chef data.\"\"\"\n    inventory = {\n        '_meta': {\n            'hostvars': {}\n        },\n        'all': {\n            'hosts': [],\n            'vars': {}\n        }\n    }\n\n    nodes = get_chef_nodes()\n\n    for node in nodes:\n        hostname = node['name']\n        inventory['all']['hosts'].append(hostname)\n\n        # Add to role-based groups\n        for role in node.get('roles', []):\n            if role not in inventory:\n                inventory[role] = {'hosts': []}\n            inventory[role]['hosts'].append(hostname)\n\n        # Add hostvars\n        inventory['_meta']['hostvars'][hostname] = {\n            'ansible_host': node['ipaddress'],\n            'chef_environment': node['chef_environment'],\n            'platform': node['platform'],\n            'platform_version': node['platform_version']\n        }\n\n    return inventory\n\nif __name__ == '__main__':\n    if len(sys.argv) == 2 and sys.argv[1] == '--list':\n        inventory = build_inventory()\n        print(json.dumps(inventory, indent=2))\n    else:\n        print(json.dumps({}))\n</code></pre> <p>Configure in AWX:</p> <ol> <li>Create inventory source</li> <li>Set source to \"Custom Script\"</li> <li>Upload inventory script</li> <li>Set sync schedule (e.g., hourly)</li> </ol>"},{"location":"migration-guide/deployment/#secrets-management","title":"Secrets Management","text":""},{"location":"migration-guide/deployment/#ansible-vault-migration","title":"Ansible Vault Migration","text":"<p>From Chef Encrypted Data Bags:</p> <pre><code># Extract Chef secrets\nknife data bag show secrets database \\\n  --secret-file ~/.chef/encrypted_data_bag_secret \\\n  -Fj &gt; database_secrets.json\n\n# Convert to Ansible Vault format\ncat &gt; group_vars/production/vault.yml &lt;&lt;EOF\n---\nvault_db_host: $(jq -r '.host' database_secrets.json)\nvault_db_port: $(jq -r '.port' database_secrets.json)\nvault_db_user: $(jq -r '.username' database_secrets.json)\nvault_db_password: $(jq -r '.password' database_secrets.json)\nEOF\n\n# Encrypt with Ansible Vault\nansible-vault encrypt group_vars/production/vault.yml\n</code></pre> <p>Reference in Playbook:</p> <pre><code>---\n- name: Configure application\n  hosts: app_servers\n  vars_files:\n    - group_vars/production/vault.yml\n\n  tasks:\n    - name: Deploy database configuration\n      ansible.builtin.template:\n        src: database.yml.j2\n        dest: /etc/app/database.yml\n      vars:\n        db_host: \"{{ vault_db_host }}\"\n        db_password: \"{{ vault_db_password }}\"\n      no_log: true\n</code></pre>"},{"location":"migration-guide/deployment/#awx-credentials","title":"AWX Credentials","text":"<p>Create Credential Types:</p> <pre><code>---\n- name: Create custom credential type for database\n  awx.awx.credential_type:\n    name: Database Credentials\n    kind: cloud\n    inputs:\n      fields:\n        - id: db_host\n          type: string\n          label: Database Host\n        - id: db_port\n          type: string\n          label: Database Port\n        - id: db_username\n          type: string\n          label: Username\n        - id: db_password\n          type: string\n          label: Password\n          secret: true\n    injectors:\n      extra_vars:\n        database_host: \"{{ db_host }}\"\n        database_port: \"{{ db_port }}\"\n        database_username: \"{{ db_username }}\"\n        database_password: \"{{ db_password }}\"\n    state: present\n\n- name: Create credential\n  awx.awx.credential:\n    name: Production Database\n    organization: Engineering\n    credential_type: Database Credentials\n    inputs:\n      db_host: postgres.example.com\n      db_port: 5432\n      db_username: app_user\n      db_password: !vault |\n        $ANSIBLE_VAULT;1.1;AES256\n        ...encrypted...\n    state: present\n</code></pre>"},{"location":"migration-guide/deployment/#external-secret-managers","title":"External Secret Managers","text":"<p>HashiCorp Vault Integration:</p> <pre><code>---\n- name: Retrieve secrets from Vault\n  hosts: app_servers\n\n  tasks:\n    - name: Get database credentials\n      community.hashi_vault.vault_read:\n        url: https://vault.example.com\n        path: secret/data/production/database\n        auth_method: token\n        token: \"{{ lookup('env', 'VAULT_TOKEN') }}\"\n      register: vault_secrets\n\n    - name: Deploy configuration\n      ansible.builtin.template:\n        src: database.yml.j2\n        dest: /etc/app/database.yml\n      vars:\n        db_password: \"{{ vault_secrets.data.data.password }}\"\n      no_log: true\n</code></pre>"},{"location":"migration-guide/deployment/#production-cutover","title":"Production Cutover","text":""},{"location":"migration-guide/deployment/#pre-cutover-checklist","title":"Pre-Cutover Checklist","text":"<p>Weeks Before:</p> <ul> <li> Complete parallel runs (Chef + Ansible)</li> <li> Validate all conversions in staging</li> <li> Train operations team on Ansible</li> <li> Document rollback procedures</li> <li> Set up monitoring and alerting</li> <li> Schedule maintenance window</li> <li> Communicate to stakeholders</li> </ul> <p>Days Before:</p> <ul> <li> Final parallel run validation</li> <li> Backup all Chef cookbooks</li> <li> Backup Chef Server configuration</li> <li> Review rollback plan with team</li> <li> Prepare runbooks</li> <li> Test rollback procedure</li> <li> Verify monitoring endpoints</li> </ul> <p>Day Of:</p> <ul> <li> Announce maintenance window</li> <li> Take final Chef Server backup</li> <li> Freeze Chef cookbook changes</li> <li> Enable detailed logging</li> <li> Notify stakeholders (start)</li> </ul>"},{"location":"migration-guide/deployment/#cutover-execution","title":"Cutover Execution","text":"<pre><code>graph TD\n    A[Start Maintenance] --&gt; B[Final Chef Run]\n    B --&gt; C[Capture Final State]\n    C --&gt; D[Disable Chef Client]\n    D --&gt; E[Run Ansible Playbooks]\n    E --&gt; F[Validate Services]\n    F --&gt; G{All Services OK?}\n    G --&gt;|Yes| H[Enable Monitoring]\n    G --&gt;|No| I[Execute Rollback]\n    I --&gt; J[Re-enable Chef]\n    J --&gt; K[Investigate Issues]\n    H --&gt; L[End Maintenance]\n    L --&gt; M[Monitor for 24h]\n\n    style A fill:#fff3e0\n    style E fill:#e3f2fd\n    style G fill:#f3e5f5\n    style H fill:#4caf50,color:#fff\n    style I fill:#f44336,color:#fff\n    style M fill:#4caf50,color:#fff</code></pre> <p>Cutover Playbook:</p> <pre><code>---\n- name: Production Cutover - Chef to Ansible\n  hosts: all\n  gather_facts: true\n  serial: 10%  # Process 10% of servers at a time\n\n  pre_tasks:\n    - name: Announce cutover start\n      ansible.builtin.debug:\n        msg: \"Starting cutover for {{ inventory_hostname }} at {{ ansible_date_time.iso8601 }}\"\n\n    - name: Final Chef client run\n      ansible.builtin.command:\n        cmd: chef-client\n      register: final_chef_run\n      ignore_errors: true\n\n    - name: Capture Chef-managed resources\n      ansible.builtin.command:\n        cmd: chef-client --why-run --format json\n      register: chef_state\n\n    - name: Disable Chef client\n      ansible.builtin.service:\n        name: chef-client\n        state: stopped\n        enabled: false\n\n    - name: Remove Chef from cron\n      ansible.builtin.cron:\n        name: \"Chef client\"\n        state: absent\n\n  tasks:\n    - name: Run Ansible configuration\n      ansible.builtin.include_role:\n        name: \"{{ item }}\"\n      loop: \"{{ required_roles }}\"\n\n    - name: Validate services\n      ansible.builtin.service:\n        name: \"{{ item }}\"\n        state: started\n      loop: \"{{ critical_services }}\"\n      register: service_check\n\n    - name: Run smoke tests\n      ansible.builtin.uri:\n        url: \"http://localhost:{{ app_port }}/health\"\n        status_code: 200\n      register: health_check\n      retries: 3\n      delay: 10\n\n  post_tasks:\n    - name: Mark cutover complete\n      ansible.builtin.file:\n        path: /etc/ansible_cutover_complete\n        state: touch\n        mode: '0644'\n\n    - name: Log cutover completion\n      ansible.builtin.lineinfile:\n        path: /var/log/ansible-cutover.log\n        line: \"Cutover completed: {{ ansible_date_time.iso8601 }}\"\n        create: true\n\n  rescue:\n    - name: Cutover failed - initiating rollback\n      ansible.builtin.debug:\n        msg: \"CUTOVER FAILED - Rolling back to Chef\"\n\n    - name: Re-enable Chef client\n      ansible.builtin.service:\n        name: chef-client\n        state: started\n        enabled: true\n\n    - name: Run Chef client\n      ansible.builtin.command:\n        cmd: chef-client\n\n    - name: Log rollback\n      ansible.builtin.lineinfile:\n        path: /var/log/ansible-cutover.log\n        line: \"Rollback executed: {{ ansible_date_time.iso8601 }}\"\n        create: true\n\n    - name: Notify team\n      ansible.builtin.debug:\n        msg: \"ALERT: Cutover failed and rolled back. Check logs.\"\n</code></pre> <p>Execution:</p> <pre><code># Dry run first\nansible-playbook cutover.yml --check -i inventory/production\n\n# Execute cutover\nansible-playbook cutover.yml -i inventory/production \\\n  -e \"required_roles=[webserver,database,monitoring]\" \\\n  -e \"critical_services=[nginx,postgresql,myapp]\" \\\n  -e \"app_port=8080\" \\\n  --diff\n</code></pre>"},{"location":"migration-guide/deployment/#post-cutover-validation","title":"Post-Cutover Validation","text":"<p>Immediate (0-4 hours):</p> <pre><code># Service health checks\nansible all -i inventory/production -m service_facts\nansible all -i inventory/production -m shell -a \"systemctl list-units --failed\"\n\n# Application health\nansible webservers -i inventory/production -m uri \\\n  -a \"url=http://localhost/health status_code=200\"\n\n# Log analysis\nansible all -i inventory/production -m shell \\\n  -a \"grep -i error /var/log/syslog | tail -20\"\n\n# Compare states\nansible all -i inventory/production -m setup &gt; ansible_state.json\n# Compare with pre-cutover Chef state\n</code></pre> <p>Extended (4-24 hours):</p> <pre><code># Monitor resource usage\nansible all -m shell -a \"top -b -n 1 | head -20\"\nansible all -m shell -a \"df -h\"\nansible all -m shell -a \"free -m\"\n\n# Check for configuration drift\nansible-playbook validate_configuration.yml --check --diff\n\n# Run full test suite\nansible-playbook test_suite.yml -i inventory/production\n</code></pre>"},{"location":"migration-guide/deployment/#monitoring-alerting","title":"Monitoring &amp; Alerting","text":""},{"location":"migration-guide/deployment/#deployment-monitoring","title":"Deployment Monitoring","text":"<p>Prometheus Metrics:</p> <pre><code>---\n- name: Expose deployment metrics\n  hosts: localhost\n  tasks:\n    - name: Record deployment start\n      community.general.prometheus:\n        name: ansible_deployment_start\n        value: 1\n        labels:\n          playbook: \"{{ ansible_play_name }}\"\n          environment: production\n\n    - name: Include deployment tasks\n      ansible.builtin.include_tasks: deploy.yml\n      register: deploy_result\n\n    - name: Record deployment success\n      community.general.prometheus:\n        name: ansible_deployment_success\n        value: 1\n        labels:\n          playbook: \"{{ ansible_play_name }}\"\n          environment: production\n      when: deploy_result is succeeded\n\n    - name: Record deployment failure\n      community.general.prometheus:\n        name: ansible_deployment_failure\n        value: 1\n        labels:\n          playbook: \"{{ ansible_play_name }}\"\n          environment: production\n      when: deploy_result is failed\n</code></pre> <p>Grafana Dashboard:</p> <pre><code>{\n  \"dashboard\": {\n    \"title\": \"Ansible Deployments\",\n    \"panels\": [\n      {\n        \"title\": \"Deployment Success Rate\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(ansible_deployment_success[5m]) / rate(ansible_deployment_start[5m])\"\n          }\n        ]\n      },\n      {\n        \"title\": \"Failed Deployments\",\n        \"targets\": [\n          {\n            \"expr\": \"ansible_deployment_failure\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"migration-guide/deployment/#integration-with-existing-monitoring","title":"Integration with Existing Monitoring","text":"<p>Send alerts to Slack:</p> <pre><code>---\n- name: Notify on deployment\n  hosts: localhost\n  tasks:\n    - name: Send Slack notification\n      community.general.slack:\n        token: \"{{ slack_token }}\"\n        channel: \"#deployments\"\n        msg: |\n          \ud83d\ude80 Deployment started\n          Playbook: {{ ansible_play_name }}\n          Environment: {{ environment }}\n          Initiated by: {{ ansible_user_id }}\n</code></pre>"},{"location":"migration-guide/deployment/#rollback-procedures","title":"Rollback Procedures","text":""},{"location":"migration-guide/deployment/#automated-rollback","title":"Automated Rollback","text":"<pre><code>---\n- name: Rollback Deployment\n  hosts: app_servers\n\n  vars:\n    previous_version: \"{{ lookup('file', '/tmp/previous_version.txt') }}\"\n\n  tasks:\n    - name: Stop current version\n      ansible.builtin.service:\n        name: myapp\n        state: stopped\n\n    - name: Restore previous version\n      ansible.builtin.copy:\n        src: \"/opt/backups/myapp-{{ previous_version }}.tar.gz\"\n        dest: /opt/myapp/\n        remote_src: true\n\n    - name: Extract backup\n      ansible.builtin.unarchive:\n        src: \"/opt/myapp/myapp-{{ previous_version }}.tar.gz\"\n        dest: /opt/myapp/\n        remote_src: true\n\n    - name: Start previous version\n      ansible.builtin.service:\n        name: myapp\n        state: started\n\n    - name: Verify rollback\n      ansible.builtin.uri:\n        url: http://localhost:8080/health\n        status_code: 200\n</code></pre>"},{"location":"migration-guide/deployment/#deployment-checklist","title":"Deployment Checklist","text":""},{"location":"migration-guide/deployment/#pre-deployment","title":"Pre-Deployment","text":"<ul> <li> Code reviewed and approved</li> <li> Tests passing in CI/CD</li> <li> Staging deployment successful</li> <li> Rollback plan documented</li> <li> Maintenance window scheduled</li> <li> Stakeholders notified</li> <li> Monitoring configured</li> <li> Backup completed</li> </ul>"},{"location":"migration-guide/deployment/#during-deployment","title":"During Deployment","text":"<ul> <li> Enable detailed logging</li> <li> Announce maintenance start</li> <li> Execute deployment playbook</li> <li> Monitor for errors</li> <li> Validate services</li> <li> Run smoke tests</li> <li> Check monitoring dashboards</li> </ul>"},{"location":"migration-guide/deployment/#post-deployment","title":"Post-Deployment","text":"<ul> <li> Announce completion</li> <li> Monitor for 4+ hours</li> <li> Verify metrics</li> <li> Check logs for errors</li> <li> Validate functionality</li> <li> Update documentation</li> <li> Conduct retrospective</li> </ul>"},{"location":"migration-guide/deployment/#best-practices","title":"Best Practices","text":""},{"location":"migration-guide/deployment/#dos","title":"Do's \u2705","text":"<ol> <li>Test in Lower Environments: Always deploy to dev/staging first</li> <li>Use Check Mode: Validate with <code>--check</code> before actual run</li> <li>Monitor Continuously: Watch metrics during and after deployment</li> <li>Automate Rollbacks: Have automated rollback procedures</li> <li>Communicate Clearly: Keep stakeholders informed</li> <li>Version Everything: Tag releases, track versions</li> <li>Document Changes: Maintain deployment logs</li> <li>Practice Rollbacks: Test rollback procedures regularly</li> </ol>"},{"location":"migration-guide/deployment/#donts","title":"Don'ts \u274c","text":"<ol> <li>Don't Deploy Fridays: Avoid end-of-week deployments</li> <li>Don't Skip Testing: Always test before production</li> <li>Don't Deploy Without Backup: Always have rollback plan</li> <li>Don't Ignore Warnings: Address all warnings before deploying</li> <li>Don't Deploy During Peak: Use maintenance windows</li> <li>Don't Deploy Alone: Have team support available</li> <li>Don't Skip Validation: Always run post-deployment checks</li> </ol>"},{"location":"migration-guide/deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"migration-guide/deployment/#deployment-failures","title":"Deployment Failures","text":"<p>Symptom: Playbook fails partway through</p> <p>Solution: <pre><code># Check where it failed\nansible-playbook deploy.yml --start-at-task=\"Task that failed\"\n\n# Run in step mode\nansible-playbook deploy.yml --step\n\n# Increase verbosity\nansible-playbook deploy.yml -vvv\n</code></pre></p>"},{"location":"migration-guide/deployment/#service-wont-start-after-deployment","title":"Service Won't Start After Deployment","text":"<p>Symptom: Application service fails to start</p> <p>Solution: <pre><code># Check service status\nansible all -m systemd -a \"name=myapp state=status\"\n\n# Check logs\nansible all -m shell -a \"journalctl -u myapp -n 50\"\n\n# Validate configuration\nansible all -m shell -a \"myapp --validate-config\"\n</code></pre></p>"},{"location":"migration-guide/deployment/#configuration-drift-detected","title":"Configuration Drift Detected","text":"<p>Symptom: Configuration differs from expected state</p> <p>Solution: <pre><code># Identify differences\nansible-playbook deploy.yml --check --diff\n\n# Re-run configuration\nansible-playbook deploy.yml --tags=config\n\n# Reset to known state\nansible-playbook deploy.yml --force\n</code></pre></p>"},{"location":"migration-guide/deployment/#next-steps","title":"Next Steps","text":"<p>Complete the migration:</p> <ol> <li>Review Conversion Guide - Ensure conversions are accurate</li> <li>Assessment Guide - Validate complexity assessment</li> <li>Examples - Review deployment examples</li> </ol> <p>Explore automation:</p> <ul> <li>AWX Documentation</li> <li>Ansible Best Practices</li> <li>GitOps Workflows</li> </ul> <p>Production Ready</p> <p>With proper planning, testing, and monitoring, your Ansible deployment will be smooth and reliable. Start small, automate incrementally, and scale with confidence.</p>"},{"location":"migration-guide/overview/","title":"Migration Guide Overview","text":"<p>This guide provides a comprehensive methodology for migrating from Chef to Ansible, leveraging SousChef's 38 MCP tools and proven enterprise practices.</p>"},{"location":"migration-guide/overview/#migration-philosophy","title":"Migration Philosophy","text":"<p>Start Small, Scale Smart</p> <p>Successful migrations follow an incremental approach: assess thoroughly, convert systematically, validate continuously, and deploy confidently.</p>"},{"location":"migration-guide/overview/#core-principles","title":"Core Principles","text":"<ol> <li>Assessment First: Understand your Chef infrastructure before converting</li> <li>Incremental Migration: Start with simple cookbooks, build expertise</li> <li>Continuous Validation: Test conversions at every step</li> <li>Automation-Driven: Leverage SousChef tools for consistency</li> <li>Documentation: Maintain clear records throughout the migration</li> </ol>"},{"location":"migration-guide/overview/#migration-phases","title":"Migration Phases","text":"<p>The migration process follows five distinct phases, each building on the previous:</p> <pre><code>graph LR\n    A[1. Discovery] --&gt; B[2. Assessment]\n    B --&gt; C[3. Conversion]\n    C --&gt; D[4. Validation]\n    D --&gt; E[5. Deployment]\n\n    style A fill:#e3f2fd\n    style B fill:#fff3e0\n    style C fill:#f3e5f5\n    style D fill:#e8f5e9\n    style E fill:#fce4ec</code></pre>"},{"location":"migration-guide/overview/#phase-1-discovery-inventory","title":"Phase 1: Discovery &amp; Inventory","text":"<p>Objective: Catalog all Chef infrastructure and dependencies.</p> <p>Activities: - Inventory all cookbooks and their dependencies - Identify Chef server configurations - Document data bags and environments - Map search queries and inventory sources - Catalog InSpec profiles and tests - Identify Habitat plans (if applicable)</p> <p>SousChef Tools: - <code>list_cookbook_structure</code> - Map cookbook organization - <code>read_cookbook_metadata</code> - Extract dependency information - <code>analyze_cookbook_dependencies</code> - Build dependency graphs - <code>analyze_chef_databag_usage</code> - Document data bag usage - <code>analyze_chef_environment_usage</code> - Catalog environments</p> <p>Deliverable: Complete inventory document with dependency map.</p>"},{"location":"migration-guide/overview/#phase-2-assessment-planning","title":"Phase 2: Assessment &amp; Planning","text":"<p>Objective: Evaluate migration complexity and create execution plan.</p> <p>Activities: - Assess migration complexity per cookbook - Identify risks and mitigation strategies - Prioritize migration order based on dependencies - Estimate effort and timeline - Plan resource allocation - Define success metrics</p> <p>SousChef Tools: - <code>assess_chef_migration_complexity</code> - Automated complexity scoring - <code>analyze_cookbook_dependencies</code> - Determine migration order - <code>generate_migration_plan</code> - Create detailed execution plan - <code>generate_migration_report</code> - Stakeholder documentation</p> <p>Deliverable: Migration plan with timeline, resources, and risk assessment.</p> <p>Assessment Criteria:</p> Complexity Factor Low Risk Medium Risk High Risk Cookbook size &lt; 5 recipes 5-15 recipes &gt; 15 recipes Custom resources 0-2 3-5 &gt; 5 Dependencies 0-3 4-7 &gt; 7 Data bag usage None 1-3 bags &gt; 3 bags Search queries 0-2 3-5 &gt; 5 Guard complexity Simple Moderate Complex/nested"},{"location":"migration-guide/overview/#phase-3-conversion-transformation","title":"Phase 3: Conversion &amp; Transformation","text":"<p>Objective: Convert Chef cookbooks to Ansible playbooks.</p> <p>Activities: - Convert recipes to playbooks - Transform custom resources to roles/modules - Convert ERB templates to Jinja2 - Migrate data bags to Ansible variables/vault - Transform environments to inventory groups - Convert Chef search to dynamic inventory - Generate AWX/AAP configurations (if applicable) - Migrate Habitat to containers (if applicable)</p> <p>SousChef Tools:</p> <p>Core Conversion: - <code>generate_playbook_from_recipe</code> - Recipe \u2192 playbook conversion - <code>convert_resource_to_task</code> - Individual resource conversion - <code>parse_template</code> - ERB \u2192 Jinja2 conversion - <code>parse_custom_resource</code> - Custom resource analysis</p> <p>Data &amp; Configuration: - <code>convert_chef_databag_to_vars</code> - Data bags \u2192 variables - <code>generate_ansible_vault_from_databags</code> - Encrypted data migration - <code>convert_chef_environment_to_inventory_group</code> - Environments \u2192 inventory - <code>convert_chef_search_to_inventory</code> - Search \u2192 dynamic inventory</p> <p>Enterprise Integration: - <code>generate_awx_job_template_from_cookbook</code> - AWX job templates - <code>generate_awx_workflow_from_chef_runlist</code> - AWX workflows - <code>generate_awx_project_from_cookbooks</code> - AWX project structure</p> <p>Habitat Migration: - <code>parse_habitat_plan</code> - Analyze Habitat plans - <code>convert_habitat_to_dockerfile</code> - Habitat \u2192 Docker - <code>generate_compose_from_habitat</code> - Multi-service orchestration</p> <p>Deliverable: Converted Ansible content with comprehensive test coverage.</p>"},{"location":"migration-guide/overview/#phase-4-validation-testing","title":"Phase 4: Validation &amp; Testing","text":"<p>Objective: Verify conversion accuracy and functional equivalence.</p> <p>Activities: - Validate conversion syntax and semantics - Test playbooks in development environment - Generate and execute InSpec validations - Perform security audits - Benchmark performance - Document discrepancies and workarounds</p> <p>SousChef Tools: - <code>validate_conversion</code> - Multi-dimensional validation - <code>generate_inspec_from_recipe</code> - Generate validation tests - <code>convert_inspec_to_test</code> - Convert existing InSpec to Ansible tests - <code>profile_cookbook_performance</code> - Performance profiling</p> <p>Validation Dimensions:</p> <ol> <li>Syntax Validation</li> <li>YAML syntax correctness</li> <li>Jinja2 template validity</li> <li> <p>Python syntax (custom modules)</p> </li> <li> <p>Semantic Validation</p> </li> <li>Logic equivalence to Chef</li> <li>Variable usage correctness</li> <li> <p>Resource dependency preservation</p> </li> <li> <p>Best Practice Validation</p> </li> <li>Ansible naming conventions</li> <li>Idempotency verification</li> <li> <p>Task organization standards</p> </li> <li> <p>Security Validation</p> </li> <li>Privilege escalation patterns</li> <li>Sensitive data handling</li> <li> <p>Vault encryption verification</p> </li> <li> <p>Performance Validation</p> </li> <li>Execution time benchmarks</li> <li>Resource utilization</li> <li>Optimization opportunities</li> </ol> <p>Deliverable: Validated playbooks with test results and acceptance criteria met.</p>"},{"location":"migration-guide/overview/#phase-5-deployment-cutover","title":"Phase 5: Deployment &amp; Cutover","text":"<p>Objective: Deploy Ansible content to production with minimal disruption.</p> <p>Activities: - Deploy to staging environment - Execute parallel runs (Chef + Ansible) - Perform blue/green or canary deployments - Monitor and compare results - Execute cutover plan - Decommission Chef infrastructure - Document lessons learned</p> <p>SousChef Tools: - <code>convert_chef_deployment_to_ansible_strategy</code> - Deployment patterns - <code>generate_blue_green_deployment_playbook</code> - Zero-downtime deployments - <code>generate_canary_deployment_strategy</code> - Gradual rollouts</p> <p>Deployment Strategies:</p> Blue/GreenCanaryParallel Run <p>Best for: Full environment swaps, quick rollback capability</p> <pre><code># Blue environment (current)\n- hosts: blue_servers\n  tasks:\n    - name: Deploy current version\n\n# Green environment (new)\n- hosts: green_servers\n  tasks:\n    - name: Deploy new version\n    - name: Run validation\n\n# Switch traffic\n- hosts: load_balancers\n  tasks:\n    - name: Point to green environment\n</code></pre> <p>Best for: Gradual rollout with monitoring</p> <pre><code># Stage 1: 10% traffic\n- hosts: canary_10pct\n  tasks:\n    - name: Deploy to 10% of fleet\n    - name: Monitor metrics\n\n# Stage 2: 50% traffic\n- hosts: canary_50pct\n  when: canary_10pct_success\n\n# Stage 3: 100% traffic\n- hosts: all_servers\n  when: canary_50pct_success\n</code></pre> <p>Best for: Risk mitigation, comparison testing</p> <pre><code># Run Chef (readonly/reporting mode)\n- hosts: all\n  tasks:\n    - name: Execute Chef in why-run mode\n      command: chef-client --why-run\n      register: chef_result\n\n# Run Ansible\n- hosts: all\n  tasks:\n    - name: Execute Ansible playbook\n      include_role:\n        name: migrated_cookbook\n      register: ansible_result\n\n# Compare results\n- hosts: localhost\n  tasks:\n    - name: Analyze differences\n      debug:\n        msg: \"Comparison: {{ chef_result }} vs {{ ansible_result }}\"\n</code></pre> <p>Deliverable: Production deployment with monitoring and rollback procedures.</p>"},{"location":"migration-guide/overview/#migration-patterns","title":"Migration Patterns","text":""},{"location":"migration-guide/overview/#pattern-1-simple-cookbook-low-complexity","title":"Pattern 1: Simple Cookbook (Low Complexity)","text":"<p>Characteristics: - 1-3 recipes - No custom resources - Minimal dependencies - No data bags or search</p> <p>Recommended Approach: 1. Direct conversion with <code>generate_playbook_from_recipe</code> 2. Manual review and adjustment 3. Basic validation with <code>validate_conversion</code> 4. Deploy to dev/staging 5. Production deployment</p> <p>Timeline: 1-2 days per cookbook</p>"},{"location":"migration-guide/overview/#pattern-2-standard-application-cookbook-medium-complexity","title":"Pattern 2: Standard Application Cookbook (Medium Complexity)","text":"<p>Characteristics: - 5-10 recipes - 1-3 custom resources - Multiple dependencies - Uses data bags and/or environments - Some Chef search usage</p> <p>Recommended Approach: 1. Assess with <code>assess_chef_migration_complexity</code> 2. Plan migration order with <code>analyze_cookbook_dependencies</code> 3. Convert recipes systematically 4. Transform custom resources to roles 5. Migrate data bags to vars/vault 6. Convert search to dynamic inventory 7. Comprehensive validation 8. Staged deployment</p> <p>Timeline: 1-2 weeks per cookbook</p>"},{"location":"migration-guide/overview/#pattern-3-enterprise-cookbook-suite-high-complexity","title":"Pattern 3: Enterprise Cookbook Suite (High Complexity)","text":"<p>Characteristics: - 15+ recipes per cookbook - 5+ custom resources - Complex dependency chains - Heavy data bag and search usage - Multiple environments - Requires AWX/AAP integration</p> <p>Recommended Approach: 1. Detailed assessment with executive reporting 2. Create comprehensive migration plan 3. Pilot conversion with simple dependencies first 4. Incremental conversion by component 5. Build custom Ansible modules for complex resources 6. Implement dynamic inventory for search 7. Generate AWX project structure 8. Extensive testing including performance 9. Blue/green deployment to production</p> <p>Timeline: 2-6 weeks per cookbook</p>"},{"location":"migration-guide/overview/#pattern-4-habitat-to-container-migration","title":"Pattern 4: Habitat to Container Migration","text":"<p>Characteristics: - Habitat plan files (plan.sh) - Service orchestration - Multi-package dependencies - Supervisor configuration</p> <p>Recommended Approach: 1. Parse Habitat plans with <code>parse_habitat_plan</code> 2. Convert to Dockerfiles with <code>convert_habitat_to_dockerfile</code> 3. Generate docker-compose with <code>generate_compose_from_habitat</code> 4. Implement health checks and service dependencies 5. Migrate supervisor config to container orchestration 6. Deploy to Kubernetes/OpenShift (if applicable)</p> <p>Timeline: 1-3 weeks per application</p>"},{"location":"migration-guide/overview/#best-practices","title":"Best Practices","text":""},{"location":"migration-guide/overview/#dos","title":"Do's \u2705","text":"<ol> <li>Start with Assessment</li> <li>Always run <code>assess_chef_migration_complexity</code> first</li> <li> <p>Document findings before conversion</p> </li> <li> <p>Follow Dependency Order</p> </li> <li>Use <code>analyze_cookbook_dependencies</code> to determine migration sequence</li> <li> <p>Migrate dependency cookbooks before dependent cookbooks</p> </li> <li> <p>Validate Continuously</p> </li> <li>Run <code>validate_conversion</code> after each conversion</li> <li> <p>Test in dev environment before moving to staging</p> </li> <li> <p>Use Version Control</p> </li> <li>Commit Ansible content to Git immediately</li> <li> <p>Tag milestones and working versions</p> </li> <li> <p>Document Decisions</p> </li> <li>Record why certain conversions were done manually</li> <li> <p>Document workarounds and limitations</p> </li> <li> <p>Test Idempotency</p> </li> <li>Run playbooks multiple times to verify idempotency</li> <li> <p>Compare first run vs subsequent runs</p> </li> <li> <p>Profile Performance</p> </li> <li>Use <code>profile_cookbook_performance</code> for large cookbooks</li> <li> <p>Identify and optimize bottlenecks</p> </li> <li> <p>Leverage InSpec</p> </li> <li>Convert existing InSpec tests with <code>convert_inspec_to_test</code></li> <li>Generate new tests with <code>generate_inspec_from_recipe</code></li> </ol>"},{"location":"migration-guide/overview/#donts","title":"Don'ts \u274c","text":"<ol> <li>Don't Skip Assessment</li> <li>Jumping directly to conversion often leads to rework</li> <li> <p>Understanding complexity upfront prevents surprises</p> </li> <li> <p>Don't Migrate Out of Order</p> </li> <li>Migrating dependent cookbooks before dependencies causes failures</li> <li> <p>Always follow the dependency graph</p> </li> <li> <p>Don't Ignore Validation Errors</p> </li> <li>Validation warnings often indicate real issues</li> <li> <p>Fix errors before proceeding to next cookbook</p> </li> <li> <p>Don't Convert Everything</p> </li> <li>Some Chef patterns may not need direct conversion</li> <li> <p>Consider modernizing during migration (e.g., Habitat \u2192 containers)</p> </li> <li> <p>Don't Rush Production</p> </li> <li>Thorough testing in dev/staging prevents production issues</li> <li> <p>Parallel runs provide confidence before cutover</p> </li> <li> <p>Don't Lose Chef Knowledge</p> </li> <li>Document Chef-specific patterns for reference</li> <li> <p>Retain Chef expertise during transition period</p> </li> <li> <p>Don't Forget Security</p> </li> <li>Encrypt sensitive data with Ansible Vault</li> <li>Validate privilege escalation patterns</li> <li> <p>Audit converted playbooks for security issues</p> </li> <li> <p>Don't Work in Isolation</p> </li> <li>Involve operations teams early</li> <li>Share migration progress and learnings</li> </ol>"},{"location":"migration-guide/overview/#success-metrics","title":"Success Metrics","text":"<p>Track these metrics to measure migration success:</p>"},{"location":"migration-guide/overview/#quantitative-metrics","title":"Quantitative Metrics","text":"Metric Target Measurement Conversion accuracy &gt; 95% Automated validation pass rate Idempotency 100% Repeat execution identical Performance \u00b1 10% of Chef Execution time comparison Test coverage &gt; 90% Tasks with validation tests Migration velocity Planned timeline \u00b1 15% Actual vs planned schedule"},{"location":"migration-guide/overview/#qualitative-metrics","title":"Qualitative Metrics","text":"<ul> <li>Team Confidence: Operations team comfortable with Ansible</li> <li>Documentation Quality: Comprehensive and accessible</li> <li>Rollback Readiness: Clear procedures tested</li> <li>Knowledge Transfer: Team trained on Ansible patterns</li> <li>Stakeholder Satisfaction: Business needs met</li> </ul>"},{"location":"migration-guide/overview/#common-challenges-solutions","title":"Common Challenges &amp; Solutions","text":""},{"location":"migration-guide/overview/#challenge-complex-chef-guards","title":"Challenge: Complex Chef Guards","text":"<p>Problem: Chef guards with Ruby blocks don't convert cleanly</p> <p>Solution: - Use SousChef's enhanced guard handling - For complex guards, convert to Ansible facts and conditions - Example:   <pre><code># Chef\nonly_if { ::File.exist?('/path') &amp;&amp; node['attr'] == 'value' }\n\n# Ansible\nwhen:\n  - path_check.stat.exists\n  - ansible_local.attr == 'value'\n</code></pre></p>"},{"location":"migration-guide/overview/#challenge-custom-resource-complexity","title":"Challenge: Custom Resource Complexity","text":"<p>Problem: Complex custom resources have no Ansible equivalent</p> <p>Solution: - Convert simple resources to roles - Build custom Ansible modules for complex logic - Use <code>parse_custom_resource</code> to understand interface - Preserve behavior, not implementation</p>"},{"location":"migration-guide/overview/#challenge-chef-search-patterns","title":"Challenge: Chef Search Patterns","text":"<p>Problem: Sophisticated search queries hard to replicate</p> <p>Solution: - Use <code>convert_chef_search_to_inventory</code> for patterns - Implement dynamic inventory scripts - Consider AWS/Azure dynamic inventory if cloud-based - Cache inventory for performance</p>"},{"location":"migration-guide/overview/#challenge-data-bag-encryption","title":"Challenge: Data Bag Encryption","text":"<p>Problem: Chef encrypted data bags use different encryption</p> <p>Solution: - Use <code>generate_ansible_vault_from_databags</code> - Decrypt Chef data bags, re-encrypt with Ansible Vault - Update key management procedures - Test encrypted variable access thoroughly</p>"},{"location":"migration-guide/overview/#challenge-environment-specific-logic","title":"Challenge: Environment-Specific Logic","text":"<p>Problem: Chef environments affect attribute precedence</p> <p>Solution: - Convert to inventory group_vars structure - Use <code>convert_chef_environment_to_inventory_group</code> - Leverage Ansible's variable precedence (group_vars, host_vars) - Document variable precedence mapping</p>"},{"location":"migration-guide/overview/#migration-checklist","title":"Migration Checklist","text":"<p>Use this checklist to track progress through migration phases:</p>"},{"location":"migration-guide/overview/#pre-migration","title":"Pre-Migration","text":"<ul> <li> Inventory all Chef cookbooks</li> <li> Document dependencies</li> <li> Identify Habitat plans (if any)</li> <li> Catalog data bags and environments</li> <li> Establish baseline metrics (performance, reliability)</li> </ul>"},{"location":"migration-guide/overview/#assessment-phase","title":"Assessment Phase","text":"<ul> <li> Run complexity assessment for each cookbook</li> <li> Generate dependency graph</li> <li> Create migration plan with timeline</li> <li> Identify risks and mitigation strategies</li> <li> Allocate resources (people, environments)</li> <li> Define success criteria</li> </ul>"},{"location":"migration-guide/overview/#conversion-phase","title":"Conversion Phase","text":"<ul> <li> Set up Git repository for Ansible content</li> <li> Convert cookbooks in dependency order</li> <li> Transform custom resources</li> <li> Migrate data bags to variables/vault</li> <li> Convert environments to inventory</li> <li> Generate AWX configurations (if applicable)</li> <li> Convert Habitat to containers (if applicable)</li> </ul>"},{"location":"migration-guide/overview/#validation-phase","title":"Validation Phase","text":"<ul> <li> Validate syntax for all converted content</li> <li> Test in development environment</li> <li> Generate and execute InSpec tests</li> <li> Verify idempotency</li> <li> Perform security audit</li> <li> Benchmark performance</li> <li> Document any workarounds</li> </ul>"},{"location":"migration-guide/overview/#deployment-phase","title":"Deployment Phase","text":"<ul> <li> Deploy to staging environment</li> <li> Execute parallel Chef/Ansible runs</li> <li> Validate results match Chef</li> <li> Test rollback procedures</li> <li> Deploy to production (blue/green or canary)</li> <li> Monitor post-deployment</li> <li> Decommission Chef infrastructure</li> <li> Document lessons learned</li> </ul>"},{"location":"migration-guide/overview/#next-steps","title":"Next Steps","text":"<p>Now that you understand the overall migration methodology:</p> <ol> <li>Assessment - Learn how to assess cookbook complexity and create migration plans</li> <li>Conversion - Dive deep into conversion techniques and patterns</li> <li>Deployment - Master deployment strategies and AWX/AAP integration</li> </ol> <p>Or explore specific topics:</p> <ul> <li>MCP Tools Reference - All 38 available tools</li> <li>CLI Usage - Command-line workflow</li> <li>Examples - Real-world migration patterns</li> </ul>"},{"location":"migration-guide/overview/#additional-resources","title":"Additional Resources","text":"<ul> <li>SousChef Documentation: Full tool reference and examples</li> <li>Ansible Best Practices: docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html</li> <li>AWX Documentation: ansible.readthedocs.io/projects/awx/</li> <li>InSpec Documentation: docs.chef.io/inspec/</li> </ul> <p>Ready to Migrate?</p> <p>With SousChef's 38 tools and this methodology, you have everything needed for a successful Chef-to-Ansible migration. Start with assessment, follow the phases, and leverage automation throughout the process.</p>"},{"location":"user-guide/cli-usage/","title":"CLI Usage Guide","text":"<p>SousChef provides a powerful command-line interface for direct cookbook parsing, conversion, and analysis without requiring an MCP client or AI assistant.</p> <p>When to Use CLI vs MCP</p> <ul> <li>CLI: Direct parsing, automation scripts, CI/CD pipelines, quick analysis</li> <li>MCP: Complex migrations, AI-assisted conversions, interactive planning, advanced workflows</li> </ul>"},{"location":"user-guide/cli-usage/#installation","title":"Installation","text":"<p>The CLI is automatically installed with SousChef:</p> <pre><code># PyPI installation\npip install mcp-souschef\n\n# Verify installation\nsouschef-cli --help\n</code></pre>"},{"location":"user-guide/cli-usage/#quick-reference","title":"Quick Reference","text":"Command Purpose Example <code>recipe</code> Parse Chef recipe files <code>souschef-cli recipe default.rb</code> <code>template</code> Convert ERB to Jinja2 <code>souschef-cli template nginx.conf.erb</code> <code>resource</code> Parse custom resources <code>souschef-cli resource user.rb</code> <code>attributes</code> Parse attribute files <code>souschef-cli attributes default.rb</code> <code>metadata</code> Parse cookbook metadata <code>souschef-cli metadata metadata.rb</code> <code>structure</code> Display cookbook tree <code>souschef-cli structure /path/to/cookbook</code> <code>convert</code> Convert resources to tasks <code>souschef-cli convert package nginx</code> <code>cookbook</code> Analyze entire cookbook <code>souschef-cli cookbook /path/to/cookbook</code> <code>inspec-parse</code> Parse InSpec profiles <code>souschef-cli inspec-parse profile/</code> <code>inspec-convert</code> Convert InSpec to tests <code>souschef-cli inspec-convert profile/</code> <code>inspec-generate</code> Generate InSpec from recipe <code>souschef-cli inspec-generate recipe.rb</code> <code>profile</code> Profile cookbook performance <code>souschef-cli profile /path/to/cookbook</code> <code>profile-operation</code> Profile specific operation <code>souschef-cli profile-operation recipe default.rb</code> <code>ls</code> List directory contents <code>souschef-cli ls recipes/</code> <code>cat</code> Display file contents <code>souschef-cli cat default.rb</code>"},{"location":"user-guide/cli-usage/#core-commands","title":"Core Commands","text":""},{"location":"user-guide/cli-usage/#recipe","title":"recipe","text":"<p>Parse Chef recipe files and extract resources, guards, and dependencies.</p> <p>Syntax: <pre><code>souschef-cli recipe PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to the Chef recipe (.rb) file - <code>--format</code>: Output format - <code>text</code> (default) or <code>json</code></p> <p>Examples:</p> Basic UsageJSON OutputSave to File <pre><code>souschef-cli recipe examples/database/recipes/default.rb\n</code></pre> <pre><code>souschef-cli recipe examples/database/recipes/default.rb --format json\n</code></pre> <pre><code>souschef-cli recipe default.rb --format json &gt; recipe_analysis.json\n</code></pre> <p>Output Format:</p> <pre><code>Recipe: default.rb\n==================\n\nResource 1:\n  Type: package\n  Name: postgresql\n  Action: install\n  Properties:\n    - version: 12.3\n\nResource 2:\n  Type: service\n  Name: postgresql\n  Action: enable, start\n  Notifies: restart postgresql (delayed)\n</code></pre> <p>Use Cases: - Understanding recipe structure before conversion - Extracting resource lists for documentation - Identifying dependencies and notification chains - Automation scripts for bulk analysis</p>"},{"location":"user-guide/cli-usage/#template","title":"template","text":"<p>Parse ERB templates and convert to Jinja2 with variable extraction.</p> <p>Syntax: <pre><code>souschef-cli template PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to the ERB template file - <code>--format</code>: Output format - <code>json</code> (default) or <code>text</code></p> <p>Examples:</p> Convert TemplateExtract Variables <pre><code>souschef-cli template templates/default/nginx.conf.erb\n</code></pre> <pre><code>souschef-cli template nginx.conf.erb --format json | jq '.variables'\n</code></pre> <p>Output Format (JSON):</p> <pre><code>{\n  \"original_template\": \"&lt;%= @port %&gt;\",\n  \"jinja2_template\": \"{{ port }}\",\n  \"variables\": [\"port\", \"server_name\", \"root_path\"],\n  \"conversion_notes\": [\n    \"Converted &lt;%= var %&gt; to {{ var }}\",\n    \"Converted &lt;% if condition %&gt; to {% if condition %}\"\n  ]\n}\n</code></pre> <p>ERB to Jinja2 Conversion Examples:</p> ERB Syntax Jinja2 Syntax <code>&lt;%= @variable %&gt;</code> <code>{{ variable }}</code> <code>&lt;% if @enabled %&gt;</code> <code>{% if enabled %}</code> <code>&lt;% @items.each do \\|item\\| %&gt;</code> <code>{% for item in items %}</code> <code>&lt;%# comment %&gt;</code> <code>{# comment #}</code>"},{"location":"user-guide/cli-usage/#resource","title":"resource","text":"<p>Parse custom Chef resources and LWRPs to extract properties and actions.</p> <p>Syntax: <pre><code>souschef-cli resource PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to custom resource (.rb) file - <code>--format</code>: Output format - <code>json</code> (default) or <code>text</code></p> <p>Examples:</p> <pre><code># Parse custom resource\nsouschef-cli resource resources/database_user.rb\n\n# Get properties list\nsouschef-cli resource resources/app_config.rb --format json | jq '.properties'\n</code></pre> <p>Output Format (JSON):</p> <pre><code>{\n  \"resource_type\": \"database_user\",\n  \"properties\": [\n    {\n      \"name\": \"username\",\n      \"type\": \"String\",\n      \"required\": true,\n      \"default\": null\n    },\n    {\n      \"name\": \"password\",\n      \"type\": \"String\",\n      \"required\": false,\n      \"default\": \"changeme\"\n    }\n  ],\n  \"actions\": [\"create\", \"delete\"],\n  \"default_action\": \"create\"\n}\n</code></pre>"},{"location":"user-guide/cli-usage/#attributes","title":"attributes","text":"<p>Parse Chef attribute files with precedence level detection.</p> <p>Syntax: <pre><code>souschef-cli attributes PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to attributes (.rb) file - <code>--format</code>: Output format - <code>text</code> (default) or <code>json</code></p> <p>Examples:</p> <pre><code># Parse attributes\nsouschef-cli attributes attributes/default.rb\n\n# Show only override-level attributes\nsouschef-cli attributes default.rb --format json | jq '.override'\n</code></pre> <p>Output Format:</p> <pre><code>Attributes: default.rb\n=====================\n\nDefault Level:\n  app.port = 8080\n  app.workers = 4\n\nOverride Level:\n  app.environment = \"production\"\n\nNormal Level:\n  app.enabled = true\n</code></pre> <p>Precedence Levels Detected: - <code>default</code> - Standard defaults - <code>force_default</code> - Override default precedence - <code>normal</code> - Node-specific values - <code>override</code> - Override normal values - <code>force_override</code> - Highest priority - <code>automatic</code> - System-discovered values</p>"},{"location":"user-guide/cli-usage/#metadata","title":"metadata","text":"<p>Parse cookbook metadata.rb files for dependencies and version information.</p> <p>Syntax: <pre><code>souschef-cli metadata PATH\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to metadata.rb file</p> <p>Example:</p> <pre><code>souschef-cli metadata examples/database/metadata.rb\n</code></pre> <p>Output Format:</p> <pre><code>Cookbook: database\nVersion: 2.1.0\nMaintainer: DevOps Team &lt;devops@example.com&gt;\nLicense: Apache-2.0\n\nDependencies:\n  - postgresql (&gt;= 1.0.0)\n  - apt (~&gt; 7.0)\n\nSupports:\n  - ubuntu (&gt;= 18.04)\n  - centos (&gt;= 7.0)\n</code></pre>"},{"location":"user-guide/cli-usage/#structure","title":"structure","text":"<p>Display complete cookbook directory hierarchy.</p> <p>Syntax: <pre><code>souschef-cli structure PATH\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to cookbook root directory</p> <p>Example:</p> <pre><code>souschef-cli structure examples/database\n</code></pre> <p>Output Format:</p> <pre><code>database/\n\u251c\u2500\u2500 metadata.rb\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 attributes/\n\u2502   \u2514\u2500\u2500 default.rb\n\u251c\u2500\u2500 recipes/\n\u2502   \u251c\u2500\u2500 default.rb\n\u2502   \u251c\u2500\u2500 install.rb\n\u2502   \u2514\u2500\u2500 configure.rb\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 default/\n\u2502       \u251c\u2500\u2500 database.yml.erb\n\u2502       \u2514\u2500\u2500 init.sql.erb\n\u2514\u2500\u2500 resources/\n    \u2514\u2500\u2500 user.rb\n\nSummary:\n  Recipes: 3\n  Attributes: 1\n  Templates: 2\n  Resources: 1\n</code></pre>"},{"location":"user-guide/cli-usage/#convert","title":"convert","text":"<p>Convert individual Chef resources to Ansible tasks.</p> <p>Syntax: <pre><code>souschef-cli convert RESOURCE_TYPE RESOURCE_NAME [OPTIONS]\n</code></pre></p> <p>Options: - <code>RESOURCE_TYPE</code> (required): Chef resource type (package, service, template, etc.) - <code>RESOURCE_NAME</code> (required): Resource name - <code>--action</code>: Chef action (default: create) - <code>--properties</code>: Additional properties as JSON string - <code>--format</code>: Output format - <code>yaml</code> (default) or <code>json</code></p> <p>Examples:</p> Package ResourceService ResourceTemplate ResourceFile Resource <pre><code>souschef-cli convert package nginx --action install\n</code></pre> <p>Output: <pre><code>- name: Install nginx\n  ansible.builtin.package:\n    name: nginx\n    state: present\n</code></pre></p> <pre><code>souschef-cli convert service nginx --action 'enable,start'\n</code></pre> <p>Output: <pre><code>- name: Enable and start nginx\n  ansible.builtin.service:\n    name: nginx\n    enabled: true\n    state: started\n</code></pre></p> <pre><code>souschef-cli convert template /etc/nginx/nginx.conf \\\n  --action create \\\n  --properties '{\"source\": \"nginx.conf.erb\", \"owner\": \"root\", \"mode\": \"0644\"}'\n</code></pre> <p>Output: <pre><code>- name: Create /etc/nginx/nginx.conf\n  ansible.builtin.template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    owner: root\n    mode: '0644'\n</code></pre></p> <pre><code>souschef-cli convert file /var/log/app.log \\\n  --action create \\\n  --properties '{\"owner\": \"app\", \"group\": \"app\", \"mode\": \"0644\"}'\n</code></pre> <p>Supported Resource Types:</p> Chef Resource Ansible Module Notes <code>package</code> <code>ansible.builtin.package</code> Cross-platform package management <code>service</code> <code>ansible.builtin.service</code> Service state management <code>template</code> <code>ansible.builtin.template</code> Template file deployment <code>file</code> <code>ansible.builtin.file</code> File/directory management <code>directory</code> <code>ansible.builtin.file</code> Directory creation <code>user</code> <code>ansible.builtin.user</code> User account management <code>group</code> <code>ansible.builtin.group</code> Group management <code>execute</code> <code>ansible.builtin.command</code> Command execution <code>bash</code> <code>ansible.builtin.shell</code> Shell script execution <code>git</code> <code>ansible.builtin.git</code> Git repository management <code>cron</code> <code>ansible.builtin.cron</code> Cron job management <code>mount</code> <code>ansible.posix.mount</code> Filesystem mounting"},{"location":"user-guide/cli-usage/#cookbook","title":"cookbook","text":"<p>Comprehensive analysis of entire Chef cookbook.</p> <p>Syntax: <pre><code>souschef-cli cookbook COOKBOOK_PATH [OPTIONS]\n</code></pre></p> <p>Options: - <code>COOKBOOK_PATH</code> (required): Path to cookbook root directory - <code>--output</code>, <code>-o</code>: Output directory for results - <code>--dry-run</code>: Show what would be analyzed without processing</p> <p>Example:</p> <pre><code>souschef-cli cookbook examples/database\n</code></pre> <p>Output:</p> <pre><code>Analyzing cookbook: database\n==================================================\n\n\ud83d\udccb Metadata:\n--------------------------------------------------\nCookbook: database\nVersion: 2.1.0\nDependencies: postgresql (&gt;= 1.0.0), apt (~&gt; 7.0)\n\n\ud83d\udcc1 Structure:\n--------------------------------------------------\ndatabase/\n\u251c\u2500\u2500 metadata.rb\n\u251c\u2500\u2500 recipes/ (3 files)\n\u251c\u2500\u2500 attributes/ (1 file)\n\u251c\u2500\u2500 templates/ (2 files)\n\u2514\u2500\u2500 resources/ (1 file)\n\n\ud83e\uddd1\u200d\ud83c\udf73 Recipes:\n--------------------------------------------------\n  default.rb:\n    Resource 1: package[postgresql]\n    Resource 2: service[postgresql]\n    Resource 3: template[/etc/postgresql/postgresql.conf]\n    ... (7 more resources)\n\n\ud83d\udd27 Custom Resources:\n--------------------------------------------------\n  user.rb:\n    Type: database_user\n    Properties: 3\n    Actions: create, delete\n\n\ud83d\udcc4 Templates:\n--------------------------------------------------\n  database.yml.erb:\n    Variables: 4\n    port, host, username, password\n</code></pre>"},{"location":"user-guide/cli-usage/#inspec-commands","title":"InSpec Commands","text":""},{"location":"user-guide/cli-usage/#inspec-parse","title":"inspec-parse","text":"<p>Parse InSpec profiles and extract control definitions.</p> <p>Syntax: <pre><code>souschef-cli inspec-parse PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to InSpec profile directory or .rb control file - <code>--format</code>: Output format - <code>json</code> (default) or <code>text</code></p> <p>Example:</p> <pre><code>souschef-cli inspec-parse tests/inspec/nginx-profile\n</code></pre> <p>Output Format (JSON):</p> <pre><code>{\n  \"profile\": \"nginx-baseline\",\n  \"version\": \"1.0.0\",\n  \"controls\": [\n    {\n      \"id\": \"nginx-01\",\n      \"title\": \"Verify nginx installation\",\n      \"impact\": 1.0,\n      \"tests\": [\n        \"Package nginx should be installed\",\n        \"Service nginx should be running\"\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/cli-usage/#inspec-convert","title":"inspec-convert","text":"<p>Convert InSpec controls to Testinfra or Ansible assert tasks.</p> <p>Syntax: <pre><code>souschef-cli inspec-convert PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to InSpec profile directory or .rb control file - <code>--format</code>: Output format - <code>testinfra</code> (default) or <code>ansible_assert</code></p> <p>Examples:</p> Convert to TestinfraConvert to Ansible Assert <pre><code>souschef-cli inspec-convert tests/inspec/nginx-profile --format testinfra\n</code></pre> <p>Output: <pre><code>def test_nginx_installed(host):\n    nginx = host.package(\"nginx\")\n    assert nginx.is_installed\n\ndef test_nginx_running(host):\n    nginx = host.service(\"nginx\")\n    assert nginx.is_running\n    assert nginx.is_enabled\n</code></pre></p> <pre><code>souschef-cli inspec-convert tests/inspec/nginx-profile --format ansible_assert\n</code></pre> <p>Output: <pre><code>- name: Verify nginx installation\n  assert:\n    that:\n      - \"'nginx' in ansible_facts.packages\"\n    fail_msg: \"nginx package is not installed\"\n\n- name: Verify nginx service\n  assert:\n    that:\n      - nginx_service.status.ActiveState == \"active\"\n    fail_msg: \"nginx service is not running\"\n</code></pre></p>"},{"location":"user-guide/cli-usage/#inspec-generate","title":"inspec-generate","text":"<p>Generate InSpec controls from Chef recipes.</p> <p>Syntax: <pre><code>souschef-cli inspec-generate PATH [--format FORMAT]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to Chef recipe (.rb) file - <code>--format</code>: Output format - <code>text</code> (default) or <code>json</code></p> <p>Example:</p> <pre><code>souschef-cli inspec-generate recipes/default.rb &gt; controls/generated.rb\n</code></pre> <p>Output Format:</p> <pre><code>control 'package-nginx' do\n  impact 1.0\n  title 'Verify nginx package installation'\n  desc 'Generated from recipe: default.rb'\n\n  describe package('nginx') do\n    it { should be_installed }\n  end\nend\n\ncontrol 'service-nginx' do\n  impact 1.0\n  title 'Verify nginx service state'\n  desc 'Generated from recipe: default.rb'\n\n  describe service('nginx') do\n    it { should be_enabled }\n    it { should be_running }\n  end\nend\n</code></pre>"},{"location":"user-guide/cli-usage/#performance-commands","title":"Performance Commands","text":""},{"location":"user-guide/cli-usage/#profile","title":"profile","text":"<p>Profile entire cookbook parsing performance.</p> <p>Syntax: <pre><code>souschef-cli profile COOKBOOK_PATH [OPTIONS]\n</code></pre></p> <p>Options: - <code>COOKBOOK_PATH</code> (required): Path to cookbook root directory - <code>--output</code>, <code>-o</code>: Save report to file instead of stdout</p> <p>Example:</p> <pre><code>souschef-cli profile examples/database --output perf_report.txt\n</code></pre> <p>Output Format:</p> <pre><code>Cookbook Performance Report\n===========================\nCookbook: database\nDate: 2026-01-09 12:00:00\n\nOperation Summary:\n--------------------------------------------------\nRecipes:        0.234s  (3 files)   78ms avg\nAttributes:     0.045s  (1 file)    45ms avg\nTemplates:      0.089s  (2 files)   44ms avg\nResources:      0.012s  (1 file)    12ms avg\n--------------------------------------------------\nTotal Time:     0.380s\nPeak Memory:    45.2 MB\n\nPerformance Recommendations:\n\u2022 Recipe parsing is optimal (&lt; 100ms per file)\n\u2022 No performance issues detected\n\u2022 Total parse time within acceptable range\n\nDetailed Breakdown:\n--------------------------------------------------\nrecipes/default.rb       89ms   12.3 MB\nrecipes/install.rb       78ms   10.1 MB\nrecipes/configure.rb     67ms   11.8 MB\nattributes/default.rb    45ms   4.2 MB\ntemplates/database.yml   44ms   2.1 MB\ntemplates/init.sql       45ms   2.3 MB\nresources/user.rb        12ms   3.1 MB\n</code></pre>"},{"location":"user-guide/cli-usage/#profile-operation","title":"profile-operation","text":"<p>Profile a specific parsing operation with detailed statistics.</p> <p>Syntax: <pre><code>souschef-cli profile-operation OPERATION PATH [OPTIONS]\n</code></pre></p> <p>Options: - <code>OPERATION</code> (required): Operation type - <code>recipe</code>, <code>attributes</code>, <code>resource</code>, or <code>template</code> - <code>PATH</code> (required): Path to file to parse - <code>--detailed</code>: Show detailed function call statistics (cProfile data)</p> <p>Examples:</p> Basic ProfilingDetailed Profiling <pre><code>souschef-cli profile-operation recipe recipes/default.rb\n</code></pre> <p>Output: <pre><code>Operation: recipe\nFile: recipes/default.rb\n\nExecution Time: 89.4ms\nPeak Memory: 12.3 MB\n\nStatus: \u2713 Performance is good\n</code></pre></p> <pre><code>souschef-cli profile-operation recipe recipes/default.rb --detailed\n</code></pre> <p>Output: <pre><code>Operation: recipe\nFile: recipes/default.rb\n\nExecution Time: 89.4ms\nPeak Memory: 12.3 MB\n\nTop Functions by Time:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n45.2ms  parse_resource_block\n12.1ms  extract_properties\n8.7ms   resolve_guards\n6.3ms   parse_ruby_ast\n...\n\nFunction Call Statistics:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nparse_resource_block:     15 calls\nextract_properties:       45 calls\nresolve_guards:          12 calls\n\nStatus: \u2713 Performance is good\n</code></pre></p>"},{"location":"user-guide/cli-usage/#utility-commands","title":"Utility Commands","text":""},{"location":"user-guide/cli-usage/#ls","title":"ls","text":"<p>List directory contents with filtering.</p> <p>Syntax: <pre><code>souschef-cli ls PATH [--pattern PATTERN]\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to directory - <code>--pattern</code>: Glob pattern for filtering (e.g., \"*.rb\")</p> <p>Examples:</p> <pre><code># List all files\nsouschef-cli ls recipes/\n\n# List only Ruby files\nsouschef-cli ls recipes/ --pattern \"*.rb\"\n\n# List templates\nsouschef-cli ls templates/default/ --pattern \"*.erb\"\n</code></pre>"},{"location":"user-guide/cli-usage/#cat","title":"cat","text":"<p>Display file contents.</p> <p>Syntax: <pre><code>souschef-cli cat PATH\n</code></pre></p> <p>Options: - <code>PATH</code> (required): Path to file</p> <p>Example:</p> <pre><code>souschef-cli cat recipes/default.rb\n</code></pre>"},{"location":"user-guide/cli-usage/#output-formats","title":"Output Formats","text":""},{"location":"user-guide/cli-usage/#text-format","title":"Text Format","text":"<p>Human-readable format with structured sections.</p> <p>Best for: - Console output - Quick inspection - Log files</p> <p>Example: <pre><code>Resource 1:\n  Type: package\n  Name: nginx\n  Action: install\n</code></pre></p>"},{"location":"user-guide/cli-usage/#json-format","title":"JSON Format","text":"<p>Machine-readable structured data.</p> <p>Best for: - Automation scripts - CI/CD pipelines - Data processing</p> <p>Example: <pre><code>{\n  \"resources\": [\n    {\n      \"type\": \"package\",\n      \"name\": \"nginx\",\n      \"action\": \"install\"\n    }\n  ]\n}\n</code></pre></p> <p>Processing JSON:</p> <pre><code># Extract specific fields with jq\nsouschef-cli recipe default.rb --format json | jq '.resources[].name'\n\n# Count resources\nsouschef-cli recipe default.rb --format json | jq '.resources | length'\n\n# Filter by resource type\nsouschef-cli recipe default.rb --format json | jq '.resources[] | select(.type==\"package\")'\n</code></pre>"},{"location":"user-guide/cli-usage/#common-workflows","title":"Common Workflows","text":""},{"location":"user-guide/cli-usage/#bulk-recipe-analysis","title":"Bulk Recipe Analysis","text":"<p>Analyze multiple recipes in a directory:</p> <pre><code>for recipe in recipes/*.rb; do\n  echo \"Analyzing: $recipe\"\n  souschef-cli recipe \"$recipe\" --format json &gt; \"analysis/$(basename \"$recipe\" .rb).json\"\ndone\n</code></pre>"},{"location":"user-guide/cli-usage/#generate-migration-report","title":"Generate Migration Report","text":"<p>Create comprehensive migration analysis:</p> <pre><code>#!/bin/bash\nCOOKBOOK_PATH=\"$1\"\nOUTPUT_DIR=\"migration_report\"\n\nmkdir -p \"$OUTPUT_DIR\"\n\n# Analyze structure\nsouschef-cli structure \"$COOKBOOK_PATH\" &gt; \"$OUTPUT_DIR/structure.txt\"\n\n# Parse all recipes\nfor recipe in \"$COOKBOOK_PATH/recipes\"/*.rb; do\n  name=$(basename \"$recipe\" .rb)\n  souschef-cli recipe \"$recipe\" --format json &gt; \"$OUTPUT_DIR/recipe_${name}.json\"\ndone\n\n# Profile performance\nsouschef-cli profile \"$COOKBOOK_PATH\" --output \"$OUTPUT_DIR/performance.txt\"\n\necho \"Migration report generated in $OUTPUT_DIR\"\n</code></pre>"},{"location":"user-guide/cli-usage/#convert-all-resources","title":"Convert All Resources","text":"<p>Extract and convert all resources from a recipe:</p> <pre><code>#!/bin/bash\nRECIPE=\"$1\"\n\n# Parse recipe to JSON\nsouschef-cli recipe \"$RECIPE\" --format json &gt; recipe_parsed.json\n\n# Extract resource list and convert each\njq -r '.resources[] | \"\\(.type) \\(.name)\"' recipe_parsed.json | \\\nwhile read -r type name; do\n  echo \"Converting: $type[$name]\"\n  souschef-cli convert \"$type\" \"$name\"\ndone\n</code></pre>"},{"location":"user-guide/cli-usage/#cicd-pipeline-integration","title":"CI/CD Pipeline Integration","text":"<p>Validate cookbook structure in CI:</p> <pre><code>#!/bin/bash\nset -e\n\nCOOKBOOK_PATH=\"$1\"\n\necho \"Validating cookbook structure...\"\nsouschef-cli structure \"$COOKBOOK_PATH\" || exit 1\n\necho \"Parsing recipes...\"\nfor recipe in \"$COOKBOOK_PATH/recipes\"/*.rb; do\n  souschef-cli recipe \"$recipe\" --format json || exit 1\ndone\n\necho \"Profiling performance...\"\nsouschef-cli profile \"$COOKBOOK_PATH\" --output performance.txt\n\n# Fail if performance is poor (example threshold)\nif grep -q \"SLOW\" performance.txt; then\n  echo \"ERROR: Performance issues detected\"\n  exit 1\nfi\n\necho \"\u2713 All validations passed\"\n</code></pre>"},{"location":"user-guide/cli-usage/#shell-completion","title":"Shell Completion","text":"<p>Enable shell completion for faster command entry:</p> BashZshFish <pre><code># Add to ~/.bashrc\neval \"$(_SOUSCHEF_CLI_COMPLETE=bash_source souschef-cli)\"\n</code></pre> <pre><code># Add to ~/.zshrc\neval \"$(_SOUSCHEF_CLI_COMPLETE=zsh_source souschef-cli)\"\n</code></pre> <pre><code># Add to ~/.config/fish/completions/souschef-cli.fish\neval (env _SOUSCHEF_CLI_COMPLETE=fish_source souschef-cli)\n</code></pre>"},{"location":"user-guide/cli-usage/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/cli-usage/#command-not-found","title":"Command Not Found","text":"<p>Problem: <code>souschef-cli: command not found</code></p> <p>Solutions:</p> <ol> <li> <p>Ensure SousChef is installed:    <pre><code>pip install mcp-souschef\n</code></pre></p> </li> <li> <p>Check if command is in PATH:    <pre><code>which souschef-cli\n</code></pre></p> </li> <li> <p>Use Python module directly:    <pre><code>python -m souschef.cli --help\n</code></pre></p> </li> </ol>"},{"location":"user-guide/cli-usage/#parse-errors","title":"Parse Errors","text":"<p>Problem: Recipe parsing fails with syntax errors</p> <p>Solutions:</p> <ol> <li> <p>Verify Ruby syntax:    <pre><code>ruby -c recipe.rb\n</code></pre></p> </li> <li> <p>Check file encoding:    <pre><code>file -i recipe.rb\n</code></pre></p> </li> <li> <p>Try with error handling:    <pre><code>souschef-cli recipe recipe.rb 2&gt;&amp;1 | tee error.log\n</code></pre></p> </li> </ol>"},{"location":"user-guide/cli-usage/#performance-issues","title":"Performance Issues","text":"<p>Problem: Slow parsing for large cookbooks</p> <p>Solutions:</p> <ol> <li> <p>Profile to identify bottlenecks:    <pre><code>souschef-cli profile /path/to/cookbook --output perf.txt\ncat perf.txt\n</code></pre></p> </li> <li> <p>Profile specific slow operations:    <pre><code>souschef-cli profile-operation recipe slow_recipe.rb --detailed\n</code></pre></p> </li> <li> <p>Consider chunking large files or parallelizing</p> </li> </ol>"},{"location":"user-guide/cli-usage/#related-documentation","title":"Related Documentation","text":"<ul> <li>MCP Tools Reference - AI-assisted tool usage</li> <li>Examples - Real-world migration patterns</li> <li>Migration Guide - Complete migration methodology</li> <li>API Reference - Technical CLI implementation</li> </ul>"},{"location":"user-guide/cli-usage/#getting-help","title":"Getting Help","text":"<pre><code># General help\nsouschef-cli --help\n\n# Command-specific help\nsouschef-cli recipe --help\nsouschef-cli convert --help\n\n# Version information\nsouschef-cli --version\n</code></pre> <p>For issues or feature requests, see Contributing.</p>"},{"location":"user-guide/examples/","title":"Real-World Migration Examples","text":"<p>Practical examples demonstrating Chef-to-Ansible migrations using SousChef tools, from simple packages to complex enterprise patterns.</p>"},{"location":"user-guide/examples/#example-structure","title":"Example Structure","text":"<p>Each example follows this pattern:</p> <ol> <li>Chef Code - Original Chef implementation</li> <li>Analysis - SousChef tool usage to understand the code</li> <li>Conversion - Automated conversion to Ansible</li> <li>Validation - Testing and verification</li> <li>Best Practices - Optimization and improvements</li> </ol>"},{"location":"user-guide/examples/#example-1-simple-package-installation","title":"Example 1: Simple Package Installation","text":""},{"location":"user-guide/examples/#chef-recipe","title":"Chef Recipe","text":"<pre><code># recipes/nginx.rb\npackage 'nginx' do\n  action :install\nend\n\nservice 'nginx' do\n  action [:enable, :start]\nend\n</code></pre>"},{"location":"user-guide/examples/#analysis-with-souschef","title":"Analysis with SousChef","text":"MCP (AI Assistant)CLI <pre><code>Parse the recipe at recipes/nginx.rb and show me what resources it contains\n</code></pre> <pre><code>souschef-cli recipe recipes/nginx.rb\n</code></pre> <p>Output: <pre><code>Resource 1: package[nginx]\n  Action: install\nResource 2: service[nginx]\n  Action: enable, start\n</code></pre></p>"},{"location":"user-guide/examples/#conversion","title":"Conversion","text":"MCP (AI Assistant)CLI <pre><code>Generate an Ansible playbook from recipes/nginx.rb\n</code></pre> <pre><code>souschef-cli convert package nginx --action install &gt; tasks/nginx.yml\nsouschef-cli convert service nginx --action 'enable,start' &gt;&gt; tasks/nginx.yml\n</code></pre> <p>Generated Ansible:</p> <pre><code>---\n- name: Install nginx\n  ansible.builtin.package:\n    name: nginx\n    state: present\n\n- name: Enable and start nginx\n  ansible.builtin.service:\n    name: nginx\n    enabled: true\n    state: started\n</code></pre>"},{"location":"user-guide/examples/#validation","title":"Validation","text":"<pre><code># Validate the conversion\nsouschef-cli validate playbook --content \"$(cat tasks/nginx.yml)\"\n\n# Test in development\nansible-playbook -i inventory/dev tasks/nginx.yml --check\nansible-playbook -i inventory/dev tasks/nginx.yml\n\n# Verify idempotency\nansible-playbook -i inventory/dev tasks/nginx.yml --check\n</code></pre> <p>Best Practice: \u2705 Direct conversion works perfectly for simple packages and services.</p>"},{"location":"user-guide/examples/#example-2-template-with-variables","title":"Example 2: Template with Variables","text":""},{"location":"user-guide/examples/#chef-recipe_1","title":"Chef Recipe","text":"<pre><code># recipes/web.rb\ntemplate '/etc/nginx/nginx.conf' do\n  source 'nginx.conf.erb'\n  owner 'root'\n  group 'root'\n  mode '0644'\n  variables(\n    worker_processes: node['nginx']['workers'],\n    worker_connections: node['nginx']['connections'],\n    server_name: node['nginx']['server_name']\n  )\n  notifies :reload, 'service[nginx]', :delayed\nend\n\nservice 'nginx' do\n  action :nothing\nend\n</code></pre> <p>Chef Template (templates/nginx.conf.erb): <pre><code>user nginx;\nworker_processes &lt;%= @worker_processes %&gt;;\n\nevents {\n    worker_connections &lt;%= @worker_connections %&gt;;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name &lt;%= @server_name %&gt;;\n    }\n}\n</code></pre></p>"},{"location":"user-guide/examples/#conversion_1","title":"Conversion","text":"<pre><code># Parse template and convert\nsouschef-cli template templates/nginx.conf.erb --format json &gt; template_analysis.json\n</code></pre> <p>Generated Ansible:</p> <pre><code># tasks/web.yml\n- name: Deploy nginx configuration\n  ansible.builtin.template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    owner: root\n    group: root\n    mode: '0644'\n  notify: Reload nginx\n\n# handlers/main.yml\n- name: Reload nginx\n  ansible.builtin.service:\n    name: nginx\n    state: reloaded\n</code></pre> <p>Jinja2 Template (templates/nginx.conf.j2): <pre><code>user nginx;\nworker_processes {{ nginx_workers }};\n\nevents {\n    worker_connections {{ nginx_connections }};\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name {{ nginx_server_name }};\n    }\n}\n</code></pre></p> <p>Variables (group_vars/all.yml): <pre><code>nginx_workers: 4\nnginx_connections: 1024\nnginx_server_name: example.com\n</code></pre></p>"},{"location":"user-guide/examples/#example-3-conditional-execution-with-guards","title":"Example 3: Conditional Execution with Guards","text":""},{"location":"user-guide/examples/#chef-recipe_2","title":"Chef Recipe","text":"<pre><code># recipes/deploy.rb\nexecute 'deploy_application' do\n  command '/opt/deploy.sh'\n  user 'deploy'\n  only_if { ::File.exist?('/opt/app/latest.tar.gz') }\n  not_if { ::File.exist?('/opt/app/.deployed') }\nend\n\nfile '/opt/app/.deployed' do\n  action :create\n  only_if { node['app']['environment'] == 'production' }\nend\n</code></pre>"},{"location":"user-guide/examples/#conversion-with-guard-handling","title":"Conversion with Guard Handling","text":"<p>Generated Ansible:</p> <pre><code>- name: Check for application archive\n  ansible.builtin.stat:\n    path: /opt/app/latest.tar.gz\n  register: app_archive\n\n- name: Check for deployment marker\n  ansible.builtin.stat:\n    path: /opt/app/.deployed\n  register: deploy_marker\n\n- name: Deploy application\n  ansible.builtin.command:\n    cmd: /opt/deploy.sh\n  become: true\n  become_user: deploy\n  when:\n    - app_archive.stat.exists\n    - not deploy_marker.stat.exists\n\n- name: Create deployment marker\n  ansible.builtin.file:\n    path: /opt/app/.deployed\n    state: touch\n    mode: '0644'\n  when: app_environment == 'production'\n</code></pre> <p>Best Practice: \u2705 Guards convert to <code>stat</code> checks + <code>when</code> conditions for clarity.</p>"},{"location":"user-guide/examples/#example-4-data-bag-integration","title":"Example 4: Data Bag Integration","text":""},{"location":"user-guide/examples/#chef-recipe_3","title":"Chef Recipe","text":"<pre><code># recipes/database.rb\ndb_secrets = data_bag_item('secrets', 'database')\n\npostgresql_user 'app_user' do\n  password db_secrets['password']\n  action :create\nend\n\ntemplate '/etc/app/database.yml' do\n  source 'database.yml.erb'\n  variables(\n    host: db_secrets['host'],\n    username: db_secrets['username'],\n    password: db_secrets['password']\n  )\n  sensitive true\nend\n</code></pre> <p>Chef Data Bag (data_bags/secrets/database.json): <pre><code>{\n  \"id\": \"database\",\n  \"host\": \"db.example.com\",\n  \"username\": \"app_user\",\n  \"password\": \"secret123\"\n}\n</code></pre></p>"},{"location":"user-guide/examples/#conversion_2","title":"Conversion","text":"MCP (AI Assistant)CLI <pre><code>Convert the data bag at data_bags/secrets/database.json\nto Ansible Vault\n</code></pre> <pre><code># Convert data bag to vars\nsouschef-cli databag-convert data_bags/secrets/database.json --vault\n</code></pre> <p>Generated Ansible:</p> <pre><code># tasks/database.yml\n- name: Create database user\n  community.postgresql.postgresql_user:\n    name: app_user\n    password: \"{{ db_password }}\"\n    state: present\n  no_log: true\n\n- name: Deploy database configuration\n  ansible.builtin.template:\n    src: database.yml.j2\n    dest: /etc/app/database.yml\n    mode: '0600'\n  no_log: true\n</code></pre> <p>Ansible Vault (group_vars/all/vault.yml): <pre><code># Encrypted with: ansible-vault encrypt group_vars/all/vault.yml\ndb_host: db.example.com\ndb_username: app_user\ndb_password: !vault |\n          $ANSIBLE_VAULT;1.1;AES256\n          66386439653865...\n</code></pre></p> <p>Best Practice: \u2705 Always use <code>no_log: true</code> for sensitive data tasks.</p>"},{"location":"user-guide/examples/#example-5-chef-search-to-ansible-inventory","title":"Example 5: Chef Search to Ansible Inventory","text":""},{"location":"user-guide/examples/#chef-recipe_4","title":"Chef Recipe","text":"<pre><code># recipes/haproxy.rb\nbackends = search(:node, \"role:webserver AND chef_environment:#{node.chef_environment}\")\n\ntemplate '/etc/haproxy/haproxy.cfg' do\n  source 'haproxy.cfg.erb'\n  variables(\n    backends: backends.map { |n| n['ipaddress'] }\n  )\n  notifies :reload, 'service[haproxy]'\nend\n</code></pre>"},{"location":"user-guide/examples/#conversion_3","title":"Conversion","text":"MCP (AI Assistant) <pre><code>Convert Chef search \"role:webserver AND chef_environment:production\"\nto Ansible dynamic inventory group named \"webservers\"\n</code></pre> <p>Generated Ansible:</p> <pre><code># playbooks/haproxy.yml\n- name: Configure HAProxy\n  hosts: haproxy\n  tasks:\n    - name: Deploy HAProxy configuration\n      ansible.builtin.template:\n        src: haproxy.cfg.j2\n        dest: /etc/haproxy/haproxy.cfg\n        mode: '0644'\n      notify: Reload haproxy\n\n  handlers:\n    - name: Reload haproxy\n      ansible.builtin.service:\n        name: haproxy\n        state: reloaded\n</code></pre> <p>Jinja2 Template (templates/haproxy.cfg.j2): <pre><code>global\n    maxconn 4096\n\ndefaults\n    mode http\n    timeout connect 5000ms\n    timeout client 50000ms\n    timeout server 50000ms\n\nfrontend http-in\n    bind *:80\n    default_backend webservers\n\nbackend webservers\n    balance roundrobin\n{% for host in groups['webservers'] %}\n    server {{ host }} {{ hostvars[host]['ansible_host'] }}:80 check\n{% endfor %}\n</code></pre></p> <p>Inventory (inventory/production/hosts.yml): <pre><code>all:\n  children:\n    webservers:\n      hosts:\n        web01:\n          ansible_host: 10.0.1.10\n        web02:\n          ansible_host: 10.0.1.11\n        web03:\n          ansible_host: 10.0.1.12\n    haproxy:\n      hosts:\n        lb01:\n          ansible_host: 10.0.1.20\n</code></pre></p> <p>Best Practice: \u2705 Chef search converts to Ansible inventory groups with <code>groups[]</code> variable.</p>"},{"location":"user-guide/examples/#example-6-custom-resource-migration","title":"Example 6: Custom Resource Migration","text":""},{"location":"user-guide/examples/#chef-custom-resource","title":"Chef Custom Resource","text":"<pre><code># resources/app_deploy.rb\nproperty :app_name, String, name_property: true\nproperty :version, String, required: true\nproperty :user, String, default: 'deploy'\nproperty :environment, Hash, default: {}\n\naction :deploy do\n  directory \"/opt/apps/#{new_resource.app_name}\" do\n    owner new_resource.user\n    mode '0755'\n    recursive true\n  end\n\n  remote_file \"/opt/apps/#{new_resource.app_name}/app-#{new_resource.version}.tar.gz\" do\n    source \"https://releases.example.com/#{new_resource.app_name}-#{new_resource.version}.tar.gz\"\n    owner new_resource.user\n    mode '0644'\n  end\n\n  execute \"extract_app\" do\n    command \"tar xzf app-#{new_resource.version}.tar.gz\"\n    cwd \"/opt/apps/#{new_resource.app_name}\"\n    user new_resource.user\n  end\nend\n</code></pre> <p>Chef Recipe Usage: <pre><code>app_deploy 'myapp' do\n  version '1.2.3'\n  user 'app'\n  environment(\n    'DATABASE_URL' =&gt; 'postgresql://localhost/myapp'\n  )\n  action :deploy\nend\n</code></pre></p>"},{"location":"user-guide/examples/#conversion-to-ansible-role","title":"Conversion to Ansible Role","text":"<p>Role Structure: <pre><code>roles/app_deploy/\n\u251c\u2500\u2500 defaults/\n\u2502   \u2514\u2500\u2500 main.yml\n\u251c\u2500\u2500 tasks/\n\u2502   \u2514\u2500\u2500 main.yml\n\u2514\u2500\u2500 templates/\n    \u2514\u2500\u2500 env.j2\n</code></pre></p> <p>defaults/main.yml: <pre><code>app_deploy_user: deploy\napp_deploy_base_path: /opt/apps\napp_deploy_environment: {}\n</code></pre></p> <p>tasks/main.yml: <pre><code>- name: Create application directory\n  ansible.builtin.file:\n    path: \"{{ app_deploy_base_path }}/{{ app_name }}\"\n    state: directory\n    owner: \"{{ app_deploy_user }}\"\n    mode: '0755'\n\n- name: Download application archive\n  ansible.builtin.get_url:\n    url: \"https://releases.example.com/{{ app_name }}-{{ app_version }}.tar.gz\"\n    dest: \"{{ app_deploy_base_path }}/{{ app_name }}/app-{{ app_version }}.tar.gz\"\n    owner: \"{{ app_deploy_user }}\"\n    mode: '0644'\n\n- name: Extract application\n  ansible.builtin.unarchive:\n    src: \"{{ app_deploy_base_path }}/{{ app_name }}/app-{{ app_version }}.tar.gz\"\n    dest: \"{{ app_deploy_base_path }}/{{ app_name }}\"\n    remote_src: true\n    owner: \"{{ app_deploy_user }}\"\n</code></pre></p> <p>Playbook Usage: <pre><code>- name: Deploy application\n  hosts: app_servers\n  roles:\n    - role: app_deploy\n      vars:\n        app_name: myapp\n        app_version: 1.2.3\n        app_deploy_user: app\n        app_deploy_environment:\n          DATABASE_URL: postgresql://localhost/myapp\n</code></pre></p> <p>Best Practice: \u2705 Custom resources \u2192 Ansible roles with similar interface.</p>"},{"location":"user-guide/examples/#example-7-inspec-to-ansible-testing","title":"Example 7: InSpec to Ansible Testing","text":""},{"location":"user-guide/examples/#chef-inspec-profile","title":"Chef InSpec Profile","text":"<pre><code># controls/nginx.rb\ncontrol 'nginx-01' do\n  impact 1.0\n  title 'Verify nginx installation'\n  desc 'Ensure nginx is installed and configured correctly'\n\n  describe package('nginx') do\n    it { should be_installed }\n  end\n\n  describe service('nginx') do\n    it { should be_enabled }\n    it { should be_running }\n  end\n\n  describe file('/etc/nginx/nginx.conf') do\n    it { should exist }\n    it { should be_file }\n    its('owner') { should eq 'root' }\n    its('mode') { should cmp '0644' }\n  end\n\n  describe port(80) do\n    it { should be_listening }\n  end\nend\n</code></pre>"},{"location":"user-guide/examples/#conversion_4","title":"Conversion","text":"MCP (AI Assistant)CLI <pre><code>Convert InSpec profile at tests/inspec/nginx to Ansible assert tasks\n</code></pre> <pre><code>souschef-cli inspec-convert tests/inspec/nginx --format ansible_assert\n</code></pre> <p>Generated Ansible Tests:</p> <pre><code># tests/verify.yml\n- name: Verify nginx installation\n  hosts: webservers\n  gather_facts: true\n  tasks:\n    - name: Check nginx package\n      ansible.builtin.package_facts:\n\n    - name: Assert nginx is installed\n      ansible.builtin.assert:\n        that:\n          - \"'nginx' in ansible_facts.packages\"\n        fail_msg: \"nginx package is not installed\"\n        success_msg: \"nginx package is installed\"\n\n    - name: Get nginx service status\n      ansible.builtin.service_facts:\n\n    - name: Assert nginx service is enabled and running\n      ansible.builtin.assert:\n        that:\n          - ansible_facts.services['nginx.service'].state == 'running'\n          - ansible_facts.services['nginx.service'].status == 'enabled'\n        fail_msg: \"nginx service is not running or enabled\"\n\n    - name: Check nginx config file\n      ansible.builtin.stat:\n        path: /etc/nginx/nginx.conf\n      register: nginx_conf\n\n    - name: Assert nginx config exists with correct permissions\n      ansible.builtin.assert:\n        that:\n          - nginx_conf.stat.exists\n          - nginx_conf.stat.isreg\n          - nginx_conf.stat.pw_name == 'root'\n          - nginx_conf.stat.mode == '0644'\n        fail_msg: \"nginx.conf not found or has incorrect permissions\"\n\n    - name: Check nginx is listening on port 80\n      ansible.builtin.wait_for:\n        port: 80\n        timeout: 5\n</code></pre>"},{"location":"user-guide/examples/#example-8-habitat-to-docker-migration","title":"Example 8: Habitat to Docker Migration","text":""},{"location":"user-guide/examples/#habitat-plan","title":"Habitat Plan","text":"<pre><code># habitat/plan.sh\npkg_name=myapp\npkg_origin=example\npkg_version=\"1.0.0\"\npkg_maintainer=\"DevOps Team &lt;devops@example.com&gt;\"\npkg_license=(\"Apache-2.0\")\npkg_upstream_url=\"https://example.com/myapp\"\n\npkg_deps=(\n  core/node\n  core/nginx\n)\n\npkg_build_deps=(\n  core/git\n)\n\npkg_exports=(\n  [port]=http.port\n)\n\npkg_exposes=(port)\n\ndo_build() {\n  npm install --production\n  npm run build\n}\n\ndo_install() {\n  cp -r dist/* \"${pkg_prefix}/\"\n  cp -r node_modules \"${pkg_prefix}/\"\n}\n</code></pre>"},{"location":"user-guide/examples/#conversion_5","title":"Conversion","text":"MCP (AI Assistant) <pre><code>Convert Habitat plan at habitat/plan.sh to Dockerfile\nusing node:18-alpine as base image\n</code></pre> <p>Generated Dockerfile:</p> <pre><code># Multi-stage build for minimal image size\nFROM node:18-alpine AS builder\n\nWORKDIR /build\n\n# Install build dependencies\nRUN apk add --no-cache git\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies\nRUN npm install --production\n\n# Copy source\nCOPY . .\n\n# Build application\nRUN npm run build\n\n# Production stage\nFROM node:18-alpine\n\n# Install nginx\nRUN apk add --no-cache nginx\n\n# Create non-root user\nRUN addgroup -g 1001 app &amp;&amp; \\\n    adduser -D -u 1001 -G app app\n\nWORKDIR /app\n\n# Copy built application\nCOPY --from=builder --chown=app:app /build/dist ./dist\nCOPY --from=builder --chown=app:app /build/node_modules ./node_modules\n\n# Configure nginx\nCOPY nginx.conf /etc/nginx/nginx.conf\n\n# Expose port\nEXPOSE 8080\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/health || exit 1\n\n# Switch to non-root user\nUSER app\n\n# Start application\nCMD [\"node\", \"dist/server.js\"]\n</code></pre> <p>Generated docker-compose.yml:</p> <pre><code>version: '3.8'\n\nservices:\n  myapp:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"8080:8080\"\n    environment:\n      - NODE_ENV=production\n      - PORT=8080\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"http://localhost:8080/health\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n    restart: unless-stopped\n    networks:\n      - app_network\n\nnetworks:\n  app_network:\n    driver: bridge\n</code></pre>"},{"location":"user-guide/examples/#example-9-awx-job-template-generation","title":"Example 9: AWX Job Template Generation","text":""},{"location":"user-guide/examples/#chef-cookbook","title":"Chef Cookbook","text":"<p>Starting with a database cookbook containing installation and configuration recipes.</p>"},{"location":"user-guide/examples/#conversion_6","title":"Conversion","text":"MCP (AI Assistant) <pre><code>Generate an AWX job template from examples/database cookbook\nnamed \"Deploy PostgreSQL Database\"\n</code></pre> <p>Generated AWX Job Template (JSON):</p> <pre><code>{\n  \"name\": \"Deploy PostgreSQL Database\",\n  \"description\": \"Converted from Chef cookbook: database\",\n  \"job_type\": \"run\",\n  \"inventory\": \"Production\",\n  \"project\": \"Ansible Playbooks\",\n  \"playbook\": \"database/site.yml\",\n  \"credential\": \"SSH - Production\",\n  \"verbosity\": 1,\n  \"extra_vars\": {\n    \"postgresql_version\": \"14\",\n    \"postgresql_listen_addresses\": \"*\",\n    \"postgresql_max_connections\": 100\n  },\n  \"ask_variables_on_launch\": true,\n  \"ask_limit_on_launch\": true,\n  \"survey_enabled\": true,\n  \"survey_spec\": {\n    \"name\": \"Database Deployment Survey\",\n    \"description\": \"Configure PostgreSQL deployment parameters\",\n    \"spec\": [\n      {\n        \"question_name\": \"PostgreSQL Version\",\n        \"question_description\": \"PostgreSQL major version to install\",\n        \"required\": true,\n        \"type\": \"multiplechoice\",\n        \"variable\": \"postgresql_version\",\n        \"choices\": [\"12\", \"13\", \"14\", \"15\"],\n        \"default\": \"14\"\n      },\n      {\n        \"question_name\": \"Max Connections\",\n        \"question_description\": \"Maximum number of client connections\",\n        \"required\": true,\n        \"type\": \"integer\",\n        \"variable\": \"postgresql_max_connections\",\n        \"min\": 20,\n        \"max\": 1000,\n        \"default\": 100\n      }\n    ]\n  }\n}\n</code></pre> <p>AWX CLI Usage: <pre><code># Create job template\nawx job_templates create \\\n  --name \"Deploy PostgreSQL Database\" \\\n  --job_type run \\\n  --inventory \"Production\" \\\n  --project \"Ansible Playbooks\" \\\n  --playbook \"database/site.yml\" \\\n  --extra_vars @job_template_vars.json\n</code></pre></p>"},{"location":"user-guide/examples/#common-patterns-solutions","title":"Common Patterns &amp; Solutions","text":""},{"location":"user-guide/examples/#pattern-iterating-over-arrays","title":"Pattern: Iterating Over Arrays","text":"<p>Chef: <pre><code>node['packages'].each do |pkg|\n  package pkg do\n    action :install\n  end\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Install packages\n  ansible.builtin.package:\n    name: \"{{ item }}\"\n    state: present\n  loop: \"{{ packages }}\"\n</code></pre></p>"},{"location":"user-guide/examples/#pattern-platform-specific-actions","title":"Pattern: Platform-Specific Actions","text":"<p>Chef: <pre><code>case node['platform']\nwhen 'ubuntu', 'debian'\n  package 'apache2'\nwhen 'centos', 'redhat'\n  package 'httpd'\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Install web server (Debian)\n  ansible.builtin.apt:\n    name: apache2\n    state: present\n  when: ansible_os_family == 'Debian'\n\n- name: Install web server (RedHat)\n  ansible.builtin.yum:\n    name: httpd\n    state: present\n  when: ansible_os_family == 'RedHat'\n</code></pre></p>"},{"location":"user-guide/examples/#pattern-file-ownership-and-permissions","title":"Pattern: File Ownership and Permissions","text":"<p>Chef: <pre><code>file '/opt/app/config.yaml' do\n  owner 'app'\n  group 'app'\n  mode '0600'\n  content lazy { Chef::JSONCompat.to_json_pretty(node['app']['config']) }\nend\n</code></pre></p> <p>Ansible: <pre><code>- name: Create application config\n  ansible.builtin.copy:\n    content: \"{{ app_config | to_nice_yaml }}\"\n    dest: /opt/app/config.yaml\n    owner: app\n    group: app\n    mode: '0600'\n</code></pre></p>"},{"location":"user-guide/examples/#troubleshooting-guide","title":"Troubleshooting Guide","text":""},{"location":"user-guide/examples/#issue-complex-ruby-logic-doesnt-convert","title":"Issue: Complex Ruby Logic Doesn't Convert","text":"<p>Problem: Chef recipe contains complex Ruby code that can't be directly converted.</p> <p>Solution: <pre><code># Chef - Complex Ruby logic\nruby_block 'complex_calculation' do\n  block do\n    result = node['values'].map { |v| v * 2 }.sum\n    node.run_state['calculated_value'] = result\n  end\nend\n</code></pre></p> <p>Ansible - Use set_fact: <pre><code>- name: Perform complex calculation\n  ansible.builtin.set_fact:\n    calculated_value: \"{{ values | map('int') | map('multiply', 2) | sum }}\"\n</code></pre></p> <p>Or create custom module for very complex logic.</p>"},{"location":"user-guide/examples/#issue-notification-chains","title":"Issue: Notification Chains","text":"<p>Problem: Complex notification dependencies in Chef.</p> <p>Chef: <pre><code>template '/etc/app/config.yml' do\n  notifies :restart, 'service[app]', :delayed\n  notifies :run, 'execute[reload_cache]', :immediately\nend\n\nexecute 'reload_cache' do\n  command '/usr/bin/reload_cache.sh'\n  action :nothing\nend\n\nservice 'app' do\n  action :nothing\nend\n</code></pre></p> <p>Ansible - Use handlers and flush: <pre><code>- name: Deploy configuration\n  ansible.builtin.template:\n    src: config.yml.j2\n    dest: /etc/app/config.yml\n  notify:\n    - Reload cache\n    - Restart app\n\n- name: Flush handlers if config changed\n  meta: flush_handlers\n\n# handlers/main.yml\n- name: Reload cache\n  ansible.builtin.command: /usr/bin/reload_cache.sh\n\n- name: Restart app\n  ansible.builtin.service:\n    name: app\n    state: restarted\n</code></pre></p>"},{"location":"user-guide/examples/#issue-chef-attributes-precedence","title":"Issue: Chef Attributes Precedence","text":"<p>Problem: Complex attribute precedence in Chef doesn't map directly.</p> <p>Chef: <pre><code>default['app']['port'] = 8080\noverride['app']['port'] = 9090  # Takes precedence\n</code></pre></p> <p>Ansible - Use variable precedence: <pre><code># group_vars/all.yml (lowest precedence)\napp_port: 8080\n\n# group_vars/production.yml (higher precedence)\napp_port: 9090\n\n# host_vars/app01.yml (highest precedence)\napp_port: 9091\n</code></pre></p>"},{"location":"user-guide/examples/#performance-optimization","title":"Performance Optimization","text":""},{"location":"user-guide/examples/#tip-1-batch-package-installations","title":"Tip 1: Batch Package Installations","text":"<p>Before: <pre><code>- name: Install package 1\n  ansible.builtin.package:\n    name: nginx\n    state: present\n\n- name: Install package 2\n  ansible.builtin.package:\n    name: git\n    state: present\n</code></pre></p> <p>After: <pre><code>- name: Install packages\n  ansible.builtin.package:\n    name:\n      - nginx\n      - git\n    state: present\n</code></pre></p>"},{"location":"user-guide/examples/#tip-2-use-blocks-for-error-handling","title":"Tip 2: Use Blocks for Error Handling","text":"<pre><code>- name: Deploy with rollback capability\n  block:\n    - name: Deploy new version\n      ansible.builtin.copy:\n        src: app-v2.jar\n        dest: /opt/app/app.jar\n        backup: true\n      register: deploy_result\n\n    - name: Restart application\n      ansible.builtin.service:\n        name: app\n        state: restarted\n\n  rescue:\n    - name: Rollback on failure\n      ansible.builtin.copy:\n        src: \"{{ deploy_result.backup_file }}\"\n        dest: /opt/app/app.jar\n        remote_src: true\n\n    - name: Restart with old version\n      ansible.builtin.service:\n        name: app\n        state: restarted\n</code></pre>"},{"location":"user-guide/examples/#tip-3-parallel-execution-with-strategy","title":"Tip 3: Parallel Execution with Strategy","text":"<pre><code>- name: Deploy to web servers\n  hosts: webservers\n  strategy: free  # Don't wait for all hosts\n  tasks:\n    - name: Deploy application\n      ansible.builtin.copy:\n        src: app.jar\n        dest: /opt/app/\n</code></pre>"},{"location":"user-guide/examples/#best-practices-checklist","title":"Best Practices Checklist","text":"<ul> <li> Use <code>validate_conversion</code> after each major conversion</li> <li> Test idempotency (run playbook twice, second run should show no changes)</li> <li> Use <code>no_log: true</code> for tasks handling sensitive data</li> <li> Organize playbooks into roles for reusability</li> <li> Use handlers for service restarts</li> <li> Implement proper error handling with blocks</li> <li> Tag tasks for selective execution</li> <li> Use <code>check_mode</code> for dry runs</li> <li> Document variable requirements in README</li> <li> Store secrets in Ansible Vault</li> <li> Use inventory groups instead of hardcoded hosts</li> <li> Implement health checks after deployments</li> </ul>"},{"location":"user-guide/examples/#related-documentation","title":"Related Documentation","text":"<ul> <li>MCP Tools Reference - Complete tool documentation</li> <li>CLI Usage - Command-line workflows</li> <li>Migration Guide - Migration methodology</li> <li>Assessment Guide - Complexity assessment</li> <li>Conversion Guide - Detailed conversion techniques</li> </ul>"},{"location":"user-guide/examples/#getting-additional-help","title":"Getting Additional Help","text":"<p>If you encounter patterns not covered here:</p> <ol> <li>Search the documentation for similar patterns</li> <li>Use SousChef's AI assistant to analyze your specific code</li> <li>Check Ansible docs for module equivalents</li> <li>Test incrementally - convert one resource at a time</li> <li>Contribute back - share your solutions with the community</li> </ol> <p>Share Your Examples</p> <p>Have a complex migration pattern you solved? Consider contributing it to the documentation! See Contributing for details.</p>"},{"location":"user-guide/mcp-tools/","title":"MCP Tools Reference","text":"<p>SousChef provides 38 specialized MCP tools organized across 9 capability areas for comprehensive Chef-to-Ansible migration. Each tool is designed to work seamlessly with any AI model through the Model Context Protocol.</p> <p>Working with MCP Tools</p> <p>These tools are invoked through your AI assistant (Claude, GPT-4, Red Hat AI, local models, etc.). Simply describe what you need in natural language, and your AI assistant will use the appropriate tools.</p>"},{"location":"user-guide/mcp-tools/#quick-reference-by-capability-area","title":"Quick Reference by Capability Area","text":"Capability Tools Use Case Chef Cookbook Analysis 8 tools Parse and analyze Chef cookbooks, recipes, resources Conversion Engine 3 tools Convert Chef resources and recipes to Ansible Search &amp; Inventory 3 tools Transform Chef search to Ansible inventory InSpec Integration 3 tools Convert InSpec tests to Ansible validation Data Bags &amp; Secrets 3 tools Migrate data bags to Ansible vars/vault Environments 3 tools Convert Chef environments to inventory AWX/AAP Integration 4 tools Generate AWX job templates and workflows Habitat to Container 3 tools Modernize Habitat to Docker/Compose Deployment &amp; Assessment 8 tools Migration planning and modern deployments"},{"location":"user-guide/mcp-tools/#1-chef-cookbook-analysis-parsing","title":"1. Chef Cookbook Analysis &amp; Parsing","text":"<p>Complete cookbook introspection and analysis tools for understanding your Chef infrastructure.</p>"},{"location":"user-guide/mcp-tools/#parse_template","title":"parse_template","text":"<p>Parse ERB templates with automatic Jinja2 conversion and variable extraction.</p> <p>Parameters: - <code>template_path</code> (string, required): Path to the ERB template file</p> <p>Returns: - Converted Jinja2 template content - List of extracted variables with types - ERB-to-Jinja2 syntax mapping - Conversion notes and warnings</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse the template at examples/database/templates/database.yml.erb\nand show me the Jinja2 conversion\n</code></pre> <pre><code>souschef-cli template examples/database/templates/database.yml.erb\n</code></pre> <p>Common Use Cases: - Converting ERB templates to Jinja2 before playbook migration - Identifying variables that need to be defined in Ansible - Understanding template logic and dependencies</p>"},{"location":"user-guide/mcp-tools/#parse_custom_resource","title":"parse_custom_resource","text":"<p>Extract properties, attributes, and actions from Chef custom resources and LWRPs.</p> <p>Parameters: - <code>resource_path</code> (string, required): Path to the custom resource file</p> <p>Returns: - Resource properties with types and defaults - Available actions and their implementations - Resource attributes and usage patterns - Dependencies and requirements</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Analyze the custom resource at examples/database/resources/user.rb\nand explain what properties and actions it provides\n</code></pre> <pre><code>souschef-cli resource examples/database/resources/user.rb\n</code></pre> <p>Common Use Cases: - Understanding custom resource interfaces - Planning Ansible module or role equivalents - Identifying resource dependencies</p>"},{"location":"user-guide/mcp-tools/#list_directory","title":"list_directory","text":"<p>Navigate and explore cookbook directory structures with filtering.</p> <p>Parameters: - <code>directory_path</code> (string, required): Path to the directory - <code>pattern</code> (string, optional): Glob pattern for filtering (e.g., \"*.rb\")</p> <p>Returns: - List of files and directories - File types and sizes - Directory structure overview</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>List all Ruby files in the examples/database cookbook\n</code></pre> <pre><code>souschef-cli ls examples/database --pattern \"*.rb\"\n</code></pre>"},{"location":"user-guide/mcp-tools/#read_file","title":"read_file","text":"<p>Read cookbook files with comprehensive error handling.</p> <p>Parameters: - <code>file_path</code> (string, required): Path to the file - <code>encoding</code> (string, optional): File encoding (default: utf-8)</p> <p>Returns: - File contents - File metadata (size, modification time) - Encoding information</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Read the contents of examples/database/metadata.rb\n</code></pre> <pre><code>souschef-cli cat examples/database/metadata.rb\n</code></pre>"},{"location":"user-guide/mcp-tools/#read_cookbook_metadata","title":"read_cookbook_metadata","text":"<p>Parse metadata.rb files for dependencies and cookbook information.</p> <p>Parameters: - <code>metadata_path</code> (string, required): Path to metadata.rb file</p> <p>Returns: - Cookbook name and version - Dependencies with version constraints - Maintainer information - License and source repository - Platform support</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse the metadata from examples/database/metadata.rb\nand show me all dependencies\n</code></pre> <pre><code>souschef-cli metadata examples/database/metadata.rb\n</code></pre> <p>Common Use Cases: - Understanding cookbook dependencies - Planning migration order - Identifying platform requirements</p>"},{"location":"user-guide/mcp-tools/#parse_recipe","title":"parse_recipe","text":"<p>Analyze Chef recipes and extract resources, actions, and properties.</p> <p>Parameters: - <code>recipe_path</code> (string, required): Path to the Chef recipe file</p> <p>Returns: - List of resources with types and names - Resource properties and actions - Guard conditions (only_if, not_if) - Notifies and subscribes relationships - Variables and attributes used</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse examples/database/recipes/default.rb and\nshow me all the resources it contains\n</code></pre> <pre><code>souschef-cli recipe examples/database/recipes/default.rb\n</code></pre> <p>Common Use Cases: - Understanding recipe structure - Identifying conversion complexity - Extracting resource dependencies</p>"},{"location":"user-guide/mcp-tools/#parse_attributes","title":"parse_attributes","text":"<p>Parse attribute files with advanced precedence resolution across 6 levels.</p> <p>Parameters: - <code>attributes_path</code> (string, required): Path to the attributes file</p> <p>Returns: - Attributes organized by precedence level:   - default: Standard defaults   - force_default: Override default precedence   - normal: Node-specific values   - override: Override normal values   - force_override: Highest priority overrides   - automatic: System-discovered values - Attribute paths and values - Type information</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse examples/database/attributes/default.rb\nand show me the attribute precedence levels\n</code></pre> <pre><code>souschef-cli attributes examples/database/attributes/default.rb\n</code></pre> <p>Common Use Cases: - Understanding attribute hierarchy - Converting to Ansible variable precedence - Identifying configuration patterns</p>"},{"location":"user-guide/mcp-tools/#list_cookbook_structure","title":"list_cookbook_structure","text":"<p>Display complete cookbook directory hierarchy.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to the cookbook root</p> <p>Returns: - Tree view of cookbook structure - File counts by type - Size information - Standard vs custom directories</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Show me the complete structure of examples/database cookbook\n</code></pre> <pre><code>souschef-cli structure examples/database\n</code></pre>"},{"location":"user-guide/mcp-tools/#2-chef-to-ansible-conversion-engine","title":"2. Chef-to-Ansible Conversion Engine","text":"<p>Advanced resource-to-task conversion with intelligent Ansible module selection.</p>"},{"location":"user-guide/mcp-tools/#convert_resource_to_task","title":"convert_resource_to_task","text":"<p>Transform individual Chef resources to Ansible tasks with module mapping.</p> <p>Parameters: - <code>resource_type</code> (string, required): Chef resource type (e.g., \"package\", \"service\") - <code>resource_name</code> (string, required): Resource name - <code>properties</code> (object, optional): Resource properties as JSON - <code>guards</code> (object, optional): Guard conditions (only_if, not_if)</p> <p>Returns: - Ansible task YAML - Module selection reasoning - Parameter mappings - Guard-to-when conversions - Idempotency notes</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Convert a Chef package resource named \"nginx\" with action \"install\"\nto an Ansible task\n</code></pre> <pre><code>souschef-cli convert package nginx --action install\n</code></pre> <p>Supported Resource Types: - Package management: <code>package</code>, <code>apt_package</code>, <code>yum_package</code> - Services: <code>service</code>, <code>systemd_unit</code> - Files: <code>file</code>, <code>directory</code>, <code>template</code>, <code>cookbook_file</code> - Users/Groups: <code>user</code>, <code>group</code> - Execution: <code>execute</code>, <code>bash</code>, <code>script</code> - And 50+ more Chef resources</p>"},{"location":"user-guide/mcp-tools/#generate_playbook_from_recipe","title":"generate_playbook_from_recipe","text":"<p>Generate complete Ansible playbooks from Chef recipes.</p> <p>Parameters: - <code>recipe_path</code> (string, required): Path to the Chef recipe file - <code>playbook_name</code> (string, optional): Custom playbook name</p> <p>Returns: - Complete Ansible playbook YAML - Variable definitions - Handler mappings - Role structure recommendations - Conversion notes</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Generate an Ansible playbook from examples/database/recipes/default.rb\n</code></pre> <pre><code>souschef-cli convert-recipe examples/database/recipes/default.rb &gt; database.yml\n</code></pre> <p>Features: - \u2705 Automatic handler generation from notifies - \u2705 Variable extraction from attributes - \u2705 Guard condition conversion to when/unless - \u2705 Resource dependency preservation - \u2705 Best practice task naming</p>"},{"location":"user-guide/mcp-tools/#enhanced-guard-handling","title":"Enhanced Guard Handling","text":"<p>Automatically convert complex Chef guard conditions to Ansible when/unless.</p> <p>Supported Guard Types:</p> <p>Array-based guards: <pre><code># Chef\nonly_if ['test -f /path/file', 'systemctl is-active nginx']\n\n# Ansible\nwhen:\n  - stat /path/file\n  - \"'active' in nginx_status.stdout\"\n</code></pre></p> <p>Lambda/proc syntax: <pre><code># Chef\nonly_if { ::File.exist?('/etc/nginx') }\n\n# Ansible\nwhen: nginx_config_dir.stat.exists\n</code></pre></p> <p>Do-end blocks: <pre><code># Chef\nnot_if do\n  ::File.exist?('/etc/app.conf') &amp;&amp;\n  node['app']['version'] &gt;= '2.0'\nend\n\n# Ansible\nwhen: not (app_conf.stat.exists and app_version is version('2.0', '&gt;='))\n</code></pre></p> <p>Multiple guard types: - Platform checks: <code>node['platform']</code> - Attribute checks: <code>node['app']['enabled']</code> - File/directory existence - Command execution results - Complex boolean logic with AND/OR</p>"},{"location":"user-guide/mcp-tools/#3-chef-search-inventory-integration","title":"3. Chef Search &amp; Inventory Integration","text":"<p>Convert Chef search patterns to dynamic Ansible inventory.</p>"},{"location":"user-guide/mcp-tools/#convert_chef_search_to_inventory","title":"convert_chef_search_to_inventory","text":"<p>Transform Chef search queries to Ansible inventory groups.</p> <p>Parameters: - <code>search_query</code> (string, required): Chef search query (e.g., \"role:webserver AND environment:production\") - <code>group_name</code> (string, required): Target Ansible inventory group name</p> <p>Returns: - Ansible inventory YAML/INI format - Host variables mapping - Group variable recommendations - Dynamic inventory script template</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Convert Chef search \"role:database AND chef_environment:production\"\nto an Ansible inventory group named \"production_databases\"\n</code></pre>"},{"location":"user-guide/mcp-tools/#generate_dynamic_inventory_script","title":"generate_dynamic_inventory_script","text":"<p>Create dynamic inventory scripts from Chef server queries.</p> <p>Parameters: - <code>chef_server_url</code> (string, required): Chef server URL - <code>search_queries</code> (array, required): List of search queries with group names - <code>output_format</code> (string, optional): \"json\" or \"script\" (default: script)</p> <p>Returns: - Executable Python script for dynamic inventory - Chef API integration code - Caching mechanism - Error handling</p>"},{"location":"user-guide/mcp-tools/#analyze_chef_search_patterns","title":"analyze_chef_search_patterns","text":"<p>Discover and analyze search usage in cookbooks.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook</p> <p>Returns: - All search patterns found in recipes - Node attribute queries - Data bag queries - Inventory group recommendations</p>"},{"location":"user-guide/mcp-tools/#4-inspec-integration-validation","title":"4. InSpec Integration &amp; Validation","text":"<p>Complete InSpec-to-Ansible testing pipeline.</p>"},{"location":"user-guide/mcp-tools/#parse_inspec_profile","title":"parse_inspec_profile","text":"<p>Parse InSpec profiles and extract controls.</p> <p>Parameters: - <code>profile_path</code> (string, required): Path to InSpec profile directory</p> <p>Returns: - Profile metadata - Control definitions - Resource usage - Dependencies</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse the InSpec profile at tests/inspec/database-profile\n</code></pre> <pre><code>souschef-cli inspec-parse tests/inspec/database-profile\n</code></pre>"},{"location":"user-guide/mcp-tools/#convert_inspec_to_test","title":"convert_inspec_to_test","text":"<p>Convert InSpec controls to Testinfra or Ansible assert tasks.</p> <p>Parameters: - <code>inspec_profile</code> (string, required): Path to InSpec profile - <code>output_format</code> (string, required): \"testinfra\" or \"ansible\"</p> <p>Returns: - Converted test code - Assertion mappings - Resource equivalents - Fixtures and setup code</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Convert InSpec profile at tests/inspec/nginx to Ansible assert tasks\n</code></pre> <pre><code>souschef-cli inspec-convert tests/inspec/nginx --format ansible\n</code></pre>"},{"location":"user-guide/mcp-tools/#generate_inspec_from_recipe","title":"generate_inspec_from_recipe","text":"<p>Auto-generate InSpec validation from Chef recipes.</p> <p>Parameters: - <code>recipe_path</code> (string, required): Path to Chef recipe</p> <p>Returns: - InSpec profile structure - Controls for each resource - Automated assertions - Test coverage recommendations</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Generate InSpec tests from examples/database/recipes/default.rb\n</code></pre> <pre><code>souschef-cli inspec-generate examples/database/recipes/default.rb\n</code></pre>"},{"location":"user-guide/mcp-tools/#5-data-bags-secrets-management","title":"5. Data Bags &amp; Secrets Management","text":"<p>Chef data bags to Ansible vars/vault conversion.</p>"},{"location":"user-guide/mcp-tools/#convert_chef_databag_to_vars","title":"convert_chef_databag_to_vars","text":"<p>Transform data bags to Ansible variable files.</p> <p>Parameters: - <code>databag_path</code> (string, required): Path to data bag directory or file - <code>output_format</code> (string, optional): \"yaml\" or \"json\" (default: yaml)</p> <p>Returns: - Ansible variable file content - Variable naming conventions - Encryption recommendations for sensitive data</p>"},{"location":"user-guide/mcp-tools/#generate_ansible_vault_from_databags","title":"generate_ansible_vault_from_databags","text":"<p>Convert encrypted data bags to Ansible Vault.</p> <p>Parameters: - <code>databag_path</code> (string, required): Path to encrypted data bag - <code>vault_password</code> (string, optional): Vault password for encryption</p> <p>Returns: - Ansible Vault encrypted file - Vault ID recommendations - Key management guidance</p> <p>Security Note: Never log or display vault passwords. Use environment variables or secure prompts.</p>"},{"location":"user-guide/mcp-tools/#analyze_chef_databag_usage","title":"analyze_chef_databag_usage","text":"<p>Analyze data bag usage patterns in cookbooks.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook</p> <p>Returns: - Data bag queries found - Variable usage patterns - Migration recommendations - Vault encryption candidates</p>"},{"location":"user-guide/mcp-tools/#6-environment-configuration-management","title":"6. Environment &amp; Configuration Management","text":"<p>Chef environments to Ansible inventory groups.</p>"},{"location":"user-guide/mcp-tools/#convert_chef_environment_to_inventory_group","title":"convert_chef_environment_to_inventory_group","text":"<p>Transform Chef environments to inventory.</p> <p>Parameters: - <code>environment_file</code> (string, required): Path to Chef environment file (.rb or .json) - <code>inventory_group_name</code> (string, required): Target inventory group name</p> <p>Returns: - Ansible inventory group with variables - Environment-to-inventory mapping - Variable precedence recommendations</p>"},{"location":"user-guide/mcp-tools/#generate_inventory_from_chef_environments","title":"generate_inventory_from_chef_environments","text":"<p>Generate complete inventory from environments.</p> <p>Parameters: - <code>environments_dir</code> (string, required): Path to Chef environments directory</p> <p>Returns: - Multi-environment inventory structure - Group_vars organization - Host pattern recommendations</p>"},{"location":"user-guide/mcp-tools/#analyze_chef_environment_usage","title":"analyze_chef_environment_usage","text":"<p>Analyze environment usage in cookbooks.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook</p> <p>Returns: - Environment-specific logic - Attribute overrides by environment - Migration impact analysis</p>"},{"location":"user-guide/mcp-tools/#7-awxansible-automation-platform-integration","title":"7. AWX/Ansible Automation Platform Integration","text":"<p>Enterprise AWX/AAP configuration generation.</p>"},{"location":"user-guide/mcp-tools/#generate_awx_job_template_from_cookbook","title":"generate_awx_job_template_from_cookbook","text":"<p>Create AWX job templates from cookbooks.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook - <code>template_name</code> (string, required): AWX job template name - <code>project_name</code> (string, optional): AWX project name - <code>inventory_name</code> (string, optional): AWX inventory name</p> <p>Returns: - AWX job template JSON configuration - Playbook requirements - Variable prompts - Credentials configuration</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Generate an AWX job template from examples/database cookbook\nnamed \"Deploy Database Server\"\n</code></pre>"},{"location":"user-guide/mcp-tools/#generate_awx_workflow_from_chef_runlist","title":"generate_awx_workflow_from_chef_runlist","text":"<p>Transform Chef run-lists to AWX workflows.</p> <p>Parameters: - <code>runlist</code> (string, required): Chef run-list (e.g., \"recipe[app::deploy],recipe[app::configure]\") - <code>workflow_name</code> (string, required): AWX workflow template name</p> <p>Returns: - AWX workflow template JSON - Job dependencies and ordering - Success/failure paths - Approval nodes recommendations</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Create an AWX workflow from Chef run-list\n\"recipe[database::install],recipe[database::configure],recipe[app::deploy]\"\n</code></pre>"},{"location":"user-guide/mcp-tools/#generate_awx_project_from_cookbooks","title":"generate_awx_project_from_cookbooks","text":"<p>Generate AWX projects from cookbook collections.</p> <p>Parameters: - <code>cookbooks_dir</code> (string, required): Path to cookbooks directory - <code>project_name</code> (string, required): AWX project name - <code>scm_url</code> (string, optional): Git repository URL</p> <p>Returns: - AWX project configuration - Directory structure for Git repository - Requirements files (requirements.yml, requirements.txt) - Project organization best practices</p>"},{"location":"user-guide/mcp-tools/#generate_awx_inventory_source_from_chef","title":"generate_awx_inventory_source_from_chef","text":"<p>Create dynamic inventory sources from Chef server.</p> <p>Parameters: - <code>chef_server_url</code> (string, required): Chef server URL - <code>environment</code> (string, optional): Chef environment filter - <code>inventory_source_name</code> (string, required): AWX inventory source name</p> <p>Returns: - AWX inventory source configuration - Custom dynamic inventory script - Sync schedule recommendations - Chef API credentials setup</p>"},{"location":"user-guide/mcp-tools/#8-chef-habitat-to-container-conversion","title":"8. Chef Habitat to Container Conversion","text":"<p>Modernize Habitat applications to containerized deployments.</p>"},{"location":"user-guide/mcp-tools/#parse_habitat_plan","title":"parse_habitat_plan","text":"<p>Parse Chef Habitat plan files (plan.sh) and extract package metadata.</p> <p>Parameters: - <code>plan_path</code> (string, required): Path to Habitat plan.sh file</p> <p>Returns: - Package name, origin, and version - Build and runtime dependencies - Build hooks (do_build, do_install, do_prepare) - Service configuration and exports - Configuration templates</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Parse the Habitat plan at /path/to/habitat/plan.sh\n</code></pre> <pre><code>souschef-cli habitat-parse /path/to/habitat/plan.sh\n</code></pre>"},{"location":"user-guide/mcp-tools/#convert_habitat_to_dockerfile","title":"convert_habitat_to_dockerfile","text":"<p>Convert Chef Habitat plans to production-ready Dockerfiles.</p> <p>Parameters: - <code>plan_path</code> (string, required): Path to Habitat plan.sh - <code>base_image</code> (string, optional): Docker base image (default: ubuntu:22.04) - <code>include_security_scan</code> (boolean, optional): Add security scanning (default: true)</p> <p>Returns: - Multi-stage Dockerfile - Build dependencies management - Security best practices (non-root user, minimal layers) - Health checks and entry points - .dockerignore recommendations</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Convert Habitat plan at /path/to/plan.sh to a Dockerfile\nusing alpine:3.18 as base image\n</code></pre> <p>Features: - \u2705 Multi-stage builds for minimal image size - \u2705 Security scanning integration (Snyk, Trivy) - \u2705 Non-root user execution - \u2705 Health check configuration - \u2705 Environment variable mapping</p>"},{"location":"user-guide/mcp-tools/#generate_compose_from_habitat","title":"generate_compose_from_habitat","text":"<p>Generate docker-compose.yml from multiple Habitat plans.</p> <p>Parameters: - <code>plan_paths</code> (array, required): List of Habitat plan.sh paths - <code>network_name</code> (string, optional): Docker network name - <code>include_volumes</code> (boolean, optional): Add volume mounts (default: true)</p> <p>Returns: - docker-compose.yml for multi-service deployment - Service dependencies and networking - Volume and secret management - Environment configuration - Development vs production profiles</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Generate docker-compose.yml from Habitat plans:\n- /path/to/web/plan.sh\n- /path/to/api/plan.sh\n- /path/to/database/plan.sh\nusing network name \"myapp_network\"\n</code></pre> <p>Features: - \u2705 Service orchestration and dependencies - \u2705 Health checks and restart policies - \u2705 Secrets management integration - \u2705 Development and production profiles - \u2705 Resource limits and constraints</p>"},{"location":"user-guide/mcp-tools/#9-advanced-deployment-patterns-migration-assessment","title":"9. Advanced Deployment Patterns &amp; Migration Assessment","text":"<p>Modern deployment strategies and migration planning.</p>"},{"location":"user-guide/mcp-tools/#convert_chef_deployment_to_ansible_strategy","title":"convert_chef_deployment_to_ansible_strategy","text":"<p>Convert deployment recipes to Ansible strategies.</p> <p>Parameters: - <code>recipe_path</code> (string, required): Path to deployment recipe - <code>strategy_type</code> (string, optional): \"rolling\", \"blue_green\", or \"canary\"</p> <p>Returns: - Ansible playbook with deployment strategy - Pre/post deployment tasks - Validation and rollback procedures - Monitoring integration points</p>"},{"location":"user-guide/mcp-tools/#generate_blue_green_deployment_playbook","title":"generate_blue_green_deployment_playbook","text":"<p>Create blue/green deployment playbooks.</p> <p>Parameters: - <code>app_playbook</code> (string, required): Path to application playbook - <code>load_balancer_type</code> (string, required): \"haproxy\", \"nginx\", or \"aws_elb\"</p> <p>Returns: - Blue/green deployment orchestration - Load balancer switching logic - Health check integration - Rollback procedures</p>"},{"location":"user-guide/mcp-tools/#generate_canary_deployment_strategy","title":"generate_canary_deployment_strategy","text":"<p>Generate canary deployment configurations.</p> <p>Parameters: - <code>app_playbook</code> (string, required): Path to application playbook - <code>canary_percentage</code> (number, optional): Initial canary percentage (default: 10) - <code>increment_percentage</code> (number, optional): Traffic increment per stage (default: 25)</p> <p>Returns: - Canary deployment playbook - Traffic splitting configuration - Metrics collection points - Automatic rollback triggers</p>"},{"location":"user-guide/mcp-tools/#validate_conversion","title":"validate_conversion","text":"<p>Comprehensive validation of Chef-to-Ansible conversions across multiple dimensions.</p> <p>Parameters: - <code>conversion_type</code> (string, required): Type of conversion - \"resource\", \"recipe\", \"playbook\", \"template\" - <code>original_content</code> (string, optional): Original Chef content for comparison - <code>result_content</code> (string, required): Converted Ansible content to validate - <code>output_format</code> (string, optional): Output format - \"text\" (default), \"json\", \"summary\"</p> <p>Returns: - Validation results organized by severity (ERROR, WARNING, INFO) - Issues categorized by type:   - Syntax: YAML, Jinja2, Python syntax validation   - Semantic: Logic equivalence, variable usage, dependencies   - Best Practice: Ansible conventions, idempotency, organization   - Security: Privilege escalation, sensitive data handling   - Performance: Efficiency recommendations and optimizations - Overall validation status: PASSED or FAILED - Actionable recommendations for each issue</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Validate the converted Ansible task for installing nginx\nand check for syntax errors and best practices\n</code></pre> <pre><code>souschef-cli validate resource --content \"$(cat nginx_task.yml)\" --format json\n</code></pre> <p>Validation Levels:</p> <ul> <li>ERROR :octicons-x-circle-fill-24:{ .error }: Critical issues preventing execution</li> <li>WARNING :octicons-alert-fill-24:{ .warning }: Potential problems or anti-patterns</li> <li>INFO :octicons-info-16:{ .info }: Improvement suggestions and best practices</li> </ul> <p>Output Formats:</p> <ul> <li>text: Detailed human-readable report with all findings</li> <li>json: Structured JSON for CI/CD integration</li> <li>summary: Quick overview with counts only</li> </ul>"},{"location":"user-guide/mcp-tools/#analyze_chef_application_patterns","title":"analyze_chef_application_patterns","text":"<p>Identify application deployment patterns.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook</p> <p>Returns: - Detected deployment patterns (monolithic, microservices, etc.) - Infrastructure patterns - Configuration management approaches - Modernization recommendations</p>"},{"location":"user-guide/mcp-tools/#assess_chef_migration_complexity","title":"assess_chef_migration_complexity","text":"<p>Comprehensive migration complexity assessment.</p> <p>Parameters: - <code>cookbooks_path</code> (string, required): Path to cookbooks directory or single cookbook - <code>include_dependencies</code> (boolean, optional): Analyze dependencies (default: true)</p> <p>Returns: - Complexity score (1-10 scale) - Risk factors and mitigation strategies - Resource breakdown and conversion difficulty - Estimated effort (hours/days) - Recommended migration order - Prerequisite identification</p> <p>Example Usage:</p> MCP (AI Assistant) <pre><code>Assess the migration complexity for all cookbooks in /path/to/cookbooks\nincluding dependency analysis\n</code></pre>"},{"location":"user-guide/mcp-tools/#generate_migration_plan","title":"generate_migration_plan","text":"<p>Create detailed migration execution plans.</p> <p>Parameters: - <code>cookbooks</code> (array, required): List of cookbook paths - <code>include_timeline</code> (boolean, optional): Include timeline estimates (default: true) - <code>include_resources</code> (boolean, optional): Include resource requirements (default: true)</p> <p>Returns: - Phase-by-phase migration plan - Task breakdown with dependencies - Timeline with milestones - Resource allocation recommendations - Risk management strategy - Testing and validation checkpoints</p>"},{"location":"user-guide/mcp-tools/#analyze_cookbook_dependencies","title":"analyze_cookbook_dependencies","text":"<p>Analyze dependencies and determine optimal migration order.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook</p> <p>Returns: - Direct and transitive dependencies - Dependency graph visualization (Mermaid format) - Circular dependency detection - Recommended migration sequence - Version compatibility analysis</p>"},{"location":"user-guide/mcp-tools/#generate_migration_report","title":"generate_migration_report","text":"<p>Generate comprehensive migration reports for stakeholders.</p> <p>Parameters: - <code>assessment_data</code> (object, required): Output from assess_chef_migration_complexity - <code>report_type</code> (string, optional): \"executive\" or \"technical\" (default: technical) - <code>output_format</code> (string, optional): \"markdown\", \"html\", or \"pdf\" (default: markdown)</p> <p>Returns: - Executive summary (for executive reports) - Technical details and implementation plan - Cost/benefit analysis - Risk assessment matrix - Resource requirements - Success metrics and KPIs</p>"},{"location":"user-guide/mcp-tools/#performance-profiling-tools","title":"Performance Profiling Tools","text":"<p>Profile cookbook parsing performance to optimize large-scale migrations.</p>"},{"location":"user-guide/mcp-tools/#profile_cookbook_performance","title":"profile_cookbook_performance","text":"<p>Profile all parsing operations for an entire cookbook.</p> <p>Parameters: - <code>cookbook_path</code> (string, required): Path to cookbook root directory</p> <p>Returns: - Execution time for each operation (recipes, attributes, templates, resources) - Peak memory usage - Performance bottlenecks identification - Optimization recommendations - Before/after comparison support</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Profile the performance of parsing examples/database cookbook\nand identify any bottlenecks\n</code></pre> <pre><code>souschef-cli profile examples/database --output profile_report.txt\n</code></pre>"},{"location":"user-guide/mcp-tools/#profile_parsing_operation","title":"profile_parsing_operation","text":"<p>Profile a specific parsing operation with detailed cProfile statistics.</p> <p>Parameters: - <code>operation_type</code> (string, required): \"recipe\", \"attributes\", \"template\", \"resource\", or \"metadata\" - <code>file_path</code> (string, required): Path to the file to profile - <code>detailed</code> (boolean, optional): Include cProfile statistics (default: false)</p> <p>Returns: - Execution time - Peak memory usage - Detailed function call statistics (if detailed=true) - Top time-consuming functions - Performance recommendations</p> <p>Example Usage:</p> MCP (AI Assistant)CLI <pre><code>Profile parsing examples/database/recipes/default.rb\nwith detailed statistics\n</code></pre> <pre><code>souschef-cli profile-operation recipe examples/database/recipes/default.rb --detailed\n</code></pre>"},{"location":"user-guide/mcp-tools/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/mcp-tools/#tool-selection-guide","title":"Tool Selection Guide","text":"<ol> <li>Start with Assessment: Use <code>assess_chef_migration_complexity</code> before detailed conversion</li> <li>Understand Structure: Use <code>list_cookbook_structure</code> and <code>analyze_cookbook_dependencies</code> to map your cookbooks</li> <li>Parse Before Converting: Always parse recipes/resources before conversion to understand complexity</li> <li>Validate Everything: Use <code>validate_conversion</code> after each conversion step</li> <li>Test Incrementally: Convert and test one recipe at a time</li> </ol>"},{"location":"user-guide/mcp-tools/#workflow-recommendations","title":"Workflow Recommendations","text":"<p>For New Migrations: 1. <code>assess_chef_migration_complexity</code> - Get overall assessment 2. <code>generate_migration_plan</code> - Create execution plan 3. <code>analyze_cookbook_dependencies</code> - Determine order 4. Start conversions with <code>generate_playbook_from_recipe</code> 5. Validate with <code>validate_conversion</code></p> <p>For AWX/AAP Deployments: 1. Convert recipes to playbooks first 2. Use <code>generate_awx_job_template_from_cookbook</code> for each cookbook 3. Create workflows with <code>generate_awx_workflow_from_chef_runlist</code> 4. Set up dynamic inventory with <code>generate_awx_inventory_source_from_chef</code></p> <p>For Habitat Migrations: 1. Parse plans with <code>parse_habitat_plan</code> 2. Convert with <code>convert_habitat_to_dockerfile</code> 3. Orchestrate with <code>generate_compose_from_habitat</code> 4. Test and validate containers</p>"},{"location":"user-guide/mcp-tools/#performance-optimization","title":"Performance Optimization","text":"<p>For Large Cookbooks: - Use <code>profile_cookbook_performance</code> to identify bottlenecks - Profile specific operations with <code>profile_parsing_operation --detailed</code> - Batch similar conversions together - Consider parallel processing for independent cookbooks</p> <p>Memory Management: - Profile memory usage before production migrations - Monitor peak memory for large recipe files - Implement chunking for very large cookbooks</p>"},{"location":"user-guide/mcp-tools/#related-documentation","title":"Related Documentation","text":"<ul> <li>CLI Usage - Command-line interface for direct tool access</li> <li>Examples - Real-world migration examples and patterns</li> <li>Migration Guide - Complete migration methodology</li> <li>API Reference - Technical implementation details</li> </ul>"},{"location":"user-guide/mcp-tools/#getting-help","title":"Getting Help","text":"<p>If you encounter issues or need assistance with specific tools:</p> <ol> <li>Check the Troubleshooting section</li> <li>Review Examples for common patterns</li> <li>See Contributing to report issues or request features</li> </ol> <p>AI Assistant Support</p> <p>Your AI assistant has access to all these tools through MCP. Simply describe what you need in natural language, and it will use the appropriate tools to help you migrate your Chef infrastructure to Ansible.</p>"}]}